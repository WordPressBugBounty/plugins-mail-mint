/*! For license information please see export-contact-file.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_mmAdmin_webpackJsonp=globalThis.webpackChunk_mmAdmin_webpackJsonp||[]).push([[2929],{9141:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(7723),o=n(7767),i=n(9012),a=n(4848);const c=React.memo((function(){var t=(0,o.Zp)();return(0,a.jsx)("div",{className:"mintmrm-header",children:(0,a.jsx)("div",{className:"contact-details-breadcrumb export-contact-breadcrum",children:(0,a.jsx)("div",{className:"export-cotainer",children:(0,a.jsx)("div",{className:"mintmrm-container",children:(0,a.jsx)("div",{className:"back-button",children:(0,a.jsxs)("button",{onClick:function(){t(-1)},children:[(0,a.jsx)(i.A,{})," ",(0,r.__)("Back","mrm")]})})})})})})}))},4466:(t,e,n)=>{n.r(e),n.d(e,{default:()=>k});var r=n(9214),o=n(7723),i=n(8468),a=n(1609),c=n(7767),s=n(9870),u=n(8306),l=n(5919),f=n(2017),m=n(9480),p=n(5747),d=n(7091),h=n(2930),v=n(5125),y=n(1381),b=n(3469),x=n(9141),j=n(4848);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return(e=function(t){var e=function(t){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return P(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const k=React.memo((function(){(0,h.A)("mrm-admin","contacts"),(0,v.A)("Export Contacts - Mail Mint");var t=N((0,a.useState)([]),2),e=t[0],n=t[1],g=N((0,a.useState)([]),2),w=g[0],O=g[1],k=window.MRM_Vars.is_mailmint_pro_license_active,C=N((0,a.useState)(!1),2),A=C[0],E=C[1],T=N((0,a.useState)(!0),2),F=T[0],I=T[1],D=N((0,a.useState)(["email","first_name","last_name"]),2),G=D[0],M=D[1],L=N((0,a.useState)(!1),2),R=L[0],J=L[1],V=N((0,a.useState)(""),2),q=V[0],Z=V[1],B=(0,c.Zp)(),H=N((0,a.useState)(""),2),U=H[0],Y=H[1],$=N((0,a.useState)(),2),z=$[0],K=$[1],Q=N((0,a.useState)({}),2),W=Q[0],X=Q[1],tt=(0,a.useRef)(null),et=N((0,a.useState)(""),2),nt=et[0],rt=et[1],ot=N((0,a.useState)(!1),2),it=ot[0],at=ot[1],ct=N((0,a.useState)("success"),2),st=ct[0],ut=ct[1],lt=N((0,a.useState)(!1),2),ft=lt[0],mt=lt[1],pt=N((0,a.useState)(""),2),dt=pt[0],ht=pt[1];(0,a.useEffect)((function(){window.MRM_Vars.is_mailmint_pro_license_active?(0,y.c8)().then((function(t){var e,r;"success"===(null==t?void 0:t.status)&&(n(null==t||null===(e=t.data)||void 0===e?void 0:e.fields),O(null==t||null===(r=t.data)||void 0===r?void 0:r.segments)),I(!1)})):I(!1)}),[]);var vt=function(t){var e;k?G.includes(t.target.id)?(M(G.filter((function(e){return e!=t.target.id}))),J(!1)):M([].concat(function(t){if(Array.isArray(t))return P(t)}(e=G)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t.target.id])):at(!0)};(0,l.c7)(tt,E);var yt=(0,a.useMemo)((function(){return nt?w.filter((function(t){return t.title.toLowerCase().indexOf(nt.toLocaleLowerCase())>-1})):w}),[nt,w]);return(0,j.jsxs)("div",{className:"mintmrm-export-page",children:[(0,j.jsx)(x.A,{}),(0,j.jsx)("div",{className:"mintmrm-container",children:(0,j.jsxs)("div",{className:"export-wrapper",children:[(0,j.jsx)("h3",{className:"export-title",children:(0,o.__)("Export Contacts","mrm")}),(0,j.jsx)("p",{className:"export-description",children:(0,o.__)("Select the contact data fields that you want to export.","mrm")}),F?(0,j.jsx)(f.A,{type:"table"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"export-section",children:[(0,j.jsxs)("div",{className:"form-group top-align export-title-wrapper",children:[(0,j.jsxs)("label",{htmlFor:"export-name",children:[(0,o.__)("Name","mrm"),(0,j.jsx)("span",{className:"required-mark",children:"*"})]}),(0,j.jsxs)("div",{className:"input-custom-wrapper",children:[(0,j.jsx)("input",{type:"text",id:"export-name",placeholder:"Enter file name",autoComplete:"off",value:q,onChange:function(t){return k&&(e=t.target.value,Z(e),void(e.length>=100?X(S(S({},W),{},{name:"Export file name character limit reached 100 characters."})):X(S(S({},W),{},{name:""}))));var e},onClick:function(){k||at(!0)},maxLength:100}),(0,j.jsx)("p",{className:"error-message ".concat(null!=W&&W.name?"show":""),children:W.name})]})]}),(0,j.jsxs)("div",{className:"select-fields-wrapper",children:[(0,j.jsx)("h4",{className:"select-field-title",children:(0,o.__)("Please select fields that you want to export.","mrm")}),(0,j.jsxs)("span",{className:"mintmrm-checkbox",children:[(0,j.jsx)("input",{id:"all-field",type:"checkbox",name:"all-field",checked:R,onChange:function(t){k?(M(R?["email","first_name","last_name"]:e.map((function(t){return t.slug}))),J(!R)):at(!0)}}),(0,j.jsx)("label",{htmlFor:"all-field",children:(0,o.__)("Select All Fields","mrm")})]}),e.map((function(t){return(0,j.jsxs)("span",{className:"mintmrm-checkbox",children:[(0,j.jsx)("input",{id:null==t?void 0:t.slug,type:"checkbox",name:null==t?void 0:t.slug,onChange:vt,checked:G.includes(null==t?void 0:t.slug)}),(0,j.jsx)("label",{htmlFor:null==t?void 0:t.slug,children:null==t?void 0:t.name})]},null==t?void 0:t.slug)}))]}),(0,j.jsx)("div",{className:"select-segment-wrapper",children:(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsxs)("label",{className:"select-segment-title",children:[" ",(0,o.__)("Pick one segment","mrm"),(0,j.jsxs)("span",{className:"mintmrm-tooltip",children:[(0,j.jsx)(u.A,{}),(0,j.jsx)("p",{children:(0,o.__)("Select the segment if you only want to export contacts from a specific segment.","mrm")})]})]}),(0,j.jsxs)("div",{className:"dropdown-wrapper",ref:tt,children:[(0,j.jsx)("button",{type:"button",className:"drop-down-button ".concat(A?"show ":""," ").concat(U?"focus":""),onClick:function(){k?E(!A):at(!0)},children:U||"Choose Segment"}),(0,j.jsxs)("ul",{className:"mintmrm-dropdown ".concat(A?"show":""),children:[(0,j.jsx)("li",{className:"searchbar",children:(0,j.jsxs)("span",{className:"pos-relative",children:[(0,j.jsx)(s.A,{}),(0,j.jsx)("input",{type:"search",name:"column-search",placeholder:"Search...",value:nt,onChange:function(t){return rt(t.target.value)}})]})}),(null==yt?void 0:yt.length)>0&&yt.map((function(t){return(0,j.jsx)("li",{onClick:function(){return e=null==t?void 0:t.title,n=null==t?void 0:t.id,""===U||U!=e?(Y(e),K(n)):(Y(""),K()),void E(!1);var e,n},className:"single-column ".concat((null==t?void 0:t.title)===U?"selected-column":""),children:null==t?void 0:t.title},null==t?void 0:t.id)})),0==(null==yt?void 0:yt.length)&&(0,j.jsx)("div",{className:"no-item-found",children:"No item found"})]})]})]})})]}),(0,j.jsxs)("div",{className:"export-save-button",children:[(0,j.jsx)("button",{className:"contact-cancel mintmrm-btn outline",onClick:function(){B("/contacts")},children:(0,o.__)("Cancel","mrm")}),(0,j.jsx)("button",{className:"contact-save mintmrm-btn",onClick:function(t){k?!q.length||q.length>=100?(ut("warning"),mt(!0),ht("File name is required for exporting data. "),(0,b.bd)(!1,mt)):(0,i.isEmpty)(G)?(ut("warning"),mt(!0),ht("No fields selected. Please choose one or more fields to generate the CSV file."),(0,b.bd)(!1,mt)):B("/contacts/export/preview",{state:{fileName:q,selectedFields:G,segmentID:z,contactFields:e,type:"contact-export"}}):at(!0)},children:(0,o.__)("Next","mrm")})]})]})]})}),ft&&(0,j.jsx)(m.A,{setShowNotification:mt,message:dt,notificationType:st,setNotificationType:ut}),it&&(0,j.jsx)("div",{className:"mintmrm-container",children:(0,j.jsx)(d.A,{setIsPro:at,proLink:p.ug})}),(0,j.jsx)(r.A,{docLink:"https://getwpfunnels.com/docs/mail-mint-contacts/export-contacts-mail-mint/"})]})}))},1381:(t,e,n)=>{n.d(e,{HI:()=>O,Rs:()=>_,c8:()=>j,v9:()=>w});var r=n(1455),o=n.n(r);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(){var t=h(),e=t.m(u),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,l(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(u=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new y(t,e)},AsyncIterator:d,async:function(t,e,n,o,a){return(r(e)?p:m)(i(t),e,n,o,a)},keys:f,values:l}})()}function l(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(i(t)+" is not iterable")}function f(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function m(t,e,n,r,o){var i=p(t,e,n,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function p(t,e,n,r,o){return new d(h().w(t,e,n,r),o||Promise)}function d(t,e){function n(r,o,i,a){try{var c=t[r](o),s=c.value;return s instanceof y?e.resolve(s.v).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(s).then((function(t){c.value=t,i(c)}),(function(t){return n("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(v(d.prototype),v(d.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),v(this,"_invoke",(function(t,o,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function h(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return v(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],f=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,s=t,m.n=n,a}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,i=l[e],p=m.p,d=i[2];n>3?(o=d===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,m.v=r,m.n=i[1]):p<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,m.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),c=l,s=d;(e=c<2?t:s)||!f;){i||(c?c<3?(c>1&&(m.n=-1),p(c,s)):m.n=s:m.v=s);try{if(u=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=m.n<0)?s:n.call(r,m))!==a)break}catch(e){i=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(v(e={},r,(function(){return this})),e),f=u.prototype=c.prototype=Object.create(l);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,v(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,v(f,"constructor",u),v(u,"constructor",s),s.displayName="GeneratorFunction",v(u,o,"GeneratorFunction"),v(f),v(f,o,"Generator"),v(f,r,(function(){return this})),v(f,"toString",(function(){return"[object Generator]"})),(h=function(){return{w:i,m}})()}function v(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}v=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){v(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},v(t,e,n,r)}function y(t,e){this.v=t,this.k=e}function b(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){b(i,r,o,a,c,"next",t)}function c(t){b(i,r,o,a,c,"throw",t)}a(void 0)}))}}function j(){return g.apply(this,arguments)}function g(){return(g=x(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o()({path:"mrm/v1/contacts/export/fields"}).then((function(t){return t})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t,e){return S.apply(this,arguments)}function S(){return(S=x(u().mark((function t(e,n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({fields:e,segmentID:n})},t.abrupt("return",o()(c({path:"mrm/v1/contacts/export/preview"},r)));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t,e,n,r,o,i,a){return N.apply(this,arguments)}function N(){return(N=x(u().mark((function t(e,n,r,i,a,s,l){var f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({selectedFields:e,segmentID:n,fileName:r,offset:i,contactFields:a,delimiter:s,selectedContacts:l})},t.abrupt("return",o()(c({path:"mrm/v1/contacts/export"},f)));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t,e){return P.apply(this,arguments)}function P(){return(P=x(u().mark((function t(e,n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({fileName:e,filePath:n})},o()(c({path:"mrm/v1/contacts/export/download"},r));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=export-contact-file.min.js.map?ver=1756289317749001