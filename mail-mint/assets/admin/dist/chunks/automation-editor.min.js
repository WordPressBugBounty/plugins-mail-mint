/*! For license information please see automation-editor.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_mmAdmin_webpackJsonp=globalThis.webpackChunk_mmAdmin_webpackJsonp||[]).push([[7352],{72458:(t,e,n)=>{n.r(e),n.d(e,{default:()=>pn});var r=n(56427),o=n(34764),i=n(53031),a=n(46942),s=n.n(a),l=n(47143),c=n(35699),u=n(86087),d=n(27723),m=n(51609),p=n(79185),f=n(88756),v=n(26929),y=n(74848);function g(){return(0,y.jsx)("svg",{width:"24",height:"26",fill:"none",viewBox:"0 0 24 26",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("path",{fill:"#02C4FB",stroke:"#02C4FB",strokeWidth:".3",d:"M22.103 16.373l-9.125-7.377a2.757 2.757 0 00-2.931-.33c-.47.229-.86.586-1.127 1.027-.265.442-.395.95-.372 1.462l.573 11.54c.02.498.2.976.512 1.37.311.392.74.68 1.228.823a2.496 2.496 0 001.845-.144c.34-.168.637-.41.865-.71l1.975-2.56a2.156 2.156 0 011.7-.825h3.278a2.505 2.505 0 001.423-.437c.417-.285.733-.69.906-1.159.173-.469.194-.978.06-1.459a2.412 2.412 0 00-.81-1.226v.005zm-1.022 2.054a.559.559 0 01-.214.28.577.577 0 01-.343.1h-3.278a4.107 4.107 0 00-1.788.413c-.556.27-1.04.663-1.417 1.147l-1.975 2.559a.584.584 0 01-.65.203.563.563 0 01-.293-.192.544.544 0 01-.12-.326l-.571-11.54a.77.77 0 01.109-.441.793.793 0 01.34-.308.83.83 0 01.896.099l9.125 7.382a.535.535 0 01.179.624zM8.545 4.385V1.923c0-.245.1-.48.276-.653a.953.953 0 011.333 0 .914.914 0 01.277.653v2.462c0 .245-.1.48-.277.653a.953.953 0 01-1.333 0 .914.914 0 01-.276-.653zm-2.32 2.492a.93.93 0 01-.346.346.944.944 0 01-.936.003L2.428 5.852a.939.939 0 01-.463-.553.905.905 0 01.081-.712.929.929 0 01.575-.44.962.962 0 01.725.093L5.86 5.616a.938.938 0 01.45.556.905.905 0 01-.085.705zm-.923 3.25c.112.22.13.473.051.705a.93.93 0 01-.473.534l-2.515 1.23a.956.956 0 01-1.007-.102.906.906 0 01-.27-1.116.933.933 0 01.434-.433l2.514-1.231a.959.959 0 011.04.128c.094.08.17.177.226.286zm8.371-4.099a.906.906 0 01-.05-.704.93.93 0 01.473-.534l2.514-1.23a.961.961 0 01.717-.046c.235.078.43.244.541.462.111.218.13.47.052.701a.929.929 0 01-.468.534l-2.514 1.231a.96.96 0 01-.917-.041.934.934 0 01-.348-.373z"})})}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const j=(0,u.memo)((function(t){var e,n=t.step,o=(0,u.createContext)(r.__unstableUseCompositeState),i=(0,m.useContext)(o),a=(0,l.useDispatch)(f.Hz).setInserterPopover;return(0,y.jsxs)(r.__unstableCompositeItem,_(_({},i()),{},{role:"treeitem",className:"mrm-automation-add-trigger","data-previous-step-id":n.id,focusable:!0,onClick:function(t){t.stopPropagation(),a({anchor:t.target.closest("button"),type:"trigger"})},children:[(0,y.jsx)(g,{}),null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.SelectAStartingPoint]}))}));var x=n(34504),S=n(25747);function k(){return(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",children:(0,y.jsx)("path",{d:"M0.827527 6.59406L5.98735 11.7537C6.31557 12.0821 6.84774 12.0821 7.1758 11.7537C7.5039 11.4256 7.5039 10.8935 7.1758 10.5654L2.61016 5.99991L7.17567 1.43457C7.50377 1.10635 7.50377 0.574263 7.17567 0.24617C6.84758 -0.0820565 6.31544 -0.0820565 5.98721 0.24617L0.827394 5.4059C0.663347 5.57002 0.581416 5.7849 0.581416 5.99989C0.581416 6.21498 0.663507 6.43002 0.827527 6.59406Z",fill:"#2D3149"})})}const M=(0,m.memo)(k);function O(){return(0,y.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:[(0,y.jsx)("g",{clipPath:"url(#clip0_6439_3276)",children:(0,y.jsx)("path",{d:"M9.17247 6.59406L4.01265 11.7537C3.68443 12.0821 3.15226 12.0821 2.8242 11.7537C2.4961 11.4256 2.4961 10.8935 2.8242 10.5654L7.38984 5.99991L2.82433 1.43457C2.49623 1.10635 2.49623 0.574263 2.82433 0.24617C3.15242 -0.0820566 3.68456 -0.0820566 4.01279 0.24617L9.17261 5.4059C9.33665 5.57002 9.41858 5.7849 9.41858 5.99989C9.41858 6.21498 9.33649 6.43002 9.17247 6.59406Z",fill:"#2D3149"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"clip0_6439_3276",children:(0,y.jsx)("rect",{width:"12",height:"12",fill:"white"})})})]})}const P=(0,m.memo)(O),N=function(t){var e=t.children,n=(0,u.createContext)(r.__unstableUseCompositeState),o=(0,r.__unstableUseCompositeState)({shift:!0,wrap:"horizontal"});return(0,y.jsx)(n.Provider,{value:o,children:e})};m.ComponentType;var C=n(48558);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}var z=["isFirst","children"];function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return(e=function(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D=(0,u.forwardRef)((function(t,e){t.isFirst;var n=t.children,o=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,z),i=(0,u.createContext)(r.__unstableUseCompositeState),a=(0,u.useContext)(i);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("button",L(L(L({ref:e,role:"option",focusable:!0},o),a()),{},{className:"components-button block-editor-block-types-list__item  editor-block-list-item-sendMail",children:n}))})}));function V(t){var e=t.icon;return(0,y.jsx)("span",{className:"block-editor-block-icon",children:(0,y.jsx)(r.Icon,{icon:e})})}var T=n(75270);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}var F=["className","isFirst","item","onSelect","onHover","isDraggable","activeCategory","type"];function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function U(t,e,n){return(e=function(t){var e=function(t){if("object"!=H(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W=function(){var t=window.navigator.platform;return-1!==t.indexOf("Mac")||["iPad","iPhone"].includes(t)},G=(0,u.memo)((function(t){var e=t.className,n=t.isFirst,r=t.item,o=t.onSelect,i=t.onHover,a=(t.isDraggable,t.activeCategory),l=(t.type,function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,F)),c=(0,u.useRef)(!0);return"pro"!==r.package||window.MRM_Vars.is_mailmint_pro_license_active,(0,y.jsx)(y.Fragment,{children:(null==r?void 0:r.category)==a&&(0,y.jsx)("div",{className:"block-editor-block-types-list__list-item ".concat("triggers"===(null==r?void 0:r.group)?"trigger-items":""),children:(0,y.jsxs)(D,B(B({isFirst:n,className:s()("block-editor-block-types-list__item ",e),onClick:function(t){t.preventDefault(),o(r,W()?t.metaKey:t.ctrlKey),i(null)},onKeyDown:function(t){t.keyCode===C.ENTER&&(t.preventDefault(),o(r,W()?t.metaKey:t.ctrlKey),i(null))},onFocus:function(){c.current||i(r)},onMouseEnter:function(){c.current||i(r)},onMouseLeave:function(){return i(null)},onBlur:function(){return i(null)}},l),{},{children:["pro"===r.package&&!window.MRM_Vars.is_mailmint_pro_license_active&&(0,y.jsx)("span",{className:"pro-tag-with-icon",children:(0,y.jsx)(T.A,{})}),(0,y.jsx)("span",{className:"block-editor-block-types-list__item-icon",children:(0,y.jsx)(V,{icon:r.icon})}),(0,y.jsx)("span",{className:"block-editor-block-types-list__item-title",children:r.title})]}))})})})),q=n(20195);function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t,e,n){return(e=function(t){var e=function(t){if("object"!=K(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Y=(0,u.forwardRef)((function(t,e){var n,r,o=(n=(0,u.useState)(!1),r=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(n,r)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return(0,u.useEffect)((function(){var t;i&&(0,q.speak)(null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.MoveStepDirectionMsg)}),[i]),(0,y.jsx)("div",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){$(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({ref:e,role:"listbox","aria-orientation":"horizontal",onFocus:function(){a(!0)},onBlur:function(t){!t.currentTarget.contains(t.relatedTarget)&&a(!1)}},t))}));function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t,e,n){return(e=function(t){var e=function(t){if("object"!=X(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nt=(0,u.forwardRef)((function(t,e){var n=(0,u.createContext)(r.__unstableUseCompositeState),o=(0,u.useContext)(n);return(0,y.jsx)(r.__unstableCompositeGroup,tt(tt({role:"presentation",ref:e},t),o()))})),rt=function(t,e){for(var n=[],r=0,o=t.length;r<o;r+=e)n.push(t.slice(r,r+e));return n};const ot=(0,u.memo)((function(t){var e=t.items,n=void 0===e?[]:e,r=t.onSelect,o=t.onHover,i=void 0===o?function(){}:o,a=t.children,s=t.label,l=t.isDraggable,c=void 0===l||l,u=t.activeCategory,d=t.type;return(0,y.jsxs)(Y,{className:"block-editor-block-types-list","aria-label":s,children:[rt(n,20).map((function(t,e){return(0,y.jsx)(nt,{children:t.map((function(t,n){return(0,y.jsx)(G,{item:t,className:(o=t.key,"editor-block-list-item-".concat(o.replace(/\//,"-"))),onSelect:r,onHover:i,isDraggable:c,isFirst:0===e&&0===n,activeCategory:u,type:d},t.key);var o}))},e)})),a]})}));function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){lt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lt(t,e,n){return(e=function(t){var e=function(t){if("object"!=it(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==it(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ut(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var dt=(0,u.forwardRef)((function(t,e){t.onInsert;var n,o,i=ct((0,u.useState)("mailmint"),2),a=i[0],s=i[1],c=(0,l.useSelect)((function(t){return{steps:t(f.Hz).getSteps(),type:t(f.Hz).getInserterPopover().type,automationData:t(f.Hz).getAutomationData(),selectedStep:t(f.Hz).getSelectedStep(),inserterPopover:t(f.Hz).getInserterPopover(),emailConditions:t(f.Hz).getEmailConditions(),ctaProModalDisplay:t(f.Hz).getCtaProModalDisplay(),ctaProModalIcon:t(f.Hz).getCtaProModalIcon(),ctaProModalTitle:t(f.Hz).getCtaProModalTitle(),ctaProModalText:t(f.Hz).getCtaProModalText(),ctaProModalLink:t(f.Hz).getCtaProModalLink(),ctaProModalFeature:t(f.Hz).getCtaProModalFeature()}}),[]),p=c.steps,v=c.type,g=c.automationData,h=(c.selectedStep,c.inserterPopover),b=(c.ctaProModalDisplay,c.ctaProModalIcon,c.ctaProModalTitle,c.ctaProModalText,c.ctaProModalLink,c.ctaProModalFeature,(0,l.useDispatch)(f.Hz)),_=b.setInserterPopover,w=b.selectStep,j=b.setAutomationTriggerName,k=b.openSidebar,O=b.setMaybeSave,C=b.closeSidebar,A=b.setCtaProModal,z=b.setAutomationName,I=(0,l.useDispatch)(f.Hz),L=I.addStep,R=I.addLogicalStep,D=ct((0,u.useState)(null),2),V=D[0],T=D[1],H=ct((0,u.useState)(""),2),F=H[0],E=H[1],B=(0,u.useMemo)((function(){return"trigger"===v?[{type:"trigger",title:(0,d._x)("Triggers","automation steps","mrm"),label:(0,d._x)("Triggers","automation steps","mrm"),items:p.filter((function(t){return"triggers"===t.group}))}]:[{type:"actions",title:(0,d._x)("Actions","automation steps","mrm"),label:(0,d._x)("Actions","automation steps","mrm"),items:p.filter((function(t){return"actions"===t.group}))},{type:"logical",title:(0,d._x)("Logical","automation steps","mrm"),label:(0,d._x)("Logical","automation steps","mrm"),items:p.filter((function(t){return"logical"===t.group}))}]}),[p,v]),U=(0,u.useCallback)((function(t){T(t)}),[T]),W=(0,u.useRef)(),G=["wc_order_created","edd_complete_purchase","wc_order_completed","wc_abandoned_cart","wc_review_received","wc_price_dropped","wcs_subscription_created","wcs_subscription_trial_end","wcs_subscription_renewal_payment_failed","wcw_user_adds_product"],q=(0,u.useMemo)((function(){return B.map((function(t){return st(st({},t),{},{items:(e=F,n=t.items,n.filter((function(t){return t.title.toLowerCase().includes(e.trim().toLowerCase())})))});var e,n}))}),[F,B]),K=null===(n=window.MRM_Vars)||void 0===n?void 0:n.time_format,J=null===(o=window.MRM_Vars)||void 0===o?void 0:o.gmt_offset,$=new Date,Z=new Date($.getTime()+60*J*60*1e3).toUTCString(),Y=new Date(Z).toLocaleString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",year:"numeric",month:"numeric",day:"numeric",hour12:"H:i"!==K,timeZone:"UTC"}),X=(0,u.useCallback)((function(t){var e,n,r,o,i,a,s,l,c,u,m,p={step_id:(Math.random()+1).toString(36).substring(7),key:t.key,type:t.type,settings:{},next_step_id:{},popover_type:v};"logical"===t.type&&"condition"===t.key&&(p={step_id:(Math.random()+1).toString(36).substring(7),key:t.key,type:t.type,settings:{},popover_type:v,next_step_id:{},logical_next_step_id:{yes:"",no:""},node_data:{yes:[],no:[]}}),O(!1),"action"===t.type&&"delay"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{delay_settings:{delay:1,unit:"minutes"}})})),"action"===t.type&&"specificTimeDelay"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{specific_delay_settings:{time:Y}})})),"action"==t.type&&"sendMail"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{message_data:{subject:(0,d.__)("Welcome email from mint","mrm"),sender_email:null===(i=window.MRM_Vars)||void 0===i?void 0:i.email_settings.from_email,sender_name:null===(a=window.MRM_Vars)||void 0===a?void 0:a.email_settings.from_name,reply_name:null===(s=window.MRM_Vars)||void 0===s?void 0:s.email_settings.reply_name,reply_email:null===(l=window.MRM_Vars)||void 0===l?void 0:l.email_settings.reply_email,email_preview_text:"",body:"",json_body:"",make_transactional:!1}})})),"action"==t.type&&"sendMailNotification"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{notification_email:{subject:(0,d.__)("Welcome email from mint","mrm"),from_email:null===(c=window.MRM_Vars)||void 0===c?void 0:c.email_settings.from_email,from_name:null===(u=window.MRM_Vars)||void 0===u?void 0:u.email_settings.from_name,preview_text:"",body:"",json_body:"",recipients:[]}})})),"action"==t.type&&"addTag"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{tag_settings:{tags:[]}})})),"action"==t.type&&"removeTag"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{tag_settings:{tags:[]}})})),"action"==t.type&&"sequence"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{sequence_settings:{id:"",title:""}})})),"trigger"==t.type&&"wc_order_status_changed"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{status_settings:{status:""}})})),"trigger"==t.type&&"edd_update_payment_status"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{status_settings:{status:""}})})),"trigger"==t.type&&"edd_recurring_update_subscription"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{status_settings:{status:""}})})),"trigger"==t.type&&"mint_list_applied"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{list_applied:{group:[],type:"selected"}})})),"trigger"==t.type&&"mint_list_removed"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{list_removed:{group:[],type:"selected"}})})),"trigger"==t.type&&"mint_tag_applied"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{tag_applied:{group:[],type:"selected"}})})),"trigger"==t.type&&"mint_tag_removed"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{tag_removed:{group:[],type:"selected"}})})),"trigger"==t.type&&"mint_anniversary_reminder"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{anniversary:{attribute:{action:"",param:"",name:"",condition_label:"",condition_value:"",value:""},time_to_check:window.MRM_Vars.local_time}})})),"trigger"==t.type&&"tutor_enrol_status_change"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{status_settings:{status:""}})})),"trigger"==t.type&&"wp_post_publish"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{post_settings:{criteria:"any",lists:[],segments:[],tags:[],post_tags:[],post_categories:[],post_authors:[],post_types:[{label:"Posts",value:"post"}]}})})),"trigger"==t.type&&"bricks_form_submit"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{bricks_form_settings:{form_id:"",mapping:[],status:"subscribed"}})})),"trigger"==t.type&&"fluentform_submission_inserted"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{fluentform_settings:{form_id:"",mapping:[],status:"pending"}})})),"trigger"==t.type&&"fluentbooking_new_booking"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{fluentbooking_settings:{calenders:""}})})),"trigger"==t.type&&"fluentbooking_cancelled"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{fluentbooking_settings:{calenders:""}})})),"trigger"==t.type&&"fluentbooking_completed"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{fluentbooking_settings:{calenders:""}})})),"trigger"==t.type&&"fluentbooking_rescheduled"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{fluentbooking_settings:{calenders:""}})})),"trigger"==t.type&&"gform_after_submission"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{gform_settings:{form_id:"",mapping:[],status:"pending"}})})),"trigger"==t.type&&"jetform_after_submit"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{jetform_settings:{form_id:"",mapping:[],status:"pending"}})})),"trigger"==t.type&&"wpcf7_submit"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{contact_form_settings:{form_id:"",mapping:[],status:"pending"}})})),"trigger"==t.type&&"wpforms_submission_inserted"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{wpforms_settings:{form_id:"",mapping:[],status:"pending"}})})),"trigger"==t.type&&"mint_clicks_a_link"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{link_click_settings:{campaign:[],urls:[],reactivate:!1}})})),"trigger"===t.type&&G.includes(t.key)&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{product_settings:{option_type:"choose-all",products:[],category:[]}})})),"trigger"===t.type&&"wcs_subscription_status_changed"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{product_settings:{option_type:"choose-all",products:[],category:[],status_from:"wc-any",status_to:"wc-any"}})})),"trigger"!==t.type||"wcs_subscription_before_renewal"!==t.key&&"wcs_subscription_before_end"!==t.key||(p=st(st({},p),{},{settings:st(st({},p.settings),{},{product_settings:{option_type:"choose-all",products:[],category:[],time_to_check:window.MRM_Vars.local_time,days_before:7}})})),"trigger"===t.type&&"wcm_membership_status_changed"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{membership_settings:{status_from:"any",status_to:"any",plans:[]}})})),"action"==t.type&&"createUser"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{contact_status_settings:{status:""}})})),"action"==t.type&&"addNoteAndActivity"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{note_and_activity_settings:{note_type:"",note_title:"",note_description:""}})})),"action"==t.type&&"changeContactStatus"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{change_contact_status_settings:{status:""}})})),"action"==t.type&&"createWordPressUser"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{create_wordpress_user_settings:{role:"",custom_pass:"",custom_username:"",notification_mail:!1,auto_pass:!0}})})),"action"==t.type&&"updateWPUserMeta"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{update_settings:{meta_properties:[{metaKey:"",metaValue:""}]}})})),"action"==t.type&&"updateContactFields"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{update_contact_fields:{field_properties:[{key:"",value:""}],is_blank:!0}})})),"action"==t.type&&"changeUserRole"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{change_role_settings:{role:"",replace_user_role:!0}})})),"action"==t.type&&"addList"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{list_settings:{lists:[]}})})),"action"==t.type&&"removeList"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{list_settings:{lists:[]}})})),"action"==t.type&&"webHookOutgoing"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{message_data:{method:"post",remote_url:"",data_format:"json",body_request:"raw",body_request_data:[{body_key:"",body_value:""}],header_request:"no_header",header_request_data:[{header_key:"",header_value:""}]}})})),"logical"==t.type&&"condition"===t.key&&(p=st(st({},p),{},{settings:{rules:{condition:[[{action:"",param:"",name:"",condition_label:"",condition_value:"",value:"",segmentValue:[]}]]}}})),"action"==t.type&&"twilioSendMessage"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{twilio_data:{phone_number:"{{contact.phone_number}}",message_body:"",method:"sms",from_number:null===(m=window.MRM_Vars)||void 0===m||null===(m=m.twilio_settings)||void 0===m?void 0:m.from_number}})})),"action"==t.type&&"addOrderNote"===t.key&&(p=st(st({},p),{},{settings:st(st({},p.settings),{},{order_note:{body:"",type:"private"}})}));var b,M=(0,y.jsx)(x.A,{});"pro"!==t.package||window.MRM_Vars.is_mailmint_pro_license_active?("condition"===v?R(p):L(p),k(f.gl),_(void 0)):(C(),A(!0,M,null===(b=window)||void 0===b||null===(b=b.MRM_Vars)||void 0===b||null===(b=b.mint_trans)||void 0===b?void 0:b.UnlockWithPremium,(0,d.__)("Get Instant Access To Exclusive Features With The Pro Version.","mrm"),S.wp,""),_(void 0));var P=null!==(e=null==g?void 0:g.steps)&&void 0!==e?e:[],N=null==h||null===(n=h.anchor)||void 0===n?void 0:n.getAttribute("data-previous-step-id"),I=null==h||null===(r=h.anchor)||void 0===r?void 0:r.getAttribute("data-condition-type"),D=null==h||null===(o=h.anchor)||void 0===o?void 0:o.getAttribute("data-condition-step-id");if(""!==N){var V=P[parseInt(N)+1];if(w(V,parseInt(N)+1),null!==I){var T=P[parseInt(N)];if("condition"===T.key)if(null===D){var H=T.node_data[I][0];w(H,parseInt(N),I,0)}else{var F=T.node_data[I][parseInt(D)+1];w(F,parseInt(N),I,parseInt(D)+1)}}}else if("trigger"===t.type){var E=P[0];w(E,0)}else{var B=P[P.length-1];w(B,P.length-1)}"trigger"===t.type&&(j(t.key),z(null==t?void 0:t.title))}),[]),Q=(0,u.useRef)(null),tt=ct((0,u.useState)(!1),2),et=tt[0],nt=tt[1],rt=ct((0,u.useState)(0),2),it=rt[0],at=rt[1],lt=function(t){s(t);var e=Q.current;at(e.scrollLeft)},ut=function(){var t=Q.current,e=t.scrollLeft+=200;t.scrollLeft+=200,e>=0?document.querySelector(".left-arrow-container").classList.add("active"):document.querySelector(".left-arrow-container").classList.remove("active"),t.clientWidth+t.scrollLeft+200>=t.scrollWidth?document.querySelector(".right-arrow-container").classList.remove("active"):document.querySelector(".right-arrow-container").classList.add("active")},dt=function(){var t=Q.current,e=t.scrollLeft-=200;t.scrollLeft-=200,e>0?document.querySelector(".left-arrow-container").classList.add("active"):document.querySelector(".left-arrow-container").classList.remove("active"),document.querySelector(".right-arrow-container").classList.add("active")};(0,m.useEffect)((function(){var t=Q.current;if(t){var e=t.clientWidth;t.scrollWidth-e>0&&nt(!0)}}),[Q,it]),(0,m.useEffect)((function(){var t=Q.current;t&&(t.scrollLeft=it,t.offsetWidth===t.scrollWidth-it&&document.querySelector(".right-arrow-container").classList.remove("active"),it>0?document.querySelector(".left-arrow-container").classList.add("active"):document.querySelector(".left-arrow-container").classList.remove("active"))}),[a]);var mt,pt,ft,vt=function(){var t=Q.current,e=t.offsetWidth,n=t.scrollWidth;t.scrollLeft>0?document.querySelector(".left-arrow-container").classList.add("active"):document.querySelector(".left-arrow-container").classList.remove("active"),e===n-t.scrollLeft?document.querySelector(".right-arrow-container").classList.remove("active"):document.querySelector(".right-arrow-container").classList.add("active")};function yt(t){ft=!0,mt=t.pageX-Q.current.offsetLeft,pt=Q.current.scrollLeft}function gt(){ft=!1}function ht(){ft=!1}function bt(t){if(ft){t.preventDefault();var e=t.pageX-Q.current.offsetLeft-mt;Q.current.scrollLeft=pt-e}}var _t=(0,u.useMemo)((function(){var t=q.find((function(t){return"actions"===(null==t?void 0:t.type)})),e={mailmint:0,"mint-wordpress":0,"mint-woocommerce":0,"mint-woocommerce-subscription":0,"mint-woocommerce-membership":0,"mint-woocommerce-wishlist":0,edd:0,"mint-tutor-lms":0,"mint-fluent-form":0,"mint-fluent-booking":0,"mint-wp-forms":0,"mint-contact-form":0,"mint-learndash":0,"mint-memberpress":0,"mint-gravity-form":0,"mint-jet-form":0,"mint-twilio":0,"mint-send-data":0,"mint-lifterlms":0,"mint-bricks-form":0};return t&&null!=t&&t.items&&t.items.forEach((function(t){e.hasOwnProperty(t.category)&&e[t.category]++})),e}),[]);return(0,y.jsx)("div",{className:"block-editor-inserter__menu",children:(0,y.jsx)("div",{className:"block-editor-inserter__main-area",children:(0,y.jsxs)("div",{className:"block-editor-inserter__content",children:[(0,y.jsx)(r.SearchControl,{className:"block-editor-inserter__search",onChange:function(t){V&&T(null),E(t)},value:F,label:(0,d.__)("Search for automation steps","mrm"),placeholder:(0,d.__)("Search","mrm"),ref:W}),(0,y.jsx)("div",{className:"block-editor-inserter__block-list",children:(0,y.jsx)(N,{children:q.map((function(t){var e;return t.items.length>0&&(0,y.jsx)("div",{className:"".concat("logical"==t.type&&"condition"==v?"":t.type,"-group"),children:(0,y.jsxs)("div",{className:"block-editor-inserter__panel-content",children:[(0,y.jsx)("div",{className:"scrollbar-tab-container",children:("trigger"==t.type||"actions"==t.type)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"left-arrow-container",children:[(0,y.jsx)("span",{className:"right-arrow-gradient left-arrow-gradient"}),(0,y.jsx)("div",{className:"left-arrow",onClick:dt,children:(0,y.jsx)(M,{})})]}),(0,y.jsxs)("ul",{className:"trigger-tab-nav",ref:Q,onScroll:vt,onMouseDown:yt,onMouseUp:gt,onMouseLeave:ht,onMouseMove:bt,children:[("trigger"==t.type||0!=_t.mailmint)&&(0,y.jsx)("li",{className:"mailmint"===a?"active":"",onClick:function(){return lt("mailmint")},children:"Mail Mint"}),"trigger"!==t.type&&"condition"!==(null==h?void 0:h.type)&&(0,y.jsx)("li",{className:"logical"===a?"active":"",onClick:function(){return lt("logical")},children:"Condition"}),("trigger"==t.type||0!=_t["mint-wordpress"])&&(0,y.jsx)("li",{className:"mint-wordpress"===a?"active":"",onClick:function(){return lt("mint-wordpress")},children:"WordPress"}),window.MRM_Vars.is_wc_active&&("trigger"==t.type||0!=_t["mint-woocommerce"])&&(0,y.jsx)("li",{className:"mint-woocommerce"===a?"active":"",onClick:function(){return lt("mint-woocommerce")},children:"WooCommerce"}),window.MRM_Vars.is_wcs_active&&("trigger"==t.type||0!=_t["mint-woocommerce-subscription"])&&(0,y.jsx)("li",{className:"mint-woocommerce-subscription"===a?"active":"",onClick:function(){return lt("mint-woocommerce-subscription")},children:"WooCommerce Subscriptions"}),window.MRM_Vars.is_wcm_active&&("trigger"==t.type||0!=_t["mint-woocommerce-membership"])&&(0,y.jsx)("li",{className:"mint-woocommerce-membership"===a?"active":"",onClick:function(){return lt("mint-woocommerce-membership")},children:"WooCommerce Memberships"}),window.MRM_Vars.is_wcw_active&&("trigger"==t.type||0!=_t["mint-woocommerce-wishlist"])&&(0,y.jsx)("li",{className:"mint-woocommerce-wishlist"===a?"active":"",onClick:function(){return lt("mint-woocommerce-wishlist")},children:"WooCommerce Wishlists"}),window.MRM_Vars.is_edd_active&&("trigger"==t.type||0!=_t.edd)&&(0,y.jsx)("li",{className:"edd"===a?"active":"",onClick:function(){return lt("edd")},children:"Easy Digital Downloads"}),window.MRM_Vars.is_tutor_active&&("trigger"==t.type||0!=_t["mint-tutor-lms"])&&(0,y.jsx)("li",{className:"mint-tutor-lms"===a?"active":"",onClick:function(){return lt("mint-tutor-lms")},children:"Tutor LMS"}),window.MRM_Vars.is_gform_active&&("trigger"==t.type||0!=_t["mint-gravity-form"])&&(0,y.jsx)("li",{className:"mint-gravity-form"===a?"active":"",onClick:function(){return lt("mint-gravity-form")},children:"Gravity Form"}),window.MRM_Vars.is_jetform_active&&("trigger"==t.type||0!=_t["mint-jet-form"])&&(0,y.jsx)("li",{className:"mint-jet-form"===a?"active":"",onClick:function(){return lt("mint-jet-form")},children:"JetFormBuilder"}),window.MRM_Vars.is_fluentform_active&&("trigger"==t.type||0!=_t["mint-fluent-form"])&&(0,y.jsx)("li",{className:"mint-fluent-form"===a?"active":"",onClick:function(){return lt("mint-fluent-form")},children:"Fluent Forms"}),window.MRM_Vars.is_fluent_booking_active&&("trigger"==t.type||0!=_t["mint-fluent-booking"])&&(0,y.jsx)("li",{className:"mint-fluent-booking"===a?"active":"",onClick:function(){return lt("mint-fluent-booking")},children:"Fluent Booking"}),window.MRM_Vars.is_contact_form_active&&("trigger"==t.type||0!=_t["mint-contact-form"])&&(0,y.jsx)("li",{className:"mint-contact-form"===a?"active":"",onClick:function(){return lt("mint-contact-form")},children:"Contact Form 7"}),window.MRM_Vars.is_bricks_active&&("trigger"==t.type||0!=_t["mint-bricks-form"])&&(0,y.jsx)("li",{className:"mint-bricks-form"===a?"active":"",onClick:function(){return lt("mint-bricks-form")},children:"Bricks"}),window.MRM_Vars.is_learndash_active&&("trigger"==t.type||0!=_t["mint-learndash"])&&(0,y.jsx)("li",{className:"mint-learndash"===a?"active":"",onClick:function(){return lt("mint-learndash")},children:"LearnDash"}),window.MRM_Vars.is_memberpress_active&&("trigger"==t.type||0!=_t["mint-memberpress"])&&(0,y.jsx)("li",{className:"mint-memberpress"===a?"active":"",onClick:function(){return lt("mint-memberpress")},children:"MemberPress"}),window.MRM_Vars.is_wp_form_active&&("trigger"==t.type||0!=_t["mint-wp-forms"])&&(0,y.jsx)("li",{className:"mint-wp-forms"===a?"active":"",onClick:function(){return lt("mint-wp-forms")},children:"WPForms"}),(null===(e=window.MRM_Vars)||void 0===e||null===(e=e.twilio_settings)||void 0===e?void 0:e.is_integrated)&&0!=_t["mint-twilio"]&&(0,y.jsx)("li",{className:"mint-twilio"===a?"active":"",onClick:function(){return lt("mint-twilio")},children:"Twilio"}),"actions"==t.type&&0!=_t["mint-send-data"]&&(0,y.jsx)("li",{className:"mint-send-data"===a?"active":"",onClick:function(){return lt("mint-send-data")},children:"Send Data"}),window.MRM_Vars.is_lifterlms_active&&("trigger"==t.type||0!=_t["mint-lifterlms"])&&(0,y.jsx)("li",{className:"mint-lifterlms"===a?"active":"",onClick:function(){return lt("mint-lifterlms")},children:"LifterLMS"})]}),(0,y.jsxs)("div",{className:"right-arrow-container ".concat(et?"active":""),children:[(0,y.jsx)("span",{className:"right-arrow-gradient"}),(0,y.jsx)("div",{className:"right-arrow  arrow-active}",onClick:ut,children:(0,y.jsx)(P,{})})]})]})}),(0,y.jsx)(ot,{items:t.items,onHover:U,onSelect:function(t){return X(t)},label:t.label,activeCategory:a,type:v})]})},t.type)}))})})]})})})}));function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function pt(){var t,e,n=(0,m.useRef)(),o=(t=(0,m.useState)(!1),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return mt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s=(0,l.useSelect)((function(t){return{inserterPopover:t(f.Hz).getInserterPopover()}}),[]).inserterPopover,c=(0,l.useDispatch)(f.Hz).setInserterPopover,u=(0,m.useCallback)((function(t){a(!1)}),[]);return s?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(r.Popover,{className:"mintmrm-automaiton__block-popover",ref:n,anchorRect:s.anchor.getBoundingClientRect(),onClose:function(){i||c(void 0)},children:(0,y.jsx)(dt,{onInsert:u})})}):null}var ft=n(65170);function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){ht(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ht(t,e,n){return(e=function(t){var e=function(t){if("object"!=vt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bt(t){var e=t.onClick,n=t.previousStepId,o=t.condition,i=t.logicalStepId,a=(0,u.createContext)(r.__unstableUseCompositeState),s=(0,m.useContext)(a);return(0,y.jsx)(r.__unstableCompositeItem,gt(gt({},s()),{},{role:"treeitem",className:"mintmrm-automation__add-step-button",focusable:!0,"data-previous-step-id":n,"data-condition-type":o,"data-condition-step-id":i,onClick:function(t){t.stopPropagation();var n=t.target.closest("button");e(n)},children:(0,y.jsx)(ft.A,{})}))}const _t=(0,u.memo)((function(t){var e=t.previousStepId,n=(0,l.dispatch)(f.Hz).setInserterPopover;return(0,y.jsx)("div",{className:"mintmrm-automation-step__separator",children:(0,y.jsx)(bt,{onClick:function(t){return n({anchor:t,type:"steps"})},previousStepId:e})})}));var wt=n(34983);function jt(t){return t.icon}function xt(){return(0,y.jsx)("svg",{width:"14",height:"15",fill:"none",viewBox:"0 0 14 15",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("path",{stroke:"#A4A8B5",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7.09 6.34a1.061 1.061 0 00-.193 0 2.578 2.578 0 01-2.49-2.583c0-1.43 1.154-2.59 2.59-2.59A2.587 2.587 0 017.09 6.34zM4.176 9.368c-1.412.945-1.412 2.485 0 3.425 1.604 1.073 4.235 1.073 5.84 0 1.41-.945 1.41-2.486 0-3.425-1.6-1.067-4.23-1.067-5.84 0z"})})}function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){Ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ot(t,e,n){return(e=function(t){var e=function(t){if("object"!=St(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Pt=(0,u.memo)((function(t){var e,n=t.step,o=t.isSelected,i=t.stepIndex,a=t.condition,c=t.conditionIndex,p=(0,l.useSelect)((function(t){return{stepType:t(f.Hz).getStepType(n.key),error:t(f.Hz).getStepError(n.id),showAnalyticsStat:t(f.Hz).getAnalyticsStat()}}),[n]),v=p.stepType,g=(p.error,p.showAnalyticsStat),h=(0,u.createContext)(r.__unstableUseCompositeState),b=(0,m.useContext)(h),_=(0,l.useRegistry)().batch,w=(0,l.useDispatch)(f.Hz),j=w.openSidebar,x=w.selectStep,S=w.deleteStep,k=w.setMaybeSave,M=w.deleteConditionalStep;e=null!=a&&null!=c?"step-".concat(i,"-").concat(a,"-").concat(c):"step-".concat(i);var O=null!=v?v:function(t){var e="trigger"===t.type;return{title:e?(0,d.__)("Unknown trigger","mrm"):(0,d.__)("Unknown step","mrm"),subtitle:function(){return e?(0,d.__)("Trigger type not registered","mrm"):(0,d.__)("Step type not registered","mrm")},description:e?(0,d.__)("Unknown trigger","mrm"):(0,d.__)("Unknown step","mrm"),group:"trigger"===t.type?"trigger":"actions",key:t.key,foreground:"#8c8f94",background:"#dcdcde",edit:function(){return null},icon:function(){return jt}}}(n),P="Not set up yet."==O.subtitle(n)?"":"subtitle-changed";return(0,y.jsx)("div",{className:"mintmrm-automation__add-step-wrapper step-type-".concat(n.type),children:(0,y.jsxs)("div",{className:"step-btn-wrapper",children:[(0,m.createElement)(r.__unstableCompositeItem,Mt(Mt({},b()),{},{role:"treeitem",className:s()({"mintmrm-automation__editor-step":!0,"is-selected-step":o,"is-unknown-step":!v}),id:e,key:n.id,focusable:!0,onClick:function(){return _((function(){j(f.gl),x(n,i,a,c)}))}}),(0,y.jsx)("div",{className:"mintmrm-automation__editor-step-icon",children:(0,y.jsx)("span",{className:"".concat(O.key," icon"),children:O.icon()})}),(0,y.jsxs)("div",{className:"step-title-area",children:[(0,y.jsx)("label",{htmlFor:e,className:"mintmrm-automation__editor-step-title",children:"trigger"!==n.type?O.title:(0,d._x)("Trigger","noun","mrm")}),(0,y.jsx)("div",{className:"mintmrm-automation__editor-step-subtitle ".concat(P),children:"trigger"!==n.type?O.subtitle(n):O.title}),"trigger"==n.type&&(0,y.jsx)("div",{className:"mintmrm-automation__editor-step-trigger-subtitle ".concat(P),children:O.subtitle(n)})]}),g&&(0,y.jsxs)("div",{className:"step-stats",children:[(0,y.jsxs)("span",{className:"single-stats user",children:[(0,y.jsx)(xt,{}),null==n?void 0:n.enterance]}),(0,y.jsxs)("span",{className:"single-stats converion-rate",children:[!0===isNaN((null==n?void 0:n.completed)/(null==n?void 0:n.enterance)*100)?0:((null==n?void 0:n.completed)/(null==n?void 0:n.enterance)*100).toPrecision(3),"%"]})]})),(0,y.jsx)("div",{className:"mintmrm-automation__editor-step-delete",title:"Delete",onClick:function(){return function(t,e,n){null!=e&&null!=n?M(t,e,n):S(t),k(!1)}(i,a,c)},children:(0,y.jsx)(wt.A,{})})]})})})),Nt=(0,u.memo)((function(t){var e=t.previousStepId,n=t.condition,r=t.logicalStepId,o=(0,l.dispatch)(f.Hz).setInserterPopover;return(0,y.jsx)("div",{className:"mintmrm-automation-step__separator",children:(0,y.jsx)(bt,{onClick:function(t){return o({anchor:t,type:"condition"})},previousStepId:e,condition:n,logicalStepId:r})})})),Ct=(0,u.memo)((function(){return(0,y.jsx)("div",{className:"no-seperator"})})),At=(0,u.memo)((function(t){var e=t.stepIndex,n=t.step,r=(0,l.useSelect)((function(t){return{automationData:t(f.Hz).getAutomationData(),selectedStep:t(f.Hz).getSelectedStep(),dataLoader:t(f.Hz).getDataLoader(),updateClicked:t(f.Hz).getUpdateClicked()}}),[]),o=(r.automationData,r.selectedStep);return r.dataLoader,r.updateClicked,(0,y.jsxs)("div",{className:"logical-decision-box",children:[(0,y.jsx)("span",{className:"logical-text logical-no-text",children:(0,d.__)("No","mrm")}),(0,y.jsx)("span",{className:"logical-text logical-yes-text",children:(0,d.__)("Yes","mrm")}),(0,y.jsxs)("div",{className:"single-decision decision-no",children:[(0,y.jsx)(Nt,{previousStepId:e,condition:"no"}),n.node_data.no.length>0&&n.node_data.no.map((function(t,n){return(0,y.jsxs)(m.Fragment,{children:[(0,y.jsx)(Pt,{step:t,stepIndex:e,isSelected:o&&t.step_id===o.step_id,condition:"no",conditionIndex:n}),"stopAutomation"===t.key?(0,y.jsx)(Ct,{}):(0,y.jsx)(Nt,{previousStepId:e,condition:"no",logicalStepId:n})]},t.step_id)}))]}),(0,y.jsxs)("div",{className:"single-decision decision-yes",children:[(0,y.jsx)(Nt,{previousStepId:e,condition:"yes"}),n.node_data.yes.length>0&&n.node_data.yes.map((function(t,n){return(0,y.jsxs)(m.Fragment,{children:[(0,y.jsx)(Pt,{step:t,stepIndex:e,isSelected:o&&t.step_id===o.step_id,condition:"yes",conditionIndex:n}),"stopAutomation"===t.key?(0,y.jsx)(Ct,{}):(0,y.jsx)(Nt,{previousStepId:e,condition:"yes",logicalStepId:n})]},t.step_id)}))]})]})}));var zt=n(41509),It=n(19148),Lt=n(44231),Rt=n(78845),Dt=n(35321);function Vt(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ht(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||Ht(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){if(t){if("string"==typeof t)return Ft(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(t,e):void 0}}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Et=(0,u.memo)((function(){var t,e,n,r,o,i,a,s,c,p,v,g,h,b=window.MRM_Vars.open_ai_key,_=Tt((0,m.useState)(),2),w=_[0],j=_[1],x=Tt((0,m.useState)(),2),S=(x[0],x[1]),k=Tt((0,m.useState)(!1),2),M=k[0],O=k[1],P=Tt((0,m.useState)([]),2),N=P[0],C=P[1],A=Tt((0,m.useState)(),2),z=A[0],I=A[1],L=Tt((0,m.useState)(!1),2),R=L[0],D=L[1],V=Tt((0,m.useState)(!1),2),H=V[0],F=V[1],E=(0,l.useSelect)((function(t){return{selectedStepIndex:t(f.Hz).getSelectedStepIndex(),isShowAiModal:t(f.Hz).getOpenAIModal(),selectField:t(f.Hz).getOpenAIModalField(),selectedStep:t(f.Hz).getSelectedStep(),aiModalHeadingText:t(f.Hz).getOpenAIModalHeadingText(),promptType:t(f.Hz).getOpenAIModalPromptType(),selectedStepCondition:t(f.Hz).getSelectedStepCondition(),selectedLogicalStepIndex:t(f.Hz).getSelectedLogicalStepIndex()}}),[]),B=E.selectedStepIndex,U=E.isShowAiModal,W=E.selectField,G=(E.selectedStep,E.aiModalHeadingText),q=E.promptType,K=E.selectedStepCondition,J=E.selectedLogicalStepIndex,$=(0,l.useDispatch)(f.Hz).setOpenAIModal,Z=function(t){switch(t){case"general":O(!0);break;case"regenerate":D(!0);break;case"generate-more":F(!0)}var e={"Content-Type":"application/json",Authorization:"Bearer ".concat(null==b?void 0:b.secret_key)},n={messages:[{role:"system",content:"subject"===q?"Give me subject lines about "+w:"Give me email preview text about "+w+" within 1 sentence."}],max_tokens:1024,model:"gpt-3.5-turbo",temperature:.7,top_p:1,frequency_penalty:0,presence_penalty:0};fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:e,body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(e){if(e.error)I(e.error.message),O(!1),D(!1),F(!1);else{var n,r=e.choices[0].message.content.split("\n").filter((function(t){return""!==t.trim()}));n="generate-more"===t?[].concat(Vt(r),Vt(N)):r,C(n),O(!1),D(!1),F(!1),S(w)}})).catch((function(t){return console.error(t)}))};return(0,u.useEffect)((function(){document.querySelector(".interface-interface-skeleton__content").style.zIndex=U?"1":"0"}),[U]),(0,y.jsx)("div",{className:"mintmrm-template-modal mintmrm-openai-modal ".concat(U?"active":""),children:(0,y.jsxs)("div",{className:"template-modal-inner",children:[(0,y.jsx)("div",{className:"cross-icon",title:"Close",onClick:function(){return $(!1,""),C([]),j(""),void I("")},children:(0,y.jsx)(wt.A,{})}),(0,y.jsx)("div",{className:"template-modal-overflow",children:(0,y.jsxs)("div",{className:"template-modal-body ".concat(N.length>0?"get-result":""),children:[N.length>0?(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"openai-modal-header",children:[(0,y.jsx)(Lt.A,{}),(0,y.jsx)("h4",{children:G})]})}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"welcome-title",children:[(0,y.jsx)(Lt.A,{}),(0,y.jsx)("h2",{className:"title",children:G})]})}),(0,y.jsxs)("div",{className:"openai-input-wrapper",children:[(0,y.jsxs)("div",{className:"pos-relative",children:[!window.MRM_Vars.is_mailmint_pro_license_active&&(0,y.jsx)("span",{className:"pro-tag-with-icon",children:(0,y.jsx)(T.A,{})}),window.MRM_Vars.is_mailmint_pro_license_active?null!=b&&b.is_integrated?(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"form-group",children:["body"!==q&&(0,y.jsx)("label",{children:window.MRM_Vars.mint_trans.WhatIsThisEmailAbout}),(0,y.jsxs)("div",{className:"pos-relative",children:[(0,y.jsx)("input",{className:"openai-input",type:"text",value:w,placeholder:"e.g. 50% off for Christmas",onChange:function(t){j(t.target.value)},onKeyDown:function(t){return function(t){"Enter"===t.key&&Z("general")}(t)}}),(0,y.jsx)("span",{className:"generate-button",onClick:function(){return Z("general")},children:M?(0,y.jsxs)("span",{className:"dot-wrapper",children:[(0,y.jsx)("span",{className:"dot-one"}),(0,y.jsx)("span",{className:"dot-two"}),(0,y.jsx)("span",{className:"dot-three"})]}):(0,y.jsx)(Rt.A,{})})]})]})}):(0,y.jsx)("a",{href:"admin.php?page=mrm-admin#/integrations",target:"_blank",className:"mintmrm-btn",children:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.ConnectOpenAI}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"pos-relative",children:[(0,y.jsx)("input",{className:"openai-input disabled",type:"text",placeholder:"e.g. 50% off for Christmas",readOnly:!0}),(0,y.jsx)("span",{className:"generate-button disabled",children:(0,y.jsx)(Rt.A,{})})]})})]}),(0,y.jsx)("p",{className:z?"error-message show":"error-message",children:z})]}),N.length>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"action-btns",children:[R||H?(0,y.jsxs)("button",{type:"button",className:"regenerate disabled ".concat(R?"regenerating":""),children:[(0,y.jsx)("p",{className:"btn-tooltip",children:(0,d.__)("Regenerate the following suggestions and update the results","mrm")}),(0,y.jsx)(Dt.A,{}),null===(e=window.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.Regenerate]}):(0,y.jsxs)("button",{type:"button",className:"regenerate",onClick:function(){return Z("regenerate")},children:[(0,y.jsx)("p",{className:"btn-tooltip",children:null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.RegenerateTooltip}),(0,y.jsx)(Dt.A,{}),null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.Regenerate]}),R||H?(0,y.jsxs)("button",{type:"button",className:"disabled",children:[(0,y.jsx)("p",{className:"btn-tooltip",children:null===(o=window)||void 0===o||null===(o=o.MRM_Vars)||void 0===o||null===(o=o.mint_trans)||void 0===o?void 0:o.GenerateMoreTooltip}),(0,y.jsx)(zt.A,{}),H?null===(i=window)||void 0===i||null===(i=i.MRM_Vars)||void 0===i||null===(i=i.mint_trans)||void 0===i?void 0:i.Generating:null===(a=window)||void 0===a||null===(a=a.MRM_Vars)||void 0===a||null===(a=a.mint_trans)||void 0===a?void 0:a.GenerateMore]}):(0,y.jsxs)("button",{type:"button",onClick:function(){return Z("generate-more")},children:[(0,y.jsx)("p",{className:"btn-tooltip",children:null===(s=window)||void 0===s||null===(s=s.MRM_Vars)||void 0===s||null===(s=s.mint_trans)||void 0===s?void 0:s.GenerateMoreTooltip}),(0,y.jsx)(zt.A,{}),null===(c=window)||void 0===c||null===(c=c.MRM_Vars)||void 0===c||null===(c=c.mint_trans)||void 0===c?void 0:c.GenerateMore]}),R||H?(0,y.jsxs)("button",{type:"button",className:"disabled",children:[(0,y.jsx)("p",{className:"btn-tooltip",children:null===(p=window)||void 0===p||null===(p=p.MRM_Vars)||void 0===p||null===(p=p.mint_trans)||void 0===p?void 0:p.ClearPromptTooltip}),(0,y.jsx)(It.A,{}),null===(v=window)||void 0===v||null===(v=v.MRM_Vars)||void 0===v||null===(v=v.mint_trans)||void 0===v?void 0:v.ClearAll]}):(0,y.jsxs)("button",{type:"button",onClick:function(){C([]),j(""),I("")},children:[(0,y.jsx)("p",{className:"btn-tooltip",children:null===(g=window)||void 0===g||null===(g=g.MRM_Vars)||void 0===g||null===(g=g.mint_trans)||void 0===g?void 0:g.ClearPromptTooltip}),(0,y.jsx)(It.A,{}),null===(h=window)||void 0===h||null===(h=h.MRM_Vars)||void 0===h||null===(h=h.mint_trans)||void 0===h?void 0:h.ClearAll]})]}),(0,y.jsx)("ul",{className:"open-ai-results",children:N.map((function(t){return(0,y.jsxs)("li",{className:"single-result",children:[(0,y.jsx)("span",{className:"result-icon",children:(0,y.jsx)(Lt.A,{})}),(0,y.jsx)("span",{className:"result-text",children:t.replace(/^\d+\.\s+/,"")}),(0,y.jsx)("span",{className:"use-this-btn",onClick:function(e){var n,r;r=W,n=(n=t).replace(/^\d+\.\s/,""),"subject"===r&&(0,l.dispatch)(f.Hz).updateStepArgs(B,K,J,"message_data","subject",n),"preview"===r&&(0,l.dispatch)(f.Hz).updateStepArgs(B,K,J,"message_data","email_preview_text",n),"twilio_message_body"===r&&(0,l.dispatch)(f.Hz).updateStepArgs(B,K,J,"twilio_data","message_body",n),$(!1,""),C([]),j("")},children:(0,d.__)("use","mrm")})]},t)}))})]})]})})]})})}));var Bt=[{title:"Automation Overview",videoLink:"https://www.youtube.com/embed/3uCibk4eg_k"},{title:"WooCommerce Playlist",videoLink:"https://www.youtube.com/playlist?list=PLvw5RepmoKUv59D8bXnupazBJQlPuqFSp"}];const Ut=(0,u.memo)((function(){return(0,y.jsx)("svg",{width:"26",height:"26",fill:"none",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("path",{fill:"#02C4FB",stroke:"#02C4FB",strokeWidth:".8",d:"M24.63 12.002a17.953 17.953 0 01-4.14-2.845 54.986 54.986 0 001.414-7.33c.071-.576-.25-.762-.349-.805a.633.633 0 00-.759.252c-2.19 2.619-5.188 2.32-8.362 2.002-3.2-.32-6.5-.645-8.947 2.164a1.368 1.368 0 00-1.434-.462l-.055.015a1.367 1.367 0 00-.948 1.683L5.934 24.15a1.174 1.174 0 001.444.814l.427-.12h0a1.172 1.172 0 00.814-1.444l-1.512-5.413c2.202-2.832 5.272-2.532 8.52-2.208 3.243.324 6.594.659 9.055-2.285l.001-.002c.242-.3.342-.692.273-1.072a.588.588 0 00-.326-.42zM7.814 23.899a.369.369 0 01-.224.177l-.427.119a.373.373 0 01-.459-.259L1.821 6.461a.567.567 0 01.393-.698l.054-.015a.567.567 0 01.697.392l.044.156v0l2.501 8.95 2.339 8.37a.37.37 0 01-.035.284zm16.253-10.917c-2.189 2.619-5.188 2.32-8.361 2.002-3.162-.316-6.424-.642-8.862 2.062L4.658 9.227l-.825-2.955c2.202-2.832 5.272-2.525 8.522-2.2 3.085.308 6.271.627 8.694-1.884a53.576 53.576 0 01-1.332 6.761c-.08.288.01.596.233.794a19.1 19.1 0 004.23 2.933.598.598 0 01-.113.306z"})})})),Wt=(0,u.memo)((function(){return(0,y.jsx)("svg",{width:"14",height:"2",fill:"none",viewBox:"0 0 14 2",children:(0,y.jsx)("path",{stroke:"#A7A8B3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h12"})})})),Gt=(0,u.memo)((function(){return(0,y.jsx)("svg",{width:"14",height:"14",fill:"none",viewBox:"0 0 14 14",children:(0,y.jsx)("path",{stroke:"#A7A8B3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7.008 1v12M1 7h12"})})}));var qt=n(42017),Kt=n(29214),Jt=n(17091);function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function Zt(){var t=ne(),e=t.m(Zt),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,Yt(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(Zt=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new oe(t,e)},AsyncIterator:ee,async:function(t,e,n,o,a){return(r(e)?te:Qt)(i(t),e,n,o,a)},keys:Xt,values:Yt}})()}function Yt(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError($t(t)+" is not iterable")}function Xt(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Qt(t,e,n,r,o){var i=te(t,e,n,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function te(t,e,n,r,o){return new ee(ne().w(t,e,n,r),o||Promise)}function ee(t,e){function n(r,o,i,a){try{var s=t[r](o),l=s.value;return l instanceof oe?e.resolve(l.v).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(re(ee.prototype),re(ee.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),re(this,"_invoke",(function(t,o,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function ne(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return re(c,"_invoke",function(n,r,o){var i,s,l,c=0,u=o||[],d=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,s=0,l=t,m.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],p=m.p,f=i[2];n>3?(o=f===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,m.v=r,m.n=i[1]):p<f&&(o=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,m.n=f,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),s=u,l=f;(e=s<2?t:l)||!d;){i||(s?s<3?(s>1&&(m.n=-1),p(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((e=(d=m.n<0)?l:n.call(r,m))!==a)break}catch(e){i=t,s=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(re(e={},r,(function(){return this})),e),d=c.prototype=s.prototype=Object.create(u);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,re(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,re(d,"constructor",c),re(c,"constructor",l),l.displayName="GeneratorFunction",re(c,o,"GeneratorFunction"),re(d),re(d,o,"Generator"),re(d,r,(function(){return this})),re(d,"toString",(function(){return"[object Generator]"})),(ne=function(){return{w:i,m}})()}function re(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}re=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){re(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},re(t,e,n,r)}function oe(t,e){this.v=t,this.k=e}function ie(t,e,n,r,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function ae(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ie(i,r,o,a,s,"next",t)}function s(t){ie(i,r,o,a,s,"throw",t)}a(void 0)}))}}function se(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var le=(0,u.createContext)(r.__unstableUseCompositeState);const ce=(0,u.memo)((function(){var t,e,n,o=(0,l.useSelect)((function(t){return{automationData:t(f.Hz).getAutomationData(),selectedStep:t(f.Hz).getSelectedStep(),dataLoader:t(f.Hz).getDataLoader(),updateClicked:t(f.Hz).getUpdateClicked(),zoomLevel:t(f.Hz).getZoomLevel(),activeAutoSave:t(f.Hz).getActivateAutoSave(),ctaProModalDisplay:t(f.Hz).getCtaProModalDisplay(),ctaProModalIcon:t(f.Hz).getCtaProModalIcon(),ctaProModalTitle:t(f.Hz).getCtaProModalTitle(),ctaProModalText:t(f.Hz).getCtaProModalText(),ctaProModalLink:t(f.Hz).getCtaProModalLink(),ctaProModalFeature:t(f.Hz).getCtaProModalFeature()}}),[]),i=o.automationData,a=o.selectedStep,s=o.dataLoader,c=o.updateClicked,d=o.zoomLevel,g=o.activeAutoSave,h=o.ctaProModalDisplay,b=o.ctaProModalIcon,_=o.ctaProModalTitle,w=o.ctaProModalText,S=o.ctaProModalLink,k=o.ctaProModalFeature;(0,u.useEffect)((function(){document.querySelector(".popover-slot").style.zIndex="block"===h?"-1":"0"}),[h]);var M,O,P=(0,l.useDispatch)(),N=(0,m.useRef)(null),C=(M=(0,u.useState)(),O=2,function(t){if(Array.isArray(t))return t}(M)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(M,O)||function(t,e){if(t){if("string"==typeof t)return se(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(t,e):void 0}}(M,O)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=C[0],z=C[1],I=(0,l.useDispatch)(f.Hz),L=I.setAutomationAuthorID,R=I.setAutomationFullData,D=I.setDataLoader,V=I.setSaveLoader,T=I.setActivateAutoSave,H=I.setCtaProModal,F=I.setOnShowStat;(0,u.useEffect)((function(){var t=!0;L(window.MRM_Vars.current_userID);var e=window.location.hash,n="";if(e.includes("id=")&&(n=e.split("id=")[1]),z(n),n){var r=function(){var e=ae(Zt().mark((function e(){var r,o;return Zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g||D(!0),g&&V(!0),e.next=4,(0,p.qy)(n);case 4:r=e.sent,t&&200===r.code&&(o=r.data.data[0],R(o),D(!1),T(!1),V(!1),F(o.showAnalyticsStat));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r()}else if("#/preview"===e){var o=localStorage.getItem("mint-automation-preview");if(o){var i=JSON.parse(o);R(JSON.parse(i.automationData))}D(!1)}else D(!1);return function(){t=!1}}),[A,c]),(0,u.useEffect)((function(){localStorage.getItem("mint-automation-preview")||"#/preview"!==window.location.hash||window.location.replace("".concat(window.MRM_Vars.admin_url,"admin.php?page=mrm-admin#/automations/recipe"));var t=function(){localStorage.removeItem("mint-automation-preview")};return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t),t()}}),[]);var E=(0,r.__unstableUseCompositeState)({orientation:"vertical",wrap:"horizontal",shift:!0}),B=null!==(t=null==i?void 0:i.steps)&&void 0!==t?t:[];return x.A,(0,u.useCallback)(function(){var t=ae(Zt().mark((function t(e){return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:H(e,"");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[h]),(0,y.jsxs)(y.Fragment,{children:[s?(0,y.jsx)(qt.A,{type:"table-full-ten"}):(0,y.jsx)(le.Provider,{value:E,children:(0,y.jsxs)(r.__unstableComposite,{state:E,role:"tree","aria-label":null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.Automation,"aria-orientation":"vertical",className:"mintmrm-automation-step",children:[(0,y.jsxs)("div",{className:"mintmrm-automation-step__wrapper",ref:N,onWheel:function(t){var e;!(e=t).ctrlKey&&!e.metaKey||e.shiftKey||(e.cancelable&&e.preventDefault(),(e.deltaY<0?1.25:.8)<1?d>.5&&P(f.Hz).zoomOut():d<2&&P(f.Hz).zoomIn())},style:{transform:"scale(".concat(d.toFixed(1),")"),transformOrigin:"top center"},children:[(0,y.jsxs)(y.Fragment,{children:[B.length>0&&"trigger"!==B[0].type&&(0,y.jsxs)(m.Fragment,{children:[(0,y.jsx)(j,{step:v.pn}),(0,y.jsx)(_t,{previousStepId:""})]}),0===B.length?(0,y.jsx)(m.Fragment,{children:(0,y.jsx)(j,{step:v.pn})}):null==B?void 0:B.map((function(t,e){return"trigger"===t.type&&(0,y.jsxs)(m.Fragment,{children:[(0,y.jsx)(Pt,{step:t,stepIndex:e,isSelected:a&&t.step_id===a.step_id}),(0,y.jsx)(_t,{previousStepId:e})]},t.step_id)}))]}),0===B.length?(0,y.jsx)(m.Fragment,{}):B.map((function(t,e){return"action"===t.type?(0,y.jsxs)(m.Fragment,{children:[(0,y.jsx)(Pt,{step:t,stepIndex:e,isSelected:a&&t.step_id===a.step_id}),"stopAutomation"===t.key?(0,y.jsx)(Ct,{}):(0,y.jsx)(_t,{previousStepId:e})]},t.step_id):"logical"===t.type&&(0,y.jsxs)(m.Fragment,{children:[(0,y.jsx)(Pt,{step:t,stepIndex:e,isSelected:a&&t.step_id===a.step_id}),(0,y.jsx)(At,{stepIndex:e,step:t}),(0,y.jsx)(_t,{previousStepId:e})]},t.step_id)})),(0,y.jsx)("div",{className:"mintmrm-automation-step__end",children:(0,y.jsxs)("span",{className:"",children:[(0,y.jsx)(Ut,{}),null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.Exit]})})]}),(0,y.jsx)(Et,{}),h&&(0,y.jsx)("div",{className:"mintmrm-container",children:(0,y.jsx)(Jt.A,{icon:b,title:_,text:w,proLink:S,feature:k,setIsPro:H})}),(0,y.jsxs)("div",{className:"zooming-wrapper",children:[(0,y.jsx)("button",{className:"zoom-btn plus-btn",onClick:function(){d<2&&P(f.Hz).zoomIn()},children:(0,y.jsx)(Gt,{})}),(0,y.jsx)("button",{className:"zoom-btn minus-btn",onClick:function(){d>.5&&P(f.Hz).zoomOut()},children:(0,y.jsx)(Wt,{})})]}),(0,y.jsx)(pt,{})]})}),(0,y.jsx)(Kt.A,{showVideo:"true",videoLink:"https://www.youtube.com/embed/3uCibk4eg_k",docLink:"https://getwpfunnels.com/docs/mail-mint/automation/",automationEditor:!0,playLists:Bt})]})}));var ue=n(47767),de=n(84976),me=n(95919);function pe(){return(0,y.jsxs)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,y.jsx)("g",{clipPath:"url(#clip0_2082_9858)",children:(0,y.jsx)("path",{fill:"#A7A8B3",d:"M15.398 15.182a2.604 2.604 0 01-2.601-2.602V6.463c.143-3.452 5.061-3.45 5.203 0v6.117a2.604 2.604 0 01-2.602 2.602zm0-9.914c-.659 0-1.195.536-1.195 1.195v6.117c.066 1.586 2.326 1.585 2.39 0V6.463c0-.66-.535-1.195-1.195-1.195zM2.602 15.182A2.604 2.604 0 010 12.58v-1.898c.143-3.452 5.061-3.45 5.203 0v1.898a2.604 2.604 0 01-2.601 2.602zm0-5.696c-.66 0-1.196.537-1.196 1.196v1.898c.066 1.586 2.326 1.585 2.39 0v-1.898c0-.66-.535-1.196-1.194-1.196zM9 15.182a2.604 2.604 0 01-2.602-2.602V2.596c.144-3.452 5.062-3.45 5.204 0v9.984A2.604 2.604 0 019 15.182zM9 1.4c-.66 0-1.195.537-1.195 1.196v9.984c.066 1.586 2.325 1.585 2.39 0V2.596C10.195 1.936 9.66 1.4 9 1.4zm9 15.891a.703.703 0 00-.703-.703H.703c-.933.037-.932 1.37 0 1.406h16.594a.703.703 0 00.703-.703z"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"clip0_2082_9858",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h18v18H0z"})})})]})}const fe=(0,m.memo)(pe);var ve=n(29012),ye=n(41425),ge=n(76830),he=n(43469),be=n(29480),_e=n(1455),we=n.n(_e);function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function xe(){var t=Ne(),e=t.m(xe),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,Se(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(xe=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new Ae(t,e)},AsyncIterator:Pe,async:function(t,e,n,o,a){return(r(e)?Oe:Me)(i(t),e,n,o,a)},keys:ke,values:Se}})()}function Se(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(je(t)+" is not iterable")}function ke(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Me(t,e,n,r,o){var i=Oe(t,e,n,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Oe(t,e,n,r,o){return new Pe(Ne().w(t,e,n,r),o||Promise)}function Pe(t,e){function n(r,o,i,a){try{var s=t[r](o),l=s.value;return l instanceof Ae?e.resolve(l.v).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Ce(Pe.prototype),Ce(Pe.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Ce(this,"_invoke",(function(t,o,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function Ne(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Ce(c,"_invoke",function(n,r,o){var i,s,l,c=0,u=o||[],d=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,s=0,l=t,m.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],p=m.p,f=i[2];n>3?(o=f===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,m.v=r,m.n=i[1]):p<f&&(o=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,m.n=f,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),s=u,l=f;(e=s<2?t:l)||!d;){i||(s?s<3?(s>1&&(m.n=-1),p(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((e=(d=m.n<0)?l:n.call(r,m))!==a)break}catch(e){i=t,s=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Ce(e={},r,(function(){return this})),e),d=c.prototype=s.prototype=Object.create(u);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Ce(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,Ce(d,"constructor",c),Ce(c,"constructor",l),l.displayName="GeneratorFunction",Ce(c,o,"GeneratorFunction"),Ce(d),Ce(d,o,"Generator"),Ce(d,r,(function(){return this})),Ce(d,"toString",(function(){return"[object Generator]"})),(Ne=function(){return{w:i,m}})()}function Ce(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ce=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Ce(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},Ce(t,e,n,r)}function Ae(t,e){this.v=t,this.k=e}function ze(t,e,n,r,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function Ie(t){return Le.apply(this,arguments)}function Le(){return(t=xe().mark((function t(e){var n;return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="mrm/v1/automation/get-single-automation-recipe/".concat(e),t.abrupt("return",we()({path:n}).then((function(t){return t})).then((function(t){if(200==t.code)return t.data})));case 2:case"end":return t.stop()}}),t)})),Le=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ze(i,r,o,a,s,"next",t)}function s(t){ze(i,r,o,a,s,"throw",t)}a(void 0)}))}).apply(this,arguments);var t}var Re=function(){return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("svg",{fill:"none",width:"22",height:"22",viewBox:"0 0 22 22",xmlns:"http://www.w3.org/2000/svg",children:[(0,y.jsx)("circle",{cx:"11",cy:"11",r:"11",fill:"#2FCF5C"}),(0,y.jsx)("path",{fill:"#fff",d:"M15.209 9.236l-1.587.396-1.983-2.471a.926.926 0 00-1.445 0L8.21 9.63l-1.618-.395a.933.933 0 00-1.124 1.124l1.093 3.842a.618.618 0 00.617.451h7.412a.618.618 0 00.618-.45l1.1-3.843a.932.932 0 00-1.1-1.124zM5.172 8.57a.772.772 0 100-1.545.772.772 0 000 1.544zm11.427 0a.772.772 0 100-1.545.772.772 0 000 1.544zm-5.714-2.626a.772.772 0 100-1.544.772.772 0 000 1.544zm3.706 10.964H7.18a.618.618 0 010-1.236h7.411a.618.618 0 110 1.236z"})]})})};const De=(0,m.memo)(Re);function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function Te(){var t=We(),e=t.m(Te),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,He(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(Te=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new qe(t,e)},AsyncIterator:Ue,async:function(t,e,n,o,a){return(r(e)?Be:Ee)(i(t),e,n,o,a)},keys:Fe,values:He}})()}function He(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Ve(t)+" is not iterable")}function Fe(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ee(t,e,n,r,o){var i=Be(t,e,n,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Be(t,e,n,r,o){return new Ue(We().w(t,e,n,r),o||Promise)}function Ue(t,e){function n(r,o,i,a){try{var s=t[r](o),l=s.value;return l instanceof qe?e.resolve(l.v).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Ge(Ue.prototype),Ge(Ue.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Ge(this,"_invoke",(function(t,o,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function We(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Ge(c,"_invoke",function(n,r,o){var i,s,l,c=0,u=o||[],d=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,s=0,l=t,m.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],p=m.p,f=i[2];n>3?(o=f===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,m.v=r,m.n=i[1]):p<f&&(o=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,m.n=f,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),s=u,l=f;(e=s<2?t:l)||!d;){i||(s?s<3?(s>1&&(m.n=-1),p(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((e=(d=m.n<0)?l:n.call(r,m))!==a)break}catch(e){i=t,s=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Ge(e={},r,(function(){return this})),e),d=c.prototype=s.prototype=Object.create(u);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Ge(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,Ge(d,"constructor",c),Ge(c,"constructor",l),l.displayName="GeneratorFunction",Ge(c,o,"GeneratorFunction"),Ge(d),Ge(d,o,"Generator"),Ge(d,r,(function(){return this})),Ge(d,"toString",(function(){return"[object Generator]"})),(We=function(){return{w:i,m}})()}function Ge(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ge=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Ge(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},Ge(t,e,n,r)}function qe(t,e){this.v=t,this.k=e}function Ke(t,e,n,r,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function Je(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ke(i,r,o,a,s,"next",t)}function s(t){Ke(i,r,o,a,s,"throw",t)}a(void 0)}))}}function $e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ze(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Ye=(0,u.memo)((function(){var t,e,n,r,o,i,a,s,c,m,v,g,h,b,_,w,j,x,k,M,O,P,N=$e((0,u.useState)(!0),2),C=N[0],A=N[1],z=$e((0,u.useState)(!1),2),I=z[0],L=z[1],R=$e((0,u.useState)(!1),2),D=R[0],V=R[1],T=$e((0,u.useState)("success"),2),H=T[0],F=T[1],E=$e((0,u.useState)(""),2),B=E[0],U=E[1],W=$e((0,u.useState)(!1),2),G=W[0],q=W[1],K=$e((0,u.useState)(!1),2),J=K[0],$=K[1],Z=$e((0,u.useState)(!1),2),Y=Z[0],X=Z[1],Q=$e((0,u.useState)(!1),2),tt=Q[0],et=Q[1],nt=$e((0,u.useState)(""),2),rt=nt[0],ot=nt[1],it=$e((0,u.useState)(),2),at=it[0],st=it[1],lt=$e((0,u.useState)(!1),2),ct=lt[0],ut=lt[1],dt=(0,l.useSelect)((function(t){return{automationData:t(f.Hz).getAutomationData(),dataLoader:t(f.Hz).getDataLoader(),saveLoader:t(f.Hz).getSaveLoader(),is_save:t(f.Hz).getMaybeSave(),updateClicked:t(f.Hz).getUpdateClicked(),activateAutoSave:t(f.Hz).getActivateAutoSave(),automationName:t(f.Hz).getAutomationData().name,automationStatus:t(f.Hz).getAutomationData().status,atMostDate:t(f.Hz).getAtMostDate(),getAnalyticsStat:t(f.Hz).getAnalyticsStat()}}),[]),mt=dt.automationData,pt=dt.dataLoader,ft=dt.saveLoader,vt=dt.is_save,yt=dt.updateClicked,gt=(dt.activateAutoSave,dt.automationName),ht=dt.automationStatus,bt=(dt.atMostDate,dt.getAnalyticsStat),_t=(0,l.useDispatch)(f.Hz),wt=_t.setAutomationName,jt=_t.setAutomationStatus,xt=_t.setOnShowStat,St=_t.setMaybeSave,kt=_t.setUpdateClicked,Mt=_t.closeSidebar,Ot=_t.setSaveLoader,Pt=window.MRM_Vars.is_mailmint_pro_license_active;(0,ge.A)((function(t){vt||(t.preventDefault(),t.returnValue="")}));var Nt=(0,u.useRef)(null),Ct=(0,ue.Zp)();(0,u.useEffect)((function(){Nt.current&&Nt.current.focus()}),[C]);var At=function(){var t=Je(Te().mark((function t(e){var n,r,o;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(jt(e),St(!0),st(mt.id),Mt(),"active"===e?Ot(!0):ut(!0),mt.status=e,!mt.id){t.next=20;break}return t.next=9,(0,p.Z5)(mt,mt.id);case 9:n=t.sent,st(n.data.automation_id),F("success"),V(!0),Ot(!1),ut(!1),kt(!yt),xt(n.data.showAnalyticsStat),U("active"==e?null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.AutomationSavedMsg:n.message),t.next=31;break;case 20:return t.next=22,(0,p.Ch)(mt);case 22:o=t.sent,st(o.data.automation_id),F("success"),V(!0),U(o.message),Ot(!1),ut(!1),kt(!yt),xt(o.data.showAnalyticsStat);case 31:(0,he.bd)(!1,V);case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();(0,u.useEffect)((function(){if(at&&Ct("/id=".concat(at)),"#/preview"===window.location.hash){q(!0);var t=localStorage.getItem("mint-automation-preview");if(t){var e=JSON.parse(t);X(e.isPro),ot(e.automationDescription)}}else q(!1)}),[at]);var zt=(0,u.useRef)(null);(0,me.c7)(zt,L);var It=(0,u.useRef)(null);(0,me.A0)(It,A);var Lt=function(){var t=Je(Te().mark((function t(e){var n,r,o;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(jt(e),mt.status=e,!at){t.next=13;break}return t.next=5,(0,p.Z5)(mt,at);case 5:t.sent,F("success"),V(!0),U(null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.AutomationStatusUpdateMsg),Ot(!1),ut(!1),t.next=22;break;case 13:return t.next=15,(0,p.Ch)(mt);case 15:o=t.sent,st(o.data.automation_id),F("success"),V(!0),U(null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.AutomationStatusUpdateMsg),Ot(!1),ut(!1);case 22:(0,he.bd)(!1,V);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Rt=location.href,Dt=function(){var t=Je(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Pt||!Y){t.next=3;break}return et(!0),t.abrupt("return");case 3:$(!0),Ie(mt.id).then((function(t){null!=t&&t.automation_id&&(mt.id=null==t?void 0:t.automation_id,mt.steps=null==t?void 0:t.steps,window.location.replace("".concat(window.MRM_Vars.admin_url,"admin.php?page=mint-mail-automation-editor#/id=").concat(null==t?void 0:t.automation_id)),q(!1),$(!1))}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"automation-editor__header",children:pt?(0,y.jsx)(qt.A,{type:"table-full"}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"automation-editor__header-left",children:[(0,y.jsx)("button",{onClick:function(){G?window.location.replace("".concat(window.MRM_Vars.admin_url,"admin.php?page=mrm-admin#/automations/recipe")):window.location.replace("".concat(window.MRM_Vars.admin_url,"admin.php?page=mrm-admin#/automations"))},on:!0,type:"button",className:"backto-list",children:(0,y.jsx)(ve.A,{})}),(0,y.jsxs)("div",{ref:It,className:"automaiton-name",children:[(0,y.jsxs)("div",{className:"tilte-area ".concat(G?"mint-justify-content-start":""),children:[C?(0,y.jsx)("h4",{className:"title",children:gt||(null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.Untitled)}):(0,y.jsx)("input",{ref:Nt,type:"text",name:"automation-name",defaultValue:gt||(0,d.__)("Untitled","mrm"),onChange:function(t){wt(t.target.value)}}),!G&&(0,y.jsx)("div",{className:"edit-btn-area",children:C&&(0,y.jsx)("button",{type:"button",className:"edit",title:"Edit",onClick:function(){A(!1)},children:(0,y.jsx)(ye.A,{})})})]}),C&&(0,y.jsx)("div",{className:"automation-status",children:G?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("span",{className:"automation-description",children:rt})}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("span",{children:ht})})})]})]}),G?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"automation-editor__header-right",children:(0,y.jsxs)("button",{className:"mintmrm-btn",onClick:Dt,disabled:J,children:[J?null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.Importing:null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.ImportRecipe,J&&(0,y.jsx)("span",{className:"mintmrm-loader"}),Y&&!window.MRM_Vars.is_mailmint_pro_license_active&&(0,y.jsx)("span",{className:"pro-tag-with-icon",children:(0,y.jsx)(De,{})})]})})}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"automation-editor__header-right",children:[0==(null==mt||null===(r=mt.steps)||void 0===r?void 0:r.length)||(null==mt||null===(o=mt.steps)||void 0===o?void 0:o.length)>0&&""!==(null==mt?void 0:mt.trigger_name)?"":(0,y.jsx)("p",{className:"data-status autmation-issues",children:null===(i=window)||void 0===i||null===(i=i.MRM_Vars)||void 0===i||null===(i=i.mint_trans)||void 0===i?void 0:i.AutomationStartingMsg}),"draft"!==(null==mt?void 0:mt.status)&&null!=mt&&mt.id&&(null==mt||null===(a=mt.steps)||void 0===a?void 0:a.length)>0&&""!==(null==mt?void 0:mt.trigger_name)?(0,y.jsx)("div",{className:"mintmrm-btn automation-pause",children:(0,y.jsxs)("span",{className:"mintmrm-switcher",children:[(0,y.jsx)("input",{type:"checkbox",name:"pause",id:"automation-pause",onChange:function(t){t.target.checked?Lt("active"):Lt("pause")},checked:"active"===(null==mt?void 0:mt.status)}),(0,y.jsx)("label",{htmlFor:"automation-pause"}),"active"===(null==mt?void 0:mt.status)?null===(s=window)||void 0===s||null===(s=s.MRM_Vars)||void 0===s||null===(s=s.mint_trans)||void 0===s?void 0:s.Active:null===(c=window)||void 0===c||null===(c=c.MRM_Vars)||void 0===c||null===(c=c.mint_trans)||void 0===c?void 0:c.Paused]})}):"",(0,y.jsx)("div",{className:"mintmrm-btn view-analytics-stat",children:(0,y.jsxs)("span",{className:"mintmrm-switcher",children:[(0,y.jsx)("input",{type:"checkbox",name:"stat",id:"step-stat",checked:bt,onChange:function(t){return function(t){xt(t.target.checked)}(t)}}),(0,y.jsx)("label",{htmlFor:"step-stat"}),null===(m=window)||void 0===m||null===(m=m.MRM_Vars)||void 0===m||null===(m=m.mint_trans)||void 0===m?void 0:m.Stats]})}),"draft"!=ht&&void 0!==mt.id&&(0,y.jsxs)(de.N_,{to:{pathname:"/automations/analytics/".concat(mt.id),state:{url:Rt}},className:"mintmrm-btn view-analytics-btn",onClick:function(){location.state=Rt},children:[(0,y.jsx)(fe,{}),null===(v=window)||void 0===v||null===(v=v.MRM_Vars)||void 0===v||null===(v=v.mint_trans)||void 0===v?void 0:v.Report]}),(0,y.jsxs)("div",{className:"workflow-btn-wrapper ".concat((null==mt||null===(g=mt.steps)||void 0===g?void 0:g.length)>0&&""!==(null==mt?void 0:mt.trigger_name)?"has-dropdown":""),children:[(null==mt||null===(h=mt.steps)||void 0===h?void 0:h.length)>0&&""!==(null==mt?void 0:mt.trigger_name)?(0,y.jsxs)("button",{type:"button",className:"mintmrm-btn start-workflow",onClick:function(){return At("active")},disabled:!(!ft&&!ct),children:[!ct&&"active"!==ht&&(null===(b=window)||void 0===b||null===(b=b.MRM_Vars)||void 0===b||null===(b=b.mint_trans)||void 0===b?void 0:b.StartWorkflow),!ct&&"active"===ht&&""!=at&&(null===(_=window)||void 0===_||null===(_=_.MRM_Vars)||void 0===_||null===(_=_.mint_trans)||void 0===_?void 0:_.UpdateWorkflow),ct&&"active"!==ht&&(null===(w=window)||void 0===w||null===(w=w.MRM_Vars)||void 0===w||null===(w=w.mint_trans)||void 0===w?void 0:w.SavingAsDraft),ft&&(0,y.jsx)("span",{className:"mintmrm-loader"})]}):(0,y.jsx)("button",{type:"button",className:"mintmrm-btn start-workflow",disabled:!0,children:null===(j=window)||void 0===j||null===(j=j.MRM_Vars)||void 0===j||null===(j=j.mint_trans)||void 0===j?void 0:j.StartWorkflow}),(null==mt||null===(x=mt.steps)||void 0===x?void 0:x.length)>0&&""!==(null==mt?void 0:mt.trigger_name)&&(0,y.jsxs)("div",{className:"workflow-dropdown-btn",onClick:function(){return L(!I)},ref:zt,children:[(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)("svg",{width:"10",height:"6",fill:"none",viewBox:"0 0 10 6",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5L5 1 1 5"})})}),(0,y.jsxs)("ul",{className:"mintmrm-dropdown ".concat(I?"show":""),children:[(0,y.jsx)("li",{onClick:function(){return At("active")},children:(0,y.jsxs)("span",{children:[!ct&&"active"!==ht&&(null===(k=window)||void 0===k||null===(k=k.MRM_Vars)||void 0===k||null===(k=k.mint_trans)||void 0===k?void 0:k.StartWorkflow),!ct&&"active"===ht&&""!=at&&(null===(M=window)||void 0===M||null===(M=M.MRM_Vars)||void 0===M||null===(M=M.mint_trans)||void 0===M?void 0:M.UpdateWorkflow),ct&&"active"!==ht&&(null===(O=window)||void 0===O||null===(O=O.MRM_Vars)||void 0===O||null===(O=O.mint_trans)||void 0===O?void 0:O.SavingAsDraft)]})}),(0,y.jsx)("li",{onClick:function(){return At("draft")},children:(0,y.jsx)("span",{children:null===(P=window)||void 0===P||null===(P=P.MRM_Vars)||void 0===P||null===(P=P.mint_trans)||void 0===P?void 0:P.SaveAsDraft})})]})]})]}),D&&(0,y.jsx)(be.A,{setShowNotification:V,message:B,notificationType:H,setNotificationType:F})]})})]})}),tt&&(0,y.jsx)("div",{className:"mintmrm-container",children:(0,y.jsx)(Jt.A,{setIsPro:et,proLink:S._M})})]})}));function Xe(){var t=(0,l.useSelect)((function(t){return{isSidebarOpened:t(f.Hz).isSidebarOpened,selectedStep:t(f.Hz).getSelectedStep}})),e=t.isSidebarOpened,n=t.selectedStep,r=(0,l.useDispatch)(f.Hz),o=r.openSidebar,a=r.closeSidebar,s=r.toggleFeature,c=(0,l.useDispatch)(i.store).registerShortcut;return(0,u.useEffect)((function(){c({name:"mintmail/automation-editor/toggle-fullscreen",category:"global",description:(0,d.__)("Toggle fullscreen mode.","mrm"),keyCombination:{modifier:"secondary",character:"f"}}),c({name:"mintmail/automation-editor/toggle-sidebar",category:"global",description:(0,d.__)("Show or hide the settings sidebar.","mrm"),keyCombination:{modifier:"primaryShift",character:","}})}),[c]),(0,i.useShortcut)("mintmail/automation-editor/toggle-fullscreen",(function(){s("fullscreenMode")})),(0,i.useShortcut)("mintmail/automation-editor/toggle-sidebar",(function(t){if(t.preventDefault(),e())a();else{var r=n()?f.gl:f.Rs;o(r)}})),null}var Qe=n(5573);const tn=(0,m.createElement)(Qe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,m.createElement)(Qe.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));function en(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return nn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rn(){var t,e=en((0,m.useState)(!0),2),n=(e[0],e[1],en((0,m.useState)(!0),2));return n[0],n[1],(0,l.useSelect)((function(t){return{automationData:t(f.Hz).getAutomationData()}}),[]).automationData,(0,y.jsx)(r.PanelBody,{children:(0,y.jsx)("div",{className:"no-step-selected",children:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.NoStepSelected})})}function on(){var t,e,n=(0,l.useSelect)((function(t){return{selectedStep:t(f.Hz).getSelectedStep(),selectedStepType:t(f.Hz).getSelectedStepType()}}),[]),o=n.selectedStep,i=n.selectedStepType;if(!o)return(0,y.jsx)(r.PanelBody,{children:(0,y.jsx)("div",{className:"no-step-selected",children:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.NoStepSelected})});if(!i)return(0,y.jsx)(r.PanelBody,{children:(0,y.jsx)("div",{className:"no-step-selected",children:null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.UnknownStepType})});var a=i.edit;return(0,y.jsxs)("div",{className:"block-editor-block-inspector",children:[(0,y.jsx)(a,{},o.id),null!=i&&i.help?(0,y.jsx)(Kt.A,{showVideo:i.help.showVideo,videoLink:i.help.videoLink,docLink:i.help.docLink}):null]})}function an(t){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},an(t)}var sn=["className"];function ln(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ln(Object(n),!0).forEach((function(e){un(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function un(t,e,n){return(e=function(t){var e=function(t){if("object"!=an(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==an(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dn=u.Platform.select({web:!1,native:!1});function mn(t){var e,n=t.className,r=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,sn),a=(0,l.useSelect)((function(t){var e;return{keyboardShortcut:t(i.store).getShortcutRepresentation("mintmail/automation-editor/toggle-sidebar"),sidebarKey:null!==(e=t(o.M_).getActiveComplementaryArea(f.Hz))&&void 0!==e?e:f.Rs,selectedStep:t(f.Hz).getSelectedStep()}}),[]),s=(a.keyboardShortcut,a.sidebarKey),c=(a.showIconLabels,a.automationName,a.selectedStep);return(0,y.jsxs)(o.WK,cn(cn({identifier:s,panelClassName:n,closeLabel:(0,d.__)(" ","mrm"),headerClassName:"edit-site-sidebar__panel-tabs",title:null===(e=window)||void 0===e||null===(e=e.MRM_Vars)||void 0===e||null===(e=e.mint_trans)||void 0===e?void 0:e.Settings,icon:tn,className:"\n                    edit-site-sidebar mintmrm-automation-sidebar \n                    ".concat("sendMail"===(null==c?void 0:c.key)?"sent-mail-notification-step-sidebar":""," \n                    ").concat("condition"===(null==c?void 0:c.key)||"pabblyConnectSendData"===(null==c?void 0:c.key)?"conditional-step-sidebar":""," \n                    ").concat("mint_anniversary_reminder"===(null==c?void 0:c.key)?"anniversary-step-sidebar":""," \n                    ").concat("bricks_form_submit"===(null==c?void 0:c.key)||"fluentform_submission_inserted"===(null==c?void 0:c.key)||"jetform_after_submit"===(null==c?void 0:c.key)||"jetform_before_submit"===(null==c?void 0:c.key)||"wpcf7_submit"===(null==c?void 0:c.key)||"updateWPUserMeta"===(null==c?void 0:c.key)||"gform_after_submission"===(null==c?void 0:c.key)||"gform_send_email_failed"===(null==c?void 0:c.key)||"gform_after_email"===(null==c?void 0:c.key)||"addNoteAndActivity"===(null==c?void 0:c.key)||"wpforms_submission_inserted"===(null==c?void 0:c.key)?"bricks-step-sidebar":"","\n                    ").concat("webHookOutgoing"===(null==c?void 0:c.key)?"webhook-step-sidebar":"","\n                    ").concat("updateContactFields"===(null==c?void 0:c.key)?"update-fields-sidebar":"","\n                "),scope:f.Hz,isActiveByDefault:dn},r),{},{children:[s===f.Rs&&(0,y.jsx)(rn,{}),s===f.gl&&(0,y.jsx)(on,{})]}))}const pn=function(t){t.children,(0,c.G)("mrm-admin","automations");var e=(0,l.useSelect)((function(t){return{isSidebarOpened:t(f.Hz).isSidebarOpened(),dataLoader:t(f.Hz).getDataLoader()}}),[]),n=e.isSidebarOpened,a=(e.dataLoader,s()("interface-interface-skeleton mintmrm-automation-editor mintmrm-page",{"is-sidebar-opened":n,"show-icon-labels":!0}));return(0,y.jsx)(i.ShortcutProvider,{children:(0,y.jsxs)(r.SlotFillProvider,{children:[(0,y.jsx)(o.fA,{isActive:!1}),(0,y.jsx)(Xe,{}),(0,y.jsx)(mn,{}),(0,y.jsx)(o.Du,{className:a,header:(0,y.jsx)(Ye,{}),content:(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(ce,{})}),sidebar:(0,y.jsx)(o.WK.Slot,{scope:f.Hz})}),(0,y.jsx)(r.Popover.Slot,{})]})})}},34504:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(74848);function o(){return(0,r.jsxs)("svg",{width:"114",height:"96",fill:"none",viewBox:"0 0 114 96",children:[(0,r.jsx)("circle",{cx:"66",cy:"48",r:"48",fill:"#4CBB17",fillOpacity:".1"}),(0,r.jsx)("path",{fill:"#573BFF",fillRule:"evenodd",d:"M32 71.935C24.425 70.767 23.343 67.41 21.937 57c-.983 9.876-2.235 13.621-9.937 14.747 6.717 2.816 9.079 3.838 10.279 15.253C23.933 75.44 25.407 74.417 32 71.935z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"#4CBB17",fillRule:"evenodd",d:"M11.81 47.951c-4.474-.7-5.113-2.712-5.943-8.951-.58 5.92-1.32 8.164-5.867 8.839 3.967 1.687 5.361 2.3 6.069 9.142.977-6.93 1.848-7.542 5.74-9.03z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"#573BFF",fillRule:"evenodd",d:"M114 26.961c-4.545-.7-5.194-2.716-6.038-8.961-.59 5.926-1.341 8.173-5.962 8.848 4.03 1.69 5.447 2.303 6.167 9.152.993-6.936 1.877-7.55 5.833-9.039z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"#4CBB17",fillRule:"evenodd",d:"M108.809 74.951c-4.473-.7-5.112-2.712-5.942-8.951-.579 5.92-1.319 8.164-5.867 8.838 3.967 1.688 5.361 2.301 6.069 9.143.977-6.93 1.848-7.542 5.74-9.03z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"#4CBB17",d:"M71.917 41.583h-12.5v-4.166a6.257 6.257 0 016.25-6.25c2.913 0 5.628 2.014 6.316 4.685a2.084 2.084 0 104.034-1.037C74.852 30.287 70.5 27 65.667 27A10.43 10.43 0 0055.25 37.417v5.05A10.423 10.423 0 0049 52v6.25a10.43 10.43 0 0010.417 10.417h12.5A10.43 10.43 0 0082.333 58.25V52a10.43 10.43 0 00-10.416-10.417zm6.25 16.667a6.257 6.257 0 01-6.25 6.25h-12.5a6.257 6.257 0 01-6.25-6.25V52a6.257 6.257 0 016.25-6.25h12.5a6.257 6.257 0 016.25 6.25v6.25zM67.75 54.083v2.084a2.083 2.083 0 01-4.167 0v-2.084a2.083 2.083 0 014.167 0z"})]})}},17091:(t,e,n)=>{n.d(e,{A:()=>l});var r=n(51609),o=(n(34983),n(30365),n(34504)),i=(n(27723),n(78534)),a=n(74848);function s(t){var e=t.setIsPro,n=(void 0===(void 0===(void 0===(t.proLink,t.icon)&&o.A,t.title)&&window.MRM_Vars.mint_trans.UnlockWithPremium,t.feature,t.text)&&window.MRM_Vars.mint_trans.GetInstantAccessToExclusiveFeaturesWithTheProVersion,t.onProShow),r=t.emailBuilder,s=void 0!==r&&r;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.A,{setIsOpen:function(){s?n(!1):e(!1,"")}})})}const l=(0,r.memo)(s)},35699:(t,e,n)=>{function r(t,e){var n=document.querySelector("#adminmenu");Array.from(n.getElementsByClassName("current")).forEach((function(t){t.classList.remove("current")})),Array.from(n.querySelectorAll(".wp-has-current-submenu")).forEach((function(t){t.classList.remove("wp-has-current-submenu"),t.classList.remove("wp-menu-open"),t.classList.remove("selected"),t.classList.add("wp-not-current-submenu"),t.classList.add("menu-top")}));var r="/"===e?"admin.php?page=mrm-admin":"admin.php?page=mrm-admin#/"+e,o="/"===e?'li > a[href$="'.concat(r,'"], li > a[href*="').concat(r,'?"]'):'li > a[href*="'.concat(r,'"]'),i=n.querySelectorAll(o);if(Array.from(i).forEach((function(t){t.parentElement.classList.add("current")})),t){var a=n.querySelector("#toplevel_page_mrm-admin");a&&(a.classList.remove("wp-not-current-submenu"),a.classList.add("wp-has-current-submenu"),a.classList.add("wp-menu-open"),a.classList.add("current"))}document.querySelector("#wpwrap").classList.remove("wp-responsive-open")}n.d(e,{G:()=>r})}}]);
//# sourceMappingURL=automation-editor.min.js.map?ver=1758272915765001