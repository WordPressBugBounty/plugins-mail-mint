/*! For license information please see import-mailpoet-file.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_mmAdmin_webpackJsonp=globalThis.webpackChunk_mmAdmin_webpackJsonp||[]).push([[5755],{2116:(t,e,n)=>{n.d(e,{A:()=>f});var r=n(1609),o=n(5795),i=n(9870),a=n(5919),s=n(4848);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t){var e=t.options,n=c((0,r.useState)(""),2),u=n[0],l=n[1],f=c((0,r.useState)(""),2),d=f[0],m=f[1],p=c((0,r.useState)(!1),2),h=p[0],v=p[1],y=c((0,r.useState)({top:0,left:0,width:0}),2),b=y[0],x=y[1],w=(0,r.useRef)(null),j=(0,r.useRef)(null);(0,a.Yo)(w,v,j);var g=(0,r.useMemo)((function(){return u?e.filter((function(t){return t.title.toLowerCase().includes(u.toLocaleLowerCase())})):e}),[u,e]);return(0,r.useEffect)((function(){null!=t&&t.emailField&&(m(g[0].title),t.handleSelect(g[0].id,g[0].title,t.field_value))}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{ref:w,className:"dropdown-container",onClick:function(t){return function(){if(!h&&w.current){var t=w.current.getBoundingClientRect();x({top:t.bottom+window.scrollY,left:t.left+window.scrollX,width:t.width})}v(!h)}()},children:[(0,s.jsx)("button",{type:"button",className:h?"drop-down-button show":"drop-down-button",children:d||"Do not import this field"}),h&&(0,o.createPortal)((0,s.jsxs)("ul",{ref:j,className:h?"import-map mintmrm-dropdown show":"import-map mintmrm-dropdown",style:{position:"absolute",top:b.top,left:b.left,width:b.width,zIndex:1e3,background:"white",border:"1px solid #ccc",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,s.jsx)("li",{className:"searchbar",children:(0,s.jsxs)("span",{className:"pos-relative",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("input",{type:"search",name:"column-search",placeholder:"Find or Choose",value:u,onChange:function(t){return l(t.target.value)}})]})}),(0,s.jsx)("li",{className:"list-title",children:"Choose Field"}),(0,s.jsx)("div",{className:"option-section",children:(null==g?void 0:g.length)>0&&g.map((function(e,n){return(0,s.jsx)("li",{className:"single-column",onClick:function(){return function(e,n,r){m(n),v(!1),t.handleSelect(e,n,r)}(e.id,e.title,t.field_value)},children:(0,s.jsx)("div",{className:"mintmrm-checkbox",children:(0,s.jsx)("label",{className:"mrm-custom-select-label",children:e.title})})},n)}))}),0==(null==g?void 0:g.length)?(0,s.jsx)("div",{className:"no-item-found",children:"No field found"}):null]}),document.body)]})})}const f=(0,r.memo)(l)},2343:(t,e,n)=>{n.r(e),n.d(e,{default:()=>P}),n(1455),n(7723);var r=n(1609),o=n(7767),i=n(2930),a=n(5125),s=n(3469),c=n(8306),u=n(5919),l=n(2017),f=n(2116),d=n(2092),m=n(4101),p=n(4020),h=n(4848);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function y(){var t=S(),e=t.m(y),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,b(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(y=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new N(t,e)},AsyncIterator:g,async:function(t,e,n,o,a){return(r(e)?j:w)(i(t),e,n,o,a)},keys:x,values:b}})()}function b(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(v(t)+" is not iterable")}function x(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function w(t,e,n,r,o){var i=j(t,e,n,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function j(t,e,n,r,o){return new g(S().w(t,e,n,r),o||Promise)}function g(t,e){function n(r,o,i,a){try{var s=t[r](o),c=s.value;return c instanceof N?e.resolve(c.v).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(c).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(_(g.prototype),_(g.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),_(this,"_invoke",(function(t,o,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function S(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return _(u,"_invoke",function(n,r,o){var i,s,c,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return i=e,s=0,c=t,d.n=n,a}};function m(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,i=l[e],m=d.p,p=i[2];n>3?(o=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=m&&((o=n<2&&m<i[1])?(s=0,d.v=r,d.n=i[1]):m<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,s=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,p),s=l,c=p;(e=s<2?t:c)||!f;){i||(s?s<3?(s>1&&(d.n=-1),m(s,c)):d.n=c:d.v=c);try{if(u=2,i){if(s||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((e=(f=d.n<0)?c:n.call(r,d))!==a)break}catch(e){i=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,i),!0),u}var a={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(_(e={},r,(function(){return this})),e),f=u.prototype=s.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,_(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,_(f,"constructor",u),_(u,"constructor",c),c.displayName="GeneratorFunction",_(u,o,"GeneratorFunction"),_(f),_(f,o,"Generator"),_(f,r,(function(){return this})),_(f,"toString",(function(){return"[object Generator]"})),(S=function(){return{w:i,m:d}})()}function _(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}_=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){_(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},_(t,e,n,r)}function N(t,e){this.v=t,this.k=e}function M(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function k(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){M(i,r,o,a,s,"next",t)}function s(t){M(i,r,o,a,s,"throw",t)}a(void 0)}))}}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||O(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t){return function(t){if(Array.isArray(t))return R(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){if(t){if("string"==typeof t)return R(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var C=[].concat(T(window.MRM_Vars.contacts_map_attrs),[{name:"Status",slug:"status"}]),I=function(){(0,i.A)("mrm-admin","contacts"),(0,a.A)(window.MRM_Vars.mint_trans.ImportContactPageTitle);var t=(0,o.Zp)(),e=A((0,r.useState)(!1),2),n=e[0],v=e[1],b=A((0,r.useState)(!1),2),x=b[0],w=b[1],j=A((0,r.useState)(window.MRM_Vars.mint_trans.Importing),2),g=j[0],S=j[1],_=A((0,r.useState)([]),2),N=_[0],M=_[1],O=A((0,r.useState)(""),2),R=O[0],I=O[1],P=A((0,r.useState)("success"),2),V=P[0],F=P[1],E=A((0,r.useState)(!1),2),L=E[0],G=E[1],D=A((0,r.useState)("pending"),2),U=D[0],Y=D[1],J=A((0,r.useState)(!1),2),Z=J[0],$=J[1],z=A((0,r.useState)(!1),2),B=z[0],W=z[1],X=A((0,r.useState)(!1),2),q=X[0],H=X[1],K=A((0,r.useState)([]),2),Q=K[0],tt=K[1],et=A((0,r.useState)([]),2),nt=et[0],rt=et[1],ot=A((0,r.useState)(!0),2),it=ot[0],at=ot[1],st=(0,r.useRef)(null),ct=(0,r.useRef)(null),ut=(0,r.useRef)(null),lt=A((0,r.useState)(0),2),ft=lt[0],dt=lt[1],mt=A((0,r.useState)(!1),2),pt=mt[0],ht=mt[1],vt=A((0,r.useState)(!1),2),yt=vt[0],bt=vt[1],xt=A((0,r.useState)(!0),2),wt=xt[0],jt=xt[1],gt=A((0,r.useState)(0),2),St=gt[0],_t=gt[1],Nt=A((0,r.useState)([]),2),Mt=Nt[0],kt=Nt[1],At=C;(0,u.c7)(st,$),(0,u.c7)(ct,W),(0,u.c7)(ut,H);var Tt=function(){var e=k(y().mark((function e(){var n,r,o,i,a,c,u,l,f,m,p,h,b,x;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!0),w(!0),(n={map:N}).status=U,n.lists=Q,n.tags=nt,n.created_by="".concat(window.MRM_Vars.current_userID),n.optin_confirmation=pt,n.skip_existing=yt,n.automation_control=wt,n.offset=0,r=0,o=0,i=0,a=0,u=0;case 13:if(!(u<St)){e.next=29;break}return e.next=17,(0,d.ZT)(n,"mrm/v1/contacts/import/mailpoet");case 17:if(c=e.sent,200===(null===(l=c)||void 0===l?void 0:l.code)){e.next=20;break}return e.abrupt("break",29);case 20:dt((u+1)/St*100),n.offset=null===(f=c)||void 0===f||null===(f=f.data)||void 0===f?void 0:f.offset,r+=null===(m=c)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.total,o+=null===(p=c)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.imported,i+=null===(h=c)||void 0===h||null===(h=h.data)||void 0===h?void 0:h.skipped,a+=null===(b=c)||void 0===b||null===(b=b.data)||void 0===b?void 0:b.existing_contacts;case 26:u++,e.next=13;break;case 29:if(200!=c.code){e.next=36;break}return S("Imported"),e.next=33,new Promise((function(t){return setTimeout(t,1e3)}));case 33:t("/contacts/import/confirmation",{state:{total:r,imported:o,skipped:i,existing_contacts:a,source:"mailpoet"}}),e.next=40;break;case 36:F("warning"),G(!0),I(null===(x=c)||void 0===x?void 0:x.message),w(!1);case 40:v(!1),(0,s.bd)(!1,G);case 42:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ot=(0,r.useCallback)((function(t,e,n){var r=t,o=N.findIndex((function(t){return t.source===n}));M("no_import"!==r?-1!==o?function(t){return[].concat(T(t.slice(0,o)),[{source:n,target:r}],T(t.slice(o+1)))}:function(t){return[].concat(T(t),[{source:n,target:r}])}:function(t){return t.filter((function(t){return t.source!==n}))})}),[N]),Rt=At.map((function(t){return{title:t.name,id:t.slug}}));return Rt.push({title:"Do not import this field",id:"no_import"}),(0,r.useEffect)((function(){var t=function(){var t=k(y().mark((function t(){var e,n,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.DM)();case 2:r=t.sent,_t(null==r||null===(e=r.data)||void 0===e?void 0:e.total_batch),kt(null==r||null===(n=r.data)||void 0===n?void 0:n.headers),at(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(p.A,{showNotification:L,setShowNotification:G,notificationType:V,setNotificationType:F,message:R,docLink:"https://getwpfunnels.com/docs/mail-mint-contacts/",showVideo:!0,videoLink:"https://www.youtube.com/embed/lWSavlC4dFc",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h3",{children:window.MRM_Vars.mint_trans.importMailPoet}),(0,h.jsx)("span",{className:"csv-title",children:window.MRM_Vars.mint_trans.importMailPoetCSVTitle}),it?(0,h.jsx)(l.A,{type:"table"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("form",{className:"select-field-form",action:"",children:[(0,h.jsx)("div",{className:"select-field-table",children:(0,h.jsxs)("table",{children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsxs)("th",{children:[window.MRM_Vars.mint_trans.CustomerDataToImport,(0,h.jsxs)("span",{className:"mintmrm-tooltip",children:[(0,h.jsx)(c.A,{}),(0,h.jsx)("p",{children:window.MRM_Vars.mint_trans.importMailPoetTooltip})]})]}),(0,h.jsxs)("th",{children:[window.MRM_Vars.mint_trans.MapTo,(0,h.jsxs)("span",{className:"mintmrm-tooltip",children:[(0,h.jsx)(c.A,{}),(0,h.jsx)("p",{children:window.MRM_Vars.mint_trans.MapToTooltipTitle})]})]})]})}),(0,h.jsxs)("tbody",{children:[Object.entries(Mt).map((function(t,e){var n=A(t,2),r=n[0],o=n[1];if(r.match(new RegExp("mail|@","i")))return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:o}),(0,h.jsx)("td",{children:(0,h.jsx)("div",{className:"form-group map-dropdown",children:(0,h.jsx)(f.A,{emailField:!0,handleSelect:Ot,field_value:r,options:Rt})})})]},e)})),Object.entries(Mt).map((function(t,e){var n=A(t,2),r=n[0],o=n[1];if(!r.match(new RegExp("mail|@","i")))return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:o}),(0,h.jsx)("td",{children:(0,h.jsx)("div",{className:"form-group map-dropdown",children:(0,h.jsx)(f.A,{handleSelect:Ot,field_value:r,options:Rt})})})]},e)}))]})]})}),(0,h.jsx)("hr",{}),(0,h.jsx)(m.A,{isActiveStatus:Z,setIsActiveStatus:$,selectedStatus:U,setSelectedStatus:Y,isActiveTag:q,setIsActiveTag:H,isActiveList:B,setIsActiveList:W,selectedLists:Q,setSelectedLists:tt,selectedTags:nt,setSelectedTags:rt,automationControl:wt,setAutomationControl:jt,updateOptin:pt,setUpdateOptin:ht,skipExisting:yt,setSkipExisting:bt,statusMenuRef:st,listMenuRef:ct,tagMenuRef:ut})]}),(0,h.jsxs)("div",{className:x?"import-button loader-section":"import-button",children:[(0,h.jsxs)("div",{className:"progress-bar-wrapper",children:[(0,h.jsx)("span",{className:"progress-bar-title",children:g}),(0,h.jsx)("div",{className:"progress-bar",children:(0,h.jsx)("div",{className:"progress-percentage",style:{width:ft.toPrecision(3)+"%"}})}),(0,h.jsxs)("span",{className:"percentage-rate",children:[ft.toPrecision(3)," %"]})]}),(0,h.jsxs)("div",{className:"import-button-wrapper",children:[!St>0&&(0,h.jsxs)("span",{className:"no-data-text",children:["***"," ",window.MRM_Vars.mint_trans.noCustomerText]}),(0,h.jsx)("button",{className:"contact-cancel mintmrm-btn outline",onClick:function(){t("/contacts")},children:window.MRM_Vars.mint_trans.Cancel}),(0,h.jsxs)("button",{className:"import-confirm-button mintmrm-btn",onClick:function(){return Tt()},disabled:!!(n||!St>0),children:[window.MRM_Vars.mint_trans.Import,n&&(0,h.jsx)("span",{className:"mintmrm-loader",style:{display:"block"}})]})]})]})]})]})})})};const P=(0,r.memo)(I)}}]);
//# sourceMappingURL=import-mailpoet-file.min.js.map?ver=1754365239513000