/*! For license information please see select-field-map.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_mmAdmin_webpackJsonp=globalThis.webpackChunk_mmAdmin_webpackJsonp||[]).push([[2425],{2116:(t,e,n)=>{n.d(e,{A:()=>f});var r=n(1609),o=n(5795),i=n(9870),a=n(5919),s=n(4848);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t){var e=t.options,n=c((0,r.useState)(""),2),u=n[0],l=n[1],f=c((0,r.useState)(""),2),d=f[0],m=f[1],p=c((0,r.useState)(!1),2),h=p[0],v=p[1],y=c((0,r.useState)({top:0,left:0,width:0}),2),b=y[0],x=y[1],j=(0,r.useRef)(null),w=(0,r.useRef)(null);(0,a.Yo)(j,v,w);var g=(0,r.useMemo)((function(){return u?e.filter((function(t){return t.title.toLowerCase().includes(u.toLocaleLowerCase())})):e}),[u,e]);return(0,r.useEffect)((function(){null!=t&&t.emailField&&(m(g[0].title),t.handleSelect(g[0].id,g[0].title,t.field_value))}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{ref:j,className:"dropdown-container",onClick:function(t){return function(){if(!h&&j.current){var t=j.current.getBoundingClientRect();x({top:t.bottom+window.scrollY,left:t.left+window.scrollX,width:t.width})}v(!h)}()},children:[(0,s.jsx)("button",{type:"button",className:h?"drop-down-button show":"drop-down-button",children:d||"Do not import this field"}),h&&(0,o.createPortal)((0,s.jsxs)("ul",{ref:w,className:h?"import-map mintmrm-dropdown show":"import-map mintmrm-dropdown",style:{position:"absolute",top:b.top,left:b.left,width:b.width,zIndex:1e3,background:"white",border:"1px solid #ccc",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,s.jsx)("li",{className:"searchbar",children:(0,s.jsxs)("span",{className:"pos-relative",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("input",{type:"search",name:"column-search",placeholder:"Find or Choose",value:u,onChange:function(t){return l(t.target.value)}})]})}),(0,s.jsx)("li",{className:"list-title",children:"Choose Field"}),(0,s.jsx)("div",{className:"option-section",children:(null==g?void 0:g.length)>0&&g.map((function(e,n){return(0,s.jsx)("li",{className:"single-column",onClick:function(){return function(e,n,r){m(n),v(!1),t.handleSelect(e,n,r)}(e.id,e.title,t.field_value)},children:(0,s.jsx)("div",{className:"mintmrm-checkbox",children:(0,s.jsx)("label",{className:"mrm-custom-select-label",children:e.title})})},n)}))}),0==(null==g?void 0:g.length)?(0,s.jsx)("div",{className:"no-item-found",children:"No field found"}):null]}),document.body)]})})}const f=(0,r.memo)(l)},4704:(t,e,n)=>{n.r(e),n.d(e,{default:()=>M});var r=n(7723),o=n(1609),i=n(7767),a=n(4976),s=n(2092),c=n(1931),u=n(9711),l=n(3469),f=n(8306),d=n(4020),m=n(4101),p=n(5919),h=n(2017),v=n(2116),y=n(4848);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function x(t){return function(t){if(Array.isArray(t))return F(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||I(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(){var t=k(),e=t.m(j),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,w(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(j=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new T(t,e)},AsyncIterator:N,async:function(t,e,n,o,a){return(r(e)?_:S)(i(t),e,n,o,a)},keys:g,values:w}})()}function w(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(b(t)+" is not iterable")}function g(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function S(t,e,n,r,o){var i=_(t,e,n,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function _(t,e,n,r,o){return new N(k().w(t,e,n,r),o||Promise)}function N(t,e){function n(r,o,i,a){try{var s=t[r](o),c=s.value;return c instanceof T?e.resolve(c.v).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(c).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(A(N.prototype),A(N.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),A(this,"_invoke",(function(t,o,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function k(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return A(u,"_invoke",function(n,r,o){var i,s,c,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return i=e,s=0,c=t,d.n=n,a}};function m(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,i=l[e],m=d.p,p=i[2];n>3?(o=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=m&&((o=n<2&&m<i[1])?(s=0,d.v=r,d.n=i[1]):m<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,s=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,p),s=l,c=p;(e=s<2?t:c)||!f;){i||(s?s<3?(s>1&&(d.n=-1),m(s,c)):d.n=c:d.v=c);try{if(u=2,i){if(s||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((e=(f=d.n<0)?c:n.call(r,d))!==a)break}catch(e){i=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,i),!0),u}var a={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(A(e={},r,(function(){return this})),e),f=u.prototype=s.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,A(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,A(f,"constructor",u),A(u,"constructor",c),c.displayName="GeneratorFunction",A(u,o,"GeneratorFunction"),A(f),A(f,o,"Generator"),A(f,r,(function(){return this})),A(f,"toString",(function(){return"[object Generator]"})),(k=function(){return{w:i,m:d}})()}function A(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}A=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){A(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},A(t,e,n,r)}function T(t,e){this.v=t,this.k=e}function C(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||I(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){if(t){if("string"==typeof t)return F(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function M(){var t=(0,i.zy)(),e=(0,i.Zp)(),n=O((0,o.useState)(!1),2),b=n[0],w=n[1],g=O((0,o.useState)([]),2),S=g[0],_=g[1],N=O((0,o.useState)([]),2),k=(N[0],N[1]),A=O((0,o.useState)([]),2),T=(A[0],A[1]),I=O((0,o.useState)(""),2),F=I[0],M=I[1],E=O((0,o.useState)("success"),2),P=E[0],L=E[1],R=O((0,o.useState)(!1),2),D=R[0],G=R[1],V=O((0,o.useState)("pending"),2),Y=V[0],U=V[1],z=O((0,o.useState)(!1),2),H=z[0],J=z[1],Z=O((0,o.useState)(!1),2),$=Z[0],B=Z[1],Q=O((0,o.useState)(!1),2),W=Q[0],X=Q[1],q=O((0,o.useState)([]),2),K=q[0],tt=q[1],et=O((0,o.useState)([]),2),nt=et[0],rt=et[1],ot=O((0,o.useState)(!0),2),it=ot[0],at=ot[1],st=O((0,o.useState)(!1),2),ct=st[0],ut=st[1],lt=O((0,o.useState)("Importing"),2),ft=lt[0],dt=lt[1],mt=(0,o.useRef)(null),pt=(0,o.useRef)(null),ht=(0,o.useRef)(null),vt=O((0,o.useState)(0),2),yt=vt[0],bt=vt[1],xt=O((0,o.useState)(!1),2),jt=xt[0],wt=xt[1],gt=O((0,o.useState)(!1),2),St=gt[0],_t=gt[1],Nt=O((0,o.useState)(!0),2),kt=Nt[0],At=Nt[1];(0,p.c7)(mt,J),(0,p.c7)(pt,B),(0,p.c7)(ht,X);var Tt=t.state,Ct=t.pathname.replace("/map","");if(!Tt)return(0,y.jsx)(i.C5,{to:Ct});var Ot=Tt.data,It=Ot.fields,Ft=Ot.headers,Mt=Ot.per_batch,Et=Ot.total_batch,Pt=Ot.all_data,Lt=Ot.key,Rt=Ot.list_id,Dt=Tt.type;(0,o.useEffect)((function(){var t=setTimeout((function(){at(!1)}),1e3);return function(){return clearTimeout(t)}}),[]),(0,o.useEffect)((function(){var t=!0;return(0,c.Mr)().then((function(e){t&&e.data.map((function(){k(e.data)}))})),(0,u.Q2)().then((function(e){t&&T(e.data)})),function(){t=!1}}),[]);var Gt=function(){var t,n=(t=j().mark((function t(){var n,r,o,i,a,c,u,f,d,m,p,h,v,y,b,x,g;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(!0),ut(!0),r={map:S},"csv"==Dt?r.file=null==Tt||null===(o=Tt.data)||void 0===o?void 0:o.file:"raw"==Dt&&(r.raw=null==Tt||null===(i=Tt.data)||void 0===i?void 0:i.raw),r.delimiter=null==Tt||null===(n=Tt.data)||void 0===n?void 0:n.delimiter,r.status=Y,r.lists=K,r.tags=nt,r.created_by="".concat(window.MRM_Vars.current_userID),r.total_batch=Et,r.per_batch=Mt,r.headers=Ft,r.optin_confirmation=jt,r.skip_existing=St,r.automation_control=kt,t.prev=15,f=0,d=(u=0)+Mt,m=0,p=0,h=0,v=0,y=0;case 19:if(!(y<Et)){t.next=40;break}return"csv"==Dt?r.data=Pt.slice(u,d):"raw"==Dt?r.raw=Tt.data.raw.slice(u,d):"mailchimp"==Dt&&(r.offset=f,r.key=Lt,r.list_id=Rt),r.start=u,r.end=d,x="mrm/v1".concat(Ct),t.next=26,(0,s.ZT)(r,x);case 26:if(c=t.sent,"failed"!==(null===(b=c)||void 0===b?void 0:b.status)){t.next=29;break}return t.abrupt("break",40);case 29:bt((y+1)/Et*100),u=d,d+=Mt,f+=Mt,m+=c.data.total,p+=c.data.imported,h+=c.data.skipped,v+=c.data.existing_contacts;case 37:y++,t.next=19;break;case 40:if("success"!==(null===(a=c)||void 0===a?void 0:a.status)){t.next=47;break}return dt("Imported"),t.next=44,new Promise((function(t){return setTimeout(t,1e3)}));case 44:e("/contacts/import/confirmation",{state:{total:m,imported:p,skipped:h,existing_contacts:v,source:"csv"}}),t.next=51;break;case 47:L("warning"),G(!0),M(null===(g=c)||void 0===g?void 0:g.message),ut(!1);case 51:w(!1),(0,l.bd)(!1,G),t.next=58;break;case 55:t.prev=55,t.t0=t.catch(15),w(!1);case 58:case"end":return t.stop()}}),t,null,[[15,55]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){C(i,r,o,a,s,"next",t)}function s(t){C(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(){return n.apply(this,arguments)}}(),Vt=It.map((function(t){return{title:t.name,id:t.slug}}));Vt.push({title:"Do not import this field",id:"no_import"});var Yt=(0,o.useCallback)((function(t,e,n){var r=t,o=S.findIndex((function(t){return t.source===n}));_("no_import"!==r?-1!==o?function(t){return[].concat(x(t.slice(0,o)),[{source:n,target:r}],x(t.slice(o+1)))}:function(t){return[].concat(x(t),[{source:n,target:r}])}:function(t){return t.filter((function(t){return t.source!==n}))})}),[S]),Ut=!window.location.toString().includes("mailchimp");return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.A,{showNotification:D,setShowNotification:G,notificationType:P,setNotificationType:L,message:F,showVideo:Ut,docLink:"https://getwpfunnels.com/docs/mail-mint-contacts/",videoLink:"https://www.youtube.com/embed/lWSavlC4dFc",children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("h3",{children:(0,r.__)("Map ".concat("csv"===Dt?"CSV":"Your","  Data To Contact Fields"),"mrm")}),(0,y.jsx)("span",{className:"csv-title",children:(0,r.__)("Map out the data you ".concat("csv"===Dt?"uploaded":"submitted"," to suitable fields for your contacts."))}),it?(0,y.jsx)(h.A,{type:"table"}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("form",{className:"select-field-form",action:"",children:[(0,y.jsx)("div",{className:"select-field-table",children:(0,y.jsxs)("table",{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsxs)("th",{children:["csv"==Dt?"CSV Data Headers":"Data Headers",(0,y.jsxs)("span",{className:"mintmrm-tooltip",children:[(0,y.jsx)(f.A,{}),(0,y.jsx)("p",{children:"csv"==Dt?(0,r.__)("These are the field headers of the data you uploaded.","mrm"):"raw"==Dt?(0,r.__)("These are the headers of the data you submitted.","mrm"):"learnDash"===Dt?(0,r.__)("These are fields from your LearnDash contact list.","mrm"):"tutorLMS"===Dt?(0,r.__)("These are fields from your TutorLMS contact list.","mrm"):(0,r.__)("These are fields from your MailChimp contact list.","mrm")})]})]}),(0,y.jsxs)("th",{children:[(0,r.__)("Map To","mrm"),"csv"==Dt?(0,y.jsxs)("span",{className:"mintmrm-tooltip",children:[(0,y.jsx)(f.A,{}),(0,y.jsx)("p",{children:(0,r.__)("Choose from the existing fields you have for your contacts to map the uploaded data to.","mrm")})]}):null]})]})}),(0,y.jsxs)("tbody",{children:[Ft.map((function(t,e){if(t.match(new RegExp("mail|@","i")))return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:t}),(0,y.jsx)("td",{children:(0,y.jsx)("div",{className:"form-group map-dropdown",children:(0,y.jsx)(v.A,{emailField:!0,handleSelect:Yt,field_value:t,options:Vt})})})]},e)})),Ft.map((function(t,e){if(!t.match(new RegExp("mail|@","i")))return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:t}),(0,y.jsx)("td",{children:(0,y.jsx)("div",{className:"form-group map-dropdown",children:(0,y.jsx)(v.A,{handleSelect:Yt,field_value:t,options:Vt})})})]},e)}))]})]})}),(0,y.jsx)("hr",{}),(0,y.jsx)(m.A,{isActiveStatus:H,setIsActiveStatus:J,selectedStatus:Y,setSelectedStatus:U,isActiveTag:W,setIsActiveTag:X,isActiveList:$,setIsActiveList:B,selectedLists:K,setSelectedLists:tt,selectedTags:nt,setSelectedTags:rt,automationControl:kt,setAutomationControl:At,updateOptin:jt,setUpdateOptin:wt,skipExisting:St,setSkipExisting:_t,statusMenuRef:mt,listMenuRef:pt,tagMenuRef:ht})]}),(0,y.jsxs)("div",{className:"import-button ".concat(ct?"loader-section":""),children:[(0,y.jsxs)("div",{className:"progress-bar-wrapper",children:[(0,y.jsx)("span",{className:"progress-bar-title",children:ft}),(0,y.jsx)("div",{className:"progress-bar",children:(0,y.jsx)("div",{className:"progress-percentage",style:{width:yt.toPrecision(3)+"%"}})}),(0,y.jsxs)("span",{className:"percentage-rate",children:[yt.toPrecision(3)," %"]})]}),(0,y.jsxs)("div",{className:"import-button-wrapper",children:[(0,y.jsx)(a.N_,{to:Ct,children:(0,y.jsx)("button",{className:"mintmrm-btn outline cancel-btn",children:(0,r.__)("Cancel","mrm")})}),(0,y.jsxs)("button",{className:"import-confirm-button mintmrm-btn",onClick:function(){return Gt()},disabled:!!b,children:[(0,r.__)("Import","mrm"),b&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("span",{className:"mintmrm-loader",style:{display:"block"}})})]})]})]})]})]})})})}}}]);
//# sourceMappingURL=select-field-map.min.js.map?ver=1750931396707000