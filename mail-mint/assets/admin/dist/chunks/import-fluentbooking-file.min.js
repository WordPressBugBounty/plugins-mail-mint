/*! For license information please see import-fluentbooking-file.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_mmAdmin_webpackJsonp=globalThis.webpackChunk_mmAdmin_webpackJsonp||[]).push([[9039],{2116:(t,e,n)=>{n.d(e,{A:()=>d});var r=n(1609),o=n(5795),i=n(9870),a=n(5919),s=n(4848);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function u(t){var e=t.options,n=c((0,r.useState)(""),2),l=n[0],u=n[1],d=c((0,r.useState)(""),2),f=d[0],m=d[1],p=c((0,r.useState)(!1),2),h=p[0],v=p[1],y=c((0,r.useState)({top:0,left:0,width:0}),2),b=y[0],x=y[1],w=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,a.Yo)(w,v,g);var j=(0,r.useMemo)((function(){return l?e.filter((function(t){return t.title.toLowerCase().includes(l.toLocaleLowerCase())})):e}),[l,e]);return(0,r.useEffect)((function(){null!=t&&t.emailField&&(m(j[0].title),t.handleSelect(j[0].id,j[0].title,t.field_value))}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{ref:w,className:"dropdown-container",onClick:function(t){return function(){if(!h&&w.current){var t=w.current.getBoundingClientRect();x({top:t.bottom+window.scrollY,left:t.left+window.scrollX,width:t.width})}v(!h)}()},children:[(0,s.jsx)("button",{type:"button",className:h?"drop-down-button show":"drop-down-button",children:f||"Do not import this field"}),h&&(0,o.createPortal)((0,s.jsxs)("ul",{ref:g,className:h?"import-map mintmrm-dropdown show":"import-map mintmrm-dropdown",style:{position:"absolute",top:b.top,left:b.left,width:b.width,zIndex:1e3,background:"white",border:"1px solid #ccc",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,s.jsx)("li",{className:"searchbar",children:(0,s.jsxs)("span",{className:"pos-relative",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("input",{type:"search",name:"column-search",placeholder:"Find or Choose",value:l,onChange:function(t){return u(t.target.value)}})]})}),(0,s.jsx)("li",{className:"list-title",children:"Choose Field"}),(0,s.jsx)("div",{className:"option-section",children:(null==j?void 0:j.length)>0&&j.map((function(e,n){return(0,s.jsx)("li",{className:"single-column",onClick:function(){return function(e,n,r){m(n),v(!1),t.handleSelect(e,n,r)}(e.id,e.title,t.field_value)},children:(0,s.jsx)("div",{className:"mintmrm-checkbox",children:(0,s.jsx)("label",{className:"mrm-custom-select-label",children:e.title})})},n)}))}),0==(null==j?void 0:j.length)?(0,s.jsx)("div",{className:"no-item-found",children:"No field found"}):null]}),document.body)]})})}const d=(0,r.memo)(u)},2131:(t,e,n)=>{n.r(e),n.d(e,{default:()=>O}),n(1455),n(7723);var r=n(1609),o=n(7767),i=n(2930),a=n(5125),s=n(3469),c=n(8306),l=n(5919),u=n(2017),d=n(2116),f=n(2092),m=n(4101),p=n(4020),h=n(4848);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function y(t){return function(t){if(Array.isArray(t))return R(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||T(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(){var t=_(),e=t.m(b),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,x(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(b=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new k(t,e)},AsyncIterator:S,async:function(t,e,n,o,a){return(r(e)?j:g)(i(t),e,n,o,a)},keys:w,values:x}})()}function x(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(v(t)+" is not iterable")}function w(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function g(t,e,n,r,o){var i=j(t,e,n,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function j(t,e,n,r,o){return new S(_().w(t,e,n,r),o||Promise)}function S(t,e){function n(r,o,i,a){try{var s=t[r](o),c=s.value;return c instanceof k?e.resolve(c.v).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(c).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(N(S.prototype),N(S.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),N(this,"_invoke",(function(t,o,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function _(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return N(l,"_invoke",function(n,r,o){var i,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return i=e,s=0,c=t,f.n=n,a}};function m(n,r){for(s=n,c=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,i=u[e],m=f.p,p=i[2];n>3?(o=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=m&&((o=n<2&&m<i[1])?(s=0,f.v=r,f.n=i[1]):m<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),s=u,c=p;(e=s<2?t:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),m(s,c)):f.n=c:f.v=c);try{if(l=2,i){if(s||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((e=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(e){i=t,s=1,c=e}finally{l=1}}return{value:e,done:d}}}(n,o,i),!0),l}var a={};function s(){}function c(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(N(e={},r,(function(){return this})),e),d=l.prototype=s.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,N(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=l,N(d,"constructor",l),N(l,"constructor",c),c.displayName="GeneratorFunction",N(l,o,"GeneratorFunction"),N(d),N(d,o,"Generator"),N(d,r,(function(){return this})),N(d,"toString",(function(){return"[object Generator]"})),(_=function(){return{w:i,m:f}})()}function N(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}N=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){N(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},N(t,e,n,r)}function k(t,e){this.v=t,this.k=e}function A(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||T(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){if(t){if("string"==typeof t)return R(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function O(){(0,i.A)("mrm-admin","contacts"),(0,a.A)(window.MRM_Vars.mint_trans.ImportContactPageTitle);var t=(0,o.Zp)(),e=M((0,r.useState)(!1),2),n=e[0],v=e[1],x=M((0,r.useState)(!1),2),w=x[0],g=x[1],j=M((0,r.useState)(window.MRM_Vars.mint_trans.Importing),2),S=j[0],_=j[1],N=M((0,r.useState)([]),2),k=N[0],T=N[1],R=M((0,r.useState)(""),2),O=R[0],C=R[1],I=M((0,r.useState)("success"),2),F=I[0],V=I[1],P=M((0,r.useState)(!1),2),E=P[0],L=P[1],G=M((0,r.useState)("pending"),2),B=G[0],D=G[1],U=M((0,r.useState)(!1),2),Y=U[0],J=U[1],Z=M((0,r.useState)(!1),2),$=Z[0],z=Z[1],W=M((0,r.useState)(!1),2),X=W[0],q=W[1],H=M((0,r.useState)([]),2),K=H[0],Q=H[1],tt=M((0,r.useState)([]),2),et=tt[0],nt=tt[1],rt=M((0,r.useState)(!0),2),ot=rt[0],it=rt[1],at=(0,r.useRef)(null),st=(0,r.useRef)(null),ct=(0,r.useRef)(null),lt=M((0,r.useState)(0),2),ut=lt[0],dt=lt[1],ft=M((0,r.useState)(!1),2),mt=ft[0],pt=ft[1],ht=M((0,r.useState)(!1),2),vt=ht[0],yt=ht[1],bt=M((0,r.useState)(!0),2),xt=bt[0],wt=bt[1],gt=M((0,r.useState)(0),2),jt=gt[0],St=gt[1],_t=M((0,r.useState)([]),2),Nt=_t[0],kt=_t[1],At=window.MRM_Vars.contacts_map_attrs;(0,l.c7)(at,J),(0,l.c7)(st,z),(0,l.c7)(ct,q);var Mt=function(){var e,n=(e=b().mark((function e(){var n,r,o,i,a,c,l,u,d,m,p,h,y,x,w;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!0),g(!0),(r={map:k}).status=B,r.lists=K,r.tags=et,r.created_by="".concat(window.MRM_Vars.current_userID),r.optin_confirmation=mt,r.skip_existing=vt,r.automation_control=xt,r.offset=0,o=0,i=0,a=0,c=0,u=0;case 13:if(!(u<jt)){e.next=29;break}return e.next=17,(0,f.ZT)(r,"mrm/v1/contacts/import/native/fluentbooking");case 17:if(l=e.sent,"success"===(null===(d=l)||void 0===d?void 0:d.status)){e.next=20;break}return e.abrupt("break",29);case 20:dt((u+1)/jt*100),r.offset=null===(m=l)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.offset,o+=null===(p=l)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.total,i+=null===(h=l)||void 0===h||null===(h=h.data)||void 0===h?void 0:h.imported,a+=null===(y=l)||void 0===y||null===(y=y.data)||void 0===y?void 0:y.skipped,c+=null===(x=l)||void 0===x||null===(x=x.data)||void 0===x?void 0:x.existing_contacts;case 26:u++,e.next=13;break;case 29:if("success"!=(null===(n=l)||void 0===n?void 0:n.status)){e.next=36;break}return _("Imported"),e.next=33,new Promise((function(t){return setTimeout(t,1e3)}));case 33:t("/contacts/import/confirmation",{state:{total:o,imported:i,skipped:a,existing_contacts:c,source:"fluentbooking"}}),e.next=40;break;case 36:V("warning"),L(!0),C(null===(w=l)||void 0===w?void 0:w.message),g(!1);case 40:v(!1),(0,s.bd)(!1,L);case 42:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){A(i,r,o,a,s,"next",t)}function s(t){A(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(){return n.apply(this,arguments)}}(),Tt=(0,r.useCallback)((function(t,e,n){var r=t,o=k.findIndex((function(t){return t.source===n}));T("no_import"!==r?-1!==o?function(t){return[].concat(y(t.slice(0,o)),[{source:n,target:r}],y(t.slice(o+1)))}:function(t){return[].concat(y(t),[{source:n,target:r}])}:function(t){return t.filter((function(t){return t.source!==n}))})}),[k]),Rt=At.map((function(t){return{title:t.name,id:t.slug}}));return Rt.push({title:"Do not import this field",id:"no_import"}),(0,r.useEffect)((function(){(0,f.P6)().then((function(t){St(null==t?void 0:t.total_batch),kt(null==t?void 0:t.headers),it(!1)}))}),[]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(p.A,{showNotification:E,setShowNotification:L,notificationType:F,setNotificationType:V,message:O,docLink:"https://getwpfunnels.com/docs/mail-mint-contacts/",showVideo:!0,videoLink:"https://www.youtube.com/embed/lWSavlC4dFc",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h3",{children:window.MRM_Vars.mint_trans.importFluentBooking}),(0,h.jsx)("span",{className:"csv-title",children:window.MRM_Vars.mint_trans.importFluentBookingCSVTitle}),ot?(0,h.jsx)(u.A,{type:"table"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("form",{className:"select-field-form",action:"",children:[(0,h.jsx)("div",{className:"select-field-table",children:(0,h.jsxs)("table",{children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsxs)("th",{children:[window.MRM_Vars.mint_trans.CustomerDataToImport,(0,h.jsxs)("span",{className:"mintmrm-tooltip",children:[(0,h.jsx)(c.A,{}),(0,h.jsx)("p",{children:window.MRM_Vars.mint_trans.importFluentBookingTooltip})]})]}),(0,h.jsxs)("th",{children:[window.MRM_Vars.mint_trans.MapTo,(0,h.jsxs)("span",{className:"mintmrm-tooltip",children:[(0,h.jsx)(c.A,{}),(0,h.jsx)("p",{children:window.MRM_Vars.mint_trans.MapToTooltipTitle})]})]})]})}),(0,h.jsx)("tbody",{children:0===jt?(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:"2",className:"no-data-message",children:(0,h.jsx)("div",{className:"no-data-message-wrapper",children:(0,h.jsx)("h4",{className:"no-data-message-heading",children:window.MRM_Vars.mint_trans.NoDataFound})})})}):(0,h.jsxs)(h.Fragment,{children:[Nt.map((function(t,e){if(t.match(new RegExp("mail|@","i")))return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:t}),(0,h.jsx)("td",{children:(0,h.jsx)("div",{className:"form-group map-dropdown",children:(0,h.jsx)(d.A,{emailField:!0,handleSelect:Tt,field_value:t,options:Rt})})})]},e)})),Nt.map((function(t,e){if(!t.match(new RegExp("mail|@","i")))return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:t}),(0,h.jsx)("td",{children:(0,h.jsx)("div",{className:"form-group map-dropdown",children:(0,h.jsx)(d.A,{handleSelect:Tt,field_value:t,options:Rt})})})]},e)}))]})})]})}),(0,h.jsx)("hr",{}),(0,h.jsx)(m.A,{isActiveStatus:Y,setIsActiveStatus:J,selectedStatus:B,setSelectedStatus:D,isActiveTag:X,setIsActiveTag:q,isActiveList:$,setIsActiveList:z,selectedLists:K,setSelectedLists:Q,selectedTags:et,setSelectedTags:nt,automationControl:xt,setAutomationControl:wt,updateOptin:mt,setUpdateOptin:pt,skipExisting:vt,setSkipExisting:yt,statusMenuRef:at,listMenuRef:st,tagMenuRef:ct})]}),(0,h.jsxs)("div",{className:w?"import-button loader-section":"import-button",children:[(0,h.jsxs)("div",{className:"progress-bar-wrapper",children:[(0,h.jsx)("span",{className:"progress-bar-title",children:S}),(0,h.jsx)("div",{className:"progress-bar",children:(0,h.jsx)("div",{className:"progress-percentage",style:{width:ut.toPrecision(3)+"%"}})}),(0,h.jsxs)("span",{className:"percentage-rate",children:[ut.toPrecision(3)," %"]})]}),(0,h.jsxs)("div",{className:"import-button-wrapper",children:[!jt>0&&(0,h.jsxs)("span",{className:"no-data-text",children:["***"," ",window.MRM_Vars.mint_trans.FBNoBookingUserText]}),(0,h.jsx)("button",{className:"contact-cancel mintmrm-btn outline",onClick:function(){t("/contacts")},children:window.MRM_Vars.mint_trans.Cancel}),(0,h.jsxs)("button",{className:"import-confirm-button mintmrm-btn",onClick:function(){return Mt()},disabled:!!(n||!jt>0),children:[window.MRM_Vars.mint_trans.Import,n&&(0,h.jsx)("span",{className:"mintmrm-loader",style:{display:"block"}})]})]})]})]})]})})})}}}]);
//# sourceMappingURL=import-fluentbooking-file.min.js.map?ver=1752136635031000