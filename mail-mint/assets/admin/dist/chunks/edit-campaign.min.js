/*! For license information please see edit-campaign.min.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_mmAdmin_webpackJsonp=globalThis.webpackChunk_mmAdmin_webpackJsonp||[]).push([[2658,4259],{8551:(e,n,t)=>{t.d(n,{A:()=>r});var i=t(4848);function r(){return(0,i.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsxs)("g",{stroke:"#686F7F",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",clipPath:"url(#clip0_772_1600)",children:[(0,i.jsx)("path",{d:"M10.5 2.25v3a.75.75 0 00.75.75h3"}),(0,i.jsx)("path",{d:"M8.625 15.75H5.25a1.5 1.5 0 01-1.5-1.5V3.75a1.5 1.5 0 011.5-1.5h5.25L14.25 6v3.75m-3.75 4.5h5.25m0 0L13.5 12m2.25 2.25L13.5 16.5"})]})})}},5729:(e,n,t)=>{t.d(n,{A:()=>a});var i=t(1609),r=t(4848);function l(){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("g",{stroke:"#686F7F",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",clipPath:"url(#clip0_718_1046)",children:(0,r.jsx)("path",{d:"M12 21a9 9 0 100-18 9 9 0 000 18zm-3-9h6m-3-3v6"})})})}const a=(0,i.memo)(l)},2567:(e,n,t)=>{t.r(n),t.d(n,{default:()=>pn});var i=t(7723),r=t(1609),l=t(7767),a=t(5588),s=t(4976),o=t(9214),u=t(7091),c=t(3197),d=t(630),m=t(9431),v=t(9012),p=t(2464),h=t(4848);function f(){return(0,h.jsxs)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsxs)("g",{fill:"#02C4FB",clipPath:"url(#clip0_781_6151)",children:[(0,h.jsx)("path",{d:"M12 7.5H6A.75.75 0 016 6h6a.75.75 0 010 1.5zm-3-3H6A.75.75 0 016 3h3a.75.75 0 010 1.5z"}),(0,h.jsx)("path",{d:"M3 10.875a.75.75 0 01-.75-.75V2.25C2.25 1.01 3.26 0 4.5 0h9c1.24 0 2.25 1.01 2.25 2.25v7.875a.75.75 0 01-1.5 0V2.25a.751.751 0 00-.75-.75h-9a.751.751 0 00-.75.75v7.875a.75.75 0 01-.75.75z"}),(0,h.jsx)("path",{d:"M16.828 4.916L15 3.919v1.708l1.11.606a.75.75 0 01.39.658v.937l-7.06 3.688a.971.971 0 01-.877.001L1.5 7.828v-.937a.75.75 0 01.39-.658L3 5.627V3.92l-1.827.997A2.246 2.246 0 000 6.89V15c0 1.24 1.01 2.25 2.25 2.25h13.5c1.24 0 2.25-1.01 2.25-2.25V6.89c0-.825-.45-1.582-1.172-1.975z"})]}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip0_781_6151",children:(0,h.jsx)("path",{fill:"#fff",d:"M0 0h18v18H0z"})})})]})}const g=(0,r.memo)(f);var x=t(9519),j=t(4231);function _(){return(0,h.jsxs)("svg",{width:"21",height:"20",fill:"none",viewBox:"0 0 21 20",children:[(0,h.jsx)("g",{fill:"#239654",clipPath:"url(#clip0_2085_4455)",children:(0,h.jsx)("path",{d:"M17.127 3.744a.625.625 0 01-.442-1.06L18.56.807a.625.625 0 01.884.884l-1.875 1.875a.623.623 0 01-.442.177zM18.955 6.875H17.75a.625.625 0 110-1.25h1.205a.625.625 0 110 1.25zM14 3.125a.625.625 0 01-.625-.625V1.295a.625.625 0 111.25 0V2.5a.625.625 0 01-.625.625zM19 11.87a.622.622 0 01-.442-.178l-1.875-1.875a.625.625 0 01.884-.884l1.875 1.875A.626.626 0 0119 11.871zM10.875 3.746a.62.62 0 01-.442-.179L8.558 1.692a.625.625 0 01.884-.884l1.875 1.875a.628.628 0 01-.442 1.063zM14.854 5.396a1.333 1.333 0 00-1.433-.306L1.743 9.539a1.347 1.347 0 00.093 2.55l4.816 1.445a.097.097 0 01.065.065l1.445 4.816a1.33 1.33 0 001.241.959 1.353 1.353 0 001.31-.867L15.16 6.83a1.332 1.332 0 00-.306-1.433z"})}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip0_2085_4455",children:(0,h.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z",transform:"translate(.25)"})})})]})}const y=(0,r.memo)(_);var w=t(5170),b=t(6263);function N(){return(0,h.jsxs)("svg",{width:"21",height:"20",fill:"none",viewBox:"0 0 21 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("g",{clipPath:"url(#clip0_2090_4745)",children:(0,h.jsx)("path",{fill:"#F7900A",fillRule:"evenodd",d:"M20.248 8.252v5.967a1.56 1.56 0 01-1.562 1.562H12.72a1.562 1.562 0 110-3.125h2.193l-4.665-4.665-7.332 7.332a1.563 1.563 0 01-2.21-2.209l8.437-8.437a1.562 1.562 0 012.21 0l5.77 5.77V8.252a1.563 1.563 0 113.125 0z",clipRule:"evenodd"})}),(0,h.jsx)("defs",{children:(0,h.jsx)("clipPath",{id:"clip0_2090_4745",children:(0,h.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z",transform:"translate(.25)"})})})]})}const M=(0,r.memo)(N);var S=t(161),I=t(5919),C=t(2017),k=t(6427),R=[{id:1,label:"M",value:"monday"},{id:2,label:"T",value:"tuesday"},{id:3,label:"W",value:"wednesday"},{id:4,label:"T",value:"thursday"},{id:5,label:"F",value:"friday"},{id:6,label:"S",value:"saturday"},{id:7,label:"S",value:"sunday"}],V=t(4329),A=t(4983),T=t(5729);function D(){return(0,h.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("path",{d:"M4.16536 0.832031C3.71091 0.832031 3.33203 1.21091 3.33203 1.66536V5.18587L1.01676 6.73617C0.901402 6.81347 0.832131 6.94316 0.832031 7.08203V17.4987C0.832031 18.4148 1.58257 19.1654 2.4987 19.1654H17.4987C18.4148 19.1654 19.1654 18.4148 19.1654 17.4987V7.08203C19.1654 6.94272 19.0957 6.81263 18.9798 6.73535L16.6654 5.19238V1.66536C16.6654 1.21091 16.2865 0.832031 15.832 0.832031H4.16536ZM4.16536 1.66536H15.832V8.78044L10.675 12.7095C10.2738 13.0151 9.72358 13.0151 9.32243 12.7095L4.16536 8.78044C4.16536 6.40874 4.16536 4.03706 4.16536 1.66536ZM3.33203 6.18848V8.14567L1.96484 7.104L3.33203 6.18848ZM16.6654 6.19419L18.0317 7.10483L16.6654 8.14568V6.19419ZM1.66536 7.9227L7.23828 12.1699L1.69548 17.7127C1.6779 17.6442 1.66536 17.5737 1.66536 17.4987V7.9227ZM18.332 7.9227V17.4987C18.332 17.5737 18.3195 17.6442 18.3019 17.7127L12.7591 12.1699L18.332 7.9227ZM7.90723 12.6794L8.81706 13.3727C9.51342 13.9033 10.484 13.9033 11.1803 13.3727L12.0902 12.6794L17.7127 18.3019C17.6442 18.3195 17.5737 18.332 17.4987 18.332H2.4987C2.42373 18.332 2.35324 18.3195 2.28467 18.3019L7.90723 12.6794Z",fill:"#A7A8B3",stroke:"#A7A8B3",strokeWidth:"0.3"}),(0,h.jsx)("path",{d:"M13.0532 6.64563C12.8994 6.64563 12.7756 6.76944 12.7756 6.92318C12.7756 8.45515 11.5294 9.70141 9.9974 9.70141C8.46542 9.70141 7.21916 8.45515 7.21916 6.92318C7.21916 5.3912 8.46542 4.14495 9.9974 4.14495C10.8341 4.14495 11.6096 4.51365 12.1348 5.14767H11.1756C11.0219 5.14767 10.8981 5.27148 10.8981 5.42522C10.8981 5.57896 11.0219 5.70277 11.1756 5.70277H12.7348C12.8886 5.70277 13.0124 5.57896 13.0124 5.42522V3.86739C13.0124 3.71365 12.8886 3.58984 12.7348 3.58984C12.5811 3.58984 12.4573 3.71365 12.4573 3.86739V4.67012C11.83 3.98576 10.9471 3.58984 9.9974 3.58984C8.1593 3.58984 6.66406 5.08508 6.66406 6.92318C6.66406 8.76127 8.1593 10.2565 9.9974 10.2565C11.8355 10.2565 13.3307 8.76127 13.3307 6.92318C13.3307 6.76944 13.2069 6.64563 13.0532 6.64563Z",fill:"#A7A8B3",stroke:"#A7A8B3",strokeWidth:"0.5"})]})}const P=(0,r.memo)(D);function E(){return(0,h.jsxs)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("path",{fill:"#A7A8B3",stroke:"#A7A8B3",strokeWidth:".2",d:"M12.274 18.93a1.936 1.936 0 01-1.682-1.035l-2.927-5.35a.673.673 0 00-.286-.286l-5.35-2.885a1.968 1.968 0 01.353-3.609l13.939-4.651a1.977 1.977 0 012.523 2.523L14.16 17.584a1.943 1.943 0 01-1.683 1.338l-.202.008zm4.408-16.614L2.744 6.968a.707.707 0 00-.118 1.296l5.35 2.885c.34.18.619.459.8.8l2.86 5.349a.698.698 0 00.68.37.706.706 0 00.615-.488l4.677-13.938a.706.706 0 00-.926-.926z"}),(0,h.jsx)("path",{fill:"#A7A8B3",stroke:"#A7A8B3",strokeWidth:".2",d:"M7.993 12.562a.596.596 0 01-.446-.185.622.622 0 010-.892L17.44 1.56a.654.654 0 01.925.926L8.44 12.377a.622.622 0 01-.446.185z"})]})}var B=t(6005),O=function(e){return(0,h.jsxs)("svg",{width:"13",height:"16",viewBox:"0 0 13 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("path",{d:"M11.6875 2.75H10.3125V2.0625C10.3125 1.51549 10.0952 0.990886 9.70841 0.604092C9.32161 0.217298 8.79701 0 8.25 0H4.125C3.57799 0 3.05339 0.217298 2.66659 0.604092C2.2798 0.990886 2.0625 1.51549 2.0625 2.0625V2.75H0.6875C0.505164 2.75 0.330295 2.82243 0.201364 2.95136C0.0724328 3.0803 0 3.25516 0 3.4375C0 3.61984 0.0724328 3.7947 0.201364 3.92364C0.330295 4.05257 0.505164 4.125 0.6875 4.125V11.6875C0.6875 12.1389 0.776414 12.5859 0.949164 13.003C1.12191 13.42 1.37512 13.799 1.69432 14.1182C2.33898 14.7628 3.21332 15.125 4.125 15.125H8.25C8.70142 15.125 9.14842 15.0361 9.56547 14.8633C9.98253 14.6906 10.3615 14.4374 10.6807 14.1182C10.9999 13.799 11.2531 13.42 11.4258 13.003C11.5986 12.5859 11.6875 12.1389 11.6875 11.6875V4.125C11.8698 4.125 12.0447 4.05257 12.1736 3.92364C12.3026 3.7947 12.375 3.61984 12.375 3.4375C12.375 3.25516 12.3026 3.0803 12.1736 2.95136C12.0447 2.82243 11.8698 2.75 11.6875 2.75ZM3.4375 2.0625C3.4375 1.88016 3.50993 1.7053 3.63886 1.57636C3.7678 1.44743 3.94266 1.375 4.125 1.375H8.25C8.43234 1.375 8.6072 1.44743 8.73614 1.57636C8.86507 1.7053 8.9375 1.88016 8.9375 2.0625V2.75H3.4375V2.0625ZM10.3125 11.6875C10.3125 12.2345 10.0952 12.7591 9.70841 13.1459C9.32161 13.5327 8.79701 13.75 8.25 13.75H4.125C3.57799 13.75 3.05339 13.5327 2.66659 13.1459C2.2798 12.7591 2.0625 12.2345 2.0625 11.6875V4.125H10.3125V11.6875Z",fill:"#7A8B9A"}),(0,h.jsx)("path",{d:"M4.8125 6.1875C4.63016 6.1875 4.4553 6.25993 4.32636 6.38886C4.19743 6.5178 4.125 6.69266 4.125 6.875V11C4.125 11.1823 4.19743 11.3572 4.32636 11.4861C4.4553 11.6151 4.63016 11.6875 4.8125 11.6875C4.99484 11.6875 5.1697 11.6151 5.29864 11.4861C5.42757 11.3572 5.5 11.1823 5.5 11V6.875C5.5 6.69266 5.42757 6.5178 5.29864 6.38886C5.1697 6.25993 4.99484 6.1875 4.8125 6.1875Z",fill:"#7A8B9A"}),(0,h.jsx)("path",{d:"M7.55469 6.1875C7.37235 6.1875 7.19748 6.25993 7.06855 6.38886C6.93962 6.5178 6.86719 6.69266 6.86719 6.875V11C6.86719 11.1823 6.93962 11.3572 7.06855 11.4861C7.19748 11.6151 7.37235 11.6875 7.55469 11.6875C7.73702 11.6875 7.91189 11.6151 8.04082 11.4861C8.16975 11.3572 8.24219 11.1823 8.24219 11V6.875C8.24219 6.69266 8.16975 6.5178 8.04082 6.38886C7.91189 6.25993 7.73702 6.1875 7.55469 6.1875Z",fill:"#7A8B9A"})]})};const H=(0,r.memo)(O);function Z(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return L(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?L(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var F=function(e){var n,t=e.parentId,r=e.step,l=e.conditions,a=e.setConditions,s=e.steps,o=e.index,u=e.setScheduleValidate,c=e.setErrorMessage,d=[{value:"post",label:"Blog posts"},{value:"page",label:"Pages"}];window.MRM_Vars.is_wc_active&&d.push({value:"product",label:"Products"});var m=d.find((function(e){return(null==e?void 0:e.value)===(null==r?void 0:r.publishItem)})),v=1===l.length&&1===(null===(n=l[0])||void 0===n?void 0:n.steps.length);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"recurring-single-condition",children:[(0,h.jsx)(B.Ay,{value:m||d[0],options:d,onChange:function(e){return function(e,n){var i,r=Z(l),s=r.find((function(e){return(null==e?void 0:e.id)===t})),o=null==s?void 0:s.steps.find((function(e){return(null==e?void 0:e.id)===n})),u=r.indexOf(s),c=null==s||null===(i=s.steps)||void 0===i?void 0:i.indexOf(o);s.steps[c].publishItem=null==e?void 0:e.value,r[u]=s,a(Z(r))}(e,null==r?void 0:r.id)}}),(0,h.jsxs)("div",{className:"item-publish-day",children:[(0,h.jsx)("label",{htmlFor:"publishWithIn",children:(0,i.__)("days","mrm")}),(0,h.jsx)("input",{type:"number",name:"publishWithIn",value:null==r?void 0:r.publishWithIn,min:1,onChange:function(e){return function(e,n){var i,r=e.target.value;""===r?(u(!1),c("Input cannot be empty")):u(!0);var s=Z(l),o=s.find((function(e){return(null==e?void 0:e.id)===t})),d=null==o?void 0:o.steps.find((function(e){return(null==e?void 0:e.id)===n})),m=s.indexOf(o),v=null==o||null===(i=o.steps)||void 0===i?void 0:i.indexOf(d);o.steps[v].publishWithIn=r,s[m]=o,a(Z(s))}(e,null==r?void 0:r.id)},onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}})]}),(0,h.jsx)("button",{disabled:v,style:{opacity:v?.7:1,cursor:v?"not-allowed":"pointer"},onClick:function(){return function(e,n){var t=Z(l),i=l.find((function(n){return(null==n?void 0:n.id)===e})),r=t.indexOf(i),s=l.filter((function(n){return(null==n?void 0:n.id)!==e})),o=i.steps.filter((function(e){return e.id!==n}));u(!0),0===o.length?a(Z(s)):(i.steps=Z(o),t[r]=i,a(Z(t)))}(t,null==r?void 0:r.id)},className:"".concat(1<s.length?"active":""),children:(0,h.jsx)(H,{})})]}),1<s.length&&o!==s.length-1&&(0,h.jsx)("div",{className:"and-symbol",children:(0,h.jsx)("span",{children:"&"})})]})};const q=(0,r.memo)(F);function W(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return G(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?G(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var z=function(e){var n,t=e.parentId,r=e.condition,l=e.conditions,a=e.setConditions,s=e.index,o=e.setScheduleValidate,u=e.setErrorMessage;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"recurring-conditions-wrapper",children:[(0,h.jsxs)("div",{className:"condition-title-wrapper",children:[(0,h.jsx)("h2",{children:(0,i.__)("Send emails if","mrm")}),(0,h.jsx)("h2",{children:(0,i.__)("Publishes within","mrm")})]}),null==r||null===(n=r.steps)||void 0===n?void 0:n.map((function(e,n){return(0,h.jsx)(q,{step:e,conditions:l,setConditions:a,parentId:t,steps:r.steps,index:n,setScheduleValidate:o,setErrorMessage:u},e.id)})),(0,h.jsxs)("button",{className:"recurring-add-and",onClick:function(){return function(e){var n=W(l),t=l.find((function(n){return(null==n?void 0:n.id)===e})),i=n.indexOf(t),r={id:t.steps[t.steps.length-1].id+1,publishItem:"post",publishWithIn:1};t.steps.push(r),n[i]=t,a(W(n))}(t)},children:[(0,h.jsx)(T.A,{}),(0,i.__)("And","mrm")]})]}),1<l.length&&s!==l.length-1&&(0,h.jsx)("div",{children:(0,h.jsx)("h3",{children:(0,i.__)("Or","mrm")})})]})};const U=(0,r.memo)(z);var Y=t(5747),Q=t(4479),J=t(5270);function K(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=ee(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){s=!0,l=e},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw l}}}}function X(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,l,a,s=[],o=!0,u=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;o=!1}else for(;!(o=(i=l.call(t)).done)&&(s.push(i.value),s.length!==n);o=!0);}catch(e){u=!0,r=e}finally{try{if(!o&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(e,n)||ee(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,n){if(e){if("string"==typeof e)return ne(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ne(e,n):void 0}}function ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}function te(e){var n,t=$((0,r.useState)(!1),2),l=(t[0],t[1]),a=$((0,r.useState)(window.MRM_Vars.local_time),2),s=a[0],o=a[1],u=$((0,r.useState)(!1),2),c=u[0],d=u[1],m=$((0,r.useState)(!0),2),v=m[0],p=m[1],f=$((0,r.useState)(),2),g=f[0],x=f[1],j=(0,r.useRef)(null),_=$((0,r.useState)(!1),2),y=_[0],w=_[1],b=$((0,r.useState)(window.MRM_Vars.local_time),2),N=b[0],M=b[1],S=$((0,r.useState)("daily"),2),C=S[0],D=S[1],B=$((0,r.useState)(window.MRM_Vars.local_time),2),O=B[0],H=B[1],Z=$((0,r.useState)(window.MRM_Vars.local_time),2),L=Z[0],F=Z[1],q=$((0,r.useState)(!1),2),W=q[0],G=q[1],z=$((0,r.useState)("never_end"),2),ee=z[0],ne=z[1],te=$((0,r.useState)([]),2),ie=te[0],re=te[1],le=$((0,r.useState)(1),2),ae=le[0],se=le[1],oe=$((0,r.useState)(""),2),ue=oe[0],ce=oe[1],de=$((0,r.useState)(!1),2),me=de[0],ve=de[1],pe=$((0,r.useState)([{id:"parentStep-1",steps:[{id:1,publishItem:"post",publishWithIn:1}]}]),2),he=pe[0],fe=pe[1],ge=$((0,r.useState)(!0),2),xe=ge[0],je=ge[1],_e=(0,r.useRef)(null),ye=(0,r.useRef)(null);(0,I.c7)(j,d),(0,I.c7)(ye,ve),(0,I.c7)(_e,G);var we=Array.from({length:31},(function(e,n){return n+1})),be=window.MRM_Vars.is_mailmint_pro_license_active;(0,r.useEffect)((function(){var n,t,i,r,l,a,s,o,u=e.recurringSavedData;Object.keys(u).length>0&&(fe(null==u?void 0:u.conditions),M((null==u||null===(n=u.schedule)||void 0===n?void 0:n.startDate)+" 05:55:42"),D(null==u||null===(t=u.schedule)||void 0===t?void 0:t.recurringRepeat),se(null==u||null===(i=u.schedule)||void 0===i?void 0:i.recurringEvery),H("2023-11-21 "+(null==u||null===(r=u.schedule)||void 0===r?void 0:r.recurringAt)),re(null!=u&&null!==(l=u.schedule)&&void 0!==l&&l.recurringOn?u.schedule.recurringOn:[]),"never_end"===(null==u||null===(a=u.schedule)||void 0===a?void 0:a.endDate)?ne(null==u||null===(s=u.schedule)||void 0===s?void 0:s.endDate):(ne("till"),F((null==u||null===(o=u.schedule)||void 0===o?void 0:o.endDate)+" 05:55:42")))}),[e.recurringSavedData]);var Ne=$((0,r.useState)("recurring"===(null==e?void 0:e.campaignType)?3:1),2),Me=Ne[0],Se=Ne[1],Ie=function(e){Se(e),p(!0)},Ce=function(){l(!0),e.onNotPublish("none"),p(!0)},ke=function(e){var n=e.target.value;if(ne(n),"till"===n){var t=new Date(N),i=new Date(L);i.setHours(0,0,0,0),t.setHours(0,0,0,0),i<=t?(p(!1),ce("Please set valid ending date")):p(!1)}else p(!0)},Re=function(e){var n=e.target.getAttribute("value");if(ie.includes(n)){var t=ie.filter((function(e){return e!==n}));re(t)}else re([].concat(X(ie),[n])),p(!0);0===ie.length&&(p(!0),ce("You have to select at least one day"))},Ve=function(e){D(e),re([]),p(!0)};(0,Q.A)(Ce);var Ae=function(e){return new Date(e.replace(" ","T"))};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"mintmrm-delete-alert-wrapper schedule-campaign-modal",children:(0,h.jsxs)("div",{className:"mintmrm-delete-confirmation",children:[(0,h.jsxs)("div",{className:"delete-confirmation-header",children:[(0,h.jsx)("div",{className:"delete-title",children:(0,h.jsx)("h3",{children:"recurring"===(null==e?void 0:e.campaignType)?null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.RecurringCampaign:e.title})}),(0,h.jsx)("div",{className:"cross-icon",onClick:Ce,children:(0,h.jsx)(A.A,{})})]}),(0,h.jsxs)("div",{className:"delete-confirmation-body ".concat(3===Me?"overflow-scroll":""),children:[e.message&&(0,h.jsx)("p",{children:e.message}),(0,h.jsxs)("div",{className:"tab-btn ".concat("recurring"===(null==e?void 0:e.campaignType)?"display-none":""),children:[(0,h.jsxs)("button",{type:"button",className:"".concat(1===Me?"active":""," nav-publish-now"),onClick:function(){return Ie(1)},children:[(0,h.jsx)(E,{}),(0,i.__)("Send now","mrm")]}),(0,h.jsxs)("button",{type:"button",className:"".concat(2===Me?"active":""," nav-schedule"),onClick:function(){return Ie(2)},children:[(0,h.jsx)(V.A,{}),(0,i.__)("Schedule","mrm")]}),"recurring"===(null==e?void 0:e.campaignType)&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("button",{type:"button",className:"nav-recurring ".concat(3===Me?"active":""),onClick:function(){return Ie(3)},children:[(0,h.jsx)(P,{}),(0,i.__)("Recurring","mrm"),!be&&(0,h.jsx)("span",{className:"pro-tag-with-icon",children:(0,h.jsx)(J.A,{})})]})})]}),(0,h.jsxs)("div",{className:"tab-content ".concat(2===Me?"mintmrm-overflow-visible":""),children:[(0,h.jsxs)("div",{className:"single-tab-content tab-content-publish-now ".concat(1===Me?"active":""),children:[(0,h.jsxs)("div",{className:"single-recurring-content",children:[(0,h.jsx)("p",{className:"publish-now-text",children:(0,i.__)("Youâ€™re about to send an email from:","mrm")}),(0,h.jsx)("p",{className:"publish-now-email-to",children:(0,i.__)("".concat(e.emailFrom),"mrm")}),(0,h.jsxs)("p",{className:"publish-now-subscribers",children:[(0,h.jsx)("span",{children:(0,i.__)("".concat(e.subscribers),"mrm")}),(0,i.__)("".concat(1<e.subscribers?"subscribers":"subscriber"),"mrm")]})]}),(0,h.jsxs)("ul",{className:"mintmrm-delete-confirm-btn",children:[(0,h.jsx)("li",{children:(0,h.jsx)("button",{className:"mintmrm-btn outline",onClick:Ce,children:"Cancel"})}),(0,h.jsx)("li",{children:(0,h.jsxs)("button",{type:"button",className:"mintmrm-btn campaign-send",onClick:function(){w(!1),e.onPublishStatus(!0)},disabled:y,children:["Send",y&&(0,h.jsx)("span",{className:"mintmrm-loader"})]})})]})]}),(0,h.jsxs)("div",{className:"single-tab-content tab-content-schedule ".concat(2===Me?"active":""),children:[(0,h.jsx)("div",{className:"campaign-datepicker",children:(0,h.jsx)("div",{className:"form-group pos-relative",ref:ye,children:(0,h.jsxs)("div",{className:"campaign-schedule-datepicker pos-relative ".concat(me?"show-datepicker":""),children:[(0,h.jsx)("span",{className:"calendar-icon",title:"Click to show Calendar",onClick:function(){ve((function(e){return!e}))},children:(0,h.jsx)(V.A,{})}),(0,h.jsx)(k.DateTimePicker,{currentDate:Ae(s),onChange:function(n){return function(n){var t=new Date(window.MRM_Vars.local_time);new Date(n)<t?p(!1):(e.setScheduleTime(n),x(n),o(n),ve(!1),p(!0))}(n)},is12Hour:!0,__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0})]})})}),(0,h.jsxs)("ul",{className:"mintmrm-delete-confirm-btn",children:[(0,h.jsx)("span",{className:v?"error-message":"error-message show",children:(0,i.__)("You cannot schedule for older date and time","mrm")}),(0,h.jsx)("li",{children:(0,h.jsx)("button",{className:"mintmrm-btn outline",onClick:Ce,children:(0,i.__)("Cancel","mrm")})}),(0,h.jsx)("li",{children:(0,h.jsxs)("button",{type:"button",className:"mintmrm-btn campaign-send",onClick:function(){var n=new Date(window.MRM_Vars.local_time),t=new Date(g)>=n;e.onScheduleStatus(t),p(t),w(!1)},disabled:y,children:[(0,i.__)("Schedule","mrm"),y&&(0,h.jsx)("span",{className:"mintmrm-loader"})]})})]})]}),(0,h.jsxs)("div",{className:"single-tab-content tab-content-recurring ".concat(3===Me?"active":""),children:[(0,h.jsxs)("div",{className:"single-recurring-content recurring-schedule",children:[(0,h.jsxs)("div",{className:"recurring-schedule-date-time-wrapper",children:[(0,h.jsxs)("div",{className:"recurring-schedule-start",children:[(0,h.jsx)("span",{className:"recurring-min-title recurring-left",children:(0,i.__)("Start Date","mrm")}),(0,h.jsx)("div",{className:"campaign-datepicker",children:(0,h.jsx)("div",{className:"form-group pos-relative",children:(0,h.jsxs)("div",{className:"campaign-schedule-datepicker pos-relative ".concat(c?"show-datepicker":""),ref:j,children:[(0,h.jsx)("span",{className:"calendar-icon",title:"Click to show Calendar",onClick:function(){d(!c)},children:(0,h.jsx)(V.A,{})}),(0,h.jsx)(k.DateTimePicker,{currentDate:Ae(N),onChange:function(n){return function(n){var t=new Date(window.MRM_Vars.local_time),i=new Date(n);i.setHours(0,0,0,0),t.setHours(0,0,0,0),i<t?(p(!1),ce("You cannot schedule for older date and time")):(e.setScheduleTime(n),M(n),d(!1),p(!0))}(n)},is12Hour:!0,__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0})]})})})]}),(0,h.jsxs)("div",{className:"recurring-schedule-at",children:[(0,h.jsx)("span",{className:"recurring-min-title recurring-left",children:(0,i.__)("At","mrm")}),(0,h.jsx)("div",{className:"campaign-datepicker",children:(0,h.jsx)("div",{className:"form-group pos-relative",children:(0,h.jsx)("div",{className:"campaign-schedule-datepicker pos-relative",children:(0,h.jsx)(k.DateTimePicker,{currentDate:Ae(O),onChange:function(e){return function(e){var n=new Date,t=new Date(N),i=new Date(e);if(n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()){var r=n.getHours()<=i.getHours(),l=n.getMinutes()<i.getMinutes(),a=n.getHours()===i.getHours();r?a&&!l?(p(!1),ce("You cannot schedule for older date and time")):(H(e),d(!1),p(!0)):(p(!1),ce("You cannot schedule for older date and time"))}else H(e),d(!1),p(!0)}(e)},is12Hour:!0,__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0})})})})]})]}),(0,h.jsxs)("div",{className:"recurring-schedule-repeat-wrapper",children:[(0,h.jsxs)("div",{className:"recurring-schedule-repeat",children:[(0,h.jsx)("span",{className:"recurring-min-title recurring-left",children:(0,i.__)("Repeat","mrm")}),(0,h.jsxs)("div",{className:"recurring-repeat-opt",children:[(0,h.jsx)("span",{className:"repeat-opt-label ".concat("daily"===C?"active":""),onClick:function(){return Ve("daily")},children:(0,i.__)("Daily","mrm")}),(0,h.jsx)("span",{className:"repeat-opt-label ".concat("weekly"===C?"active":""),onClick:function(){return Ve("weekly")},children:(0,i.__)("Weekly","mrm")}),(0,h.jsx)("span",{className:"repeat-opt-label ".concat("monthly"===C?"active":""),onClick:function(){return Ve("monthly")},children:(0,i.__)("Monthly","mrm")})]})]}),(0,h.jsxs)("div",{className:"recurring-schedule-every",children:[(0,h.jsx)("span",{className:"recurring-min-title recurring-left",children:(0,i.__)("Every","mrm")}),(0,h.jsxs)("div",{className:"recurring-every-input",children:[(0,h.jsx)("input",{type:"number",name:"recur-on-every",min:1,value:ae,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()},onChange:function(e){return function(e){var n=e.target.value;""===n?(p(!1),ce("Recurrence cycle cannot be empty or negative"),se(n)):(p(!0),se(Number(n)))}(e)}}),(0,h.jsx)("span",{children:(0,i.__)("".concat("daily"===C?"Day":"weekly"===C?"Week":"Month"),"mrm")})]})]})]}),("weekly"===C||"monthly"===C)&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"recurring-schedule-on",children:[(0,h.jsx)("span",{className:"recurring-min-title recurring-left",children:(0,i.__)("On","mrm")}),"weekly"===C?(0,h.jsx)("div",{className:"recurring-on-weekly",children:(0,h.jsx)("div",{className:"recurring-days",onClick:function(e){return Re(e)},children:R.map((function(e){var n=ie.includes(null==e?void 0:e.value);return(0,h.jsx)("span",{index:null==e?void 0:e.id,value:null==e?void 0:e.value,className:"".concat(n?"active":""),children:null==e?void 0:e.label},null==e?void 0:e.id)}))})}):(0,h.jsx)("div",{className:"recurring-on-monthly",children:(0,h.jsx)("div",{className:"recurring-days",onClick:function(e){return Re(e)},children:we.map((function(e){var n=ie.includes(e.toString());return(0,h.jsx)("span",{index:e,value:e,className:"".concat(n?"active":""),children:e},e)}))})})]})}),(0,h.jsxs)("div",{className:"recurring-schedule-start recurring-schedule-end recurring-schedule-end-wrapper",children:[(0,h.jsx)("span",{className:"recurring-min-title recurring-left",children:(0,i.__)("End Date","mrm")}),(0,h.jsxs)("div",{className:"recurring-end",children:[(0,h.jsxs)("div",{className:"input-custom-wrapper",children:[(0,h.jsxs)("span",{className:"mintmrm-radiobtn",children:[(0,h.jsx)("input",{id:"never_end",type:"radio",name:"recaptcha-version",value:"never_end",checked:"never_end"===ee,onChange:ke}),(0,h.jsx)("label",{htmlFor:"never_end",children:(0,i.__)("Never End","mrm")})]}),(0,h.jsxs)("span",{className:"mintmrm-radiobtn",children:[(0,h.jsx)("input",{id:"till",type:"radio",name:"recaptcha-version",value:"till",checked:"till"===ee,onChange:ke}),(0,h.jsx)("label",{htmlFor:"till",children:(0,i.__)("Till","mrm")})]})]}),"till"===ee&&(0,h.jsx)("div",{className:"campaign-datepicker",children:(0,h.jsx)("div",{className:"form-group pos-relative",children:(0,h.jsxs)("div",{className:"campaign-schedule-datepicker pos-relative ".concat(W?"show-datepicker":""),ref:_e,children:[(0,h.jsx)("span",{className:"calendar-icon",title:"Click to show Calendar",onClick:function(){G(!W)},children:(0,h.jsx)(V.A,{})}),(0,h.jsx)(k.DateTimePicker,{currentDate:Ae(L),onChange:function(e){return function(e){var n=new Date(N),t=new Date(e);t.setHours(0,0,0,0),n.setHours(0,0,0,0),t<=n?(p(!1),ce("Please set valid ending date")):(F(e),d(!1),p(!0))}(e)},is12Hour:!0,__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0})]})})})]})]}),(0,h.jsxs)("div",{className:"recurring-schedule-start display-flex conditions-toggle",children:[(0,h.jsx)("span",{className:"recurring-min-title recurring-left",children:(0,i.__)("Enable Conditions","mrm")}),(0,h.jsx)("div",{className:"recurring-end",children:(0,h.jsx)("div",{className:"input-custom-wrapper",children:(0,h.jsxs)("span",{className:"mintmrm-checkbox",children:[(0,h.jsx)("input",{id:"conditions_toggle",type:"checkbox",checked:xe,onChange:function(){je((function(e){return!e}))}}),(0,h.jsx)("label",{htmlFor:"conditions_toggle",children:(0,i.__)("Enable this to add conditions before run the campaign ","mrm")})]})})})]})]}),xe&&(0,h.jsxs)("div",{className:"single-recurring-content recurring-conditions",children:[(0,h.jsx)("h2",{className:"condition-title",children:(0,i.__)("And Conditions","mrm")}),he.map((function(e,n){return(0,h.jsx)(U,{parentId:e.id,condition:e,conditions:he,setConditions:fe,index:n,setScheduleValidate:p,setErrorMessage:ce},e.id)})),(0,h.jsx)("div",{className:"recurring-add-or",children:(0,h.jsxs)("button",{onClick:function(){var e=he[he.length-1].id.match(/\d+/),n={id:"parentStep-".concat(parseInt(e[0],10)+1),steps:[{id:1,publishItem:"post",publishWithIn:1}]};fe([].concat(X(he),[n]))},children:[(0,h.jsx)(T.A,{}),(0,i.__)("Or","mrm")]})})]})]})]})]}),3===Me&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("ul",{className:"mintmrm-delete-confirm-btn",children:[(0,h.jsx)("span",{className:v?"error-message":"error-message show",children:(0,i.__)("".concat(ue),"mrm")}),(0,h.jsx)("li",{children:(0,h.jsx)("button",{className:"mintmrm-btn outline",onClick:Ce,children:(0,i.__)("Cancel","mrm")})}),(0,h.jsx)("li",{children:(0,h.jsxs)("button",{type:"button",className:"mintmrm-btn campaign-send",onClick:function(){return function(n,t){if(be){var i=new Date(window.MRM_Vars.local_time),r=new Date(N),l=new Date(L);i.setHours(0,0,0,0),r.setHours(0,0,0,0),l.setHours(0,0,0,0);var a=r>=i;if(a||ce("You cannot schedule for older date and time."),a&&"till"===t){var s=Math.floor((l-r)/864e5);"daily"===n&&s<1?(a=!1,ce("Daily repeat requires a minimum 1-day gap between start and end dates.")):"weekly"===n&&s<7?(a=!1,ce("Weekly repeat requires a minimum 7-day gap between start and end dates.")):"monthly"===n&&s<30?(a=!1,ce("Monthly repeat requires a minimum 30-day gap between start and end dates.")):"daily"!==n&&0===ie.length&&(a=!1,ce("Select At least One day"))}"daily"!==n&&0===ie.length&&(a=!1,ce("You have to select at least one day")),""!==ae&&0!=ae||(a=!1,ce("Recurrence cycle cannot be empty or negative")),he.forEach((function(e){return e.steps.forEach((function(e){""===e.publishWithIn&&(a=!1,ce("Input cannot be empty"))}))}));var o,u=K(he);try{for(u.s();!(o=u.n()).done;){var c,d=K(o.value.steps);try{for(d.s();!(c=d.n()).done;){var m=c.value;if(""===m.publishWithIn||0==m.publishWithIn){a=!1,ce("Input cannot be empty");break}}}catch(e){d.e(e)}finally{d.f()}if(!a)break}}catch(e){u.e(e)}finally{u.f()}if(a){var v=new Date,h=new Date(N),f=new Date(O);if(v.getDate()===h.getDate()&&v.getMonth()===h.getMonth()){var g=v.getHours()<=f.getHours(),x=v.getMinutes()<f.getMinutes(),j=v.getHours()===f.getHours();g?j&&!x&&(a=!1,ce("You cannot schedule for older date and time")):(a=!1,ce("You cannot schedule for older date and time"))}}var _={schedule:{startDate:N.includes("T")?N.split("T")[0]:N.split(" ")[0],endDate:"till"!==t?t:L.includes("T")?L.split("T")[0]:L.split(" ")[0],recurringRepeat:C,recurringEvery:ae,recurringAt:O.includes("T")?O.split("T")[1]:O.split(" ")[1],recurringOn:"daily"!==C?ie:null,enableConditions:xe},conditions:he||[]};e.setScheduleTime(N),e.onScheduleStatus(a,"recurring",_,N),p(a),w(!1)}else e.setIsProOpenAi(!0),e.setProLink(Y.VK)}(C,ee)},disabled:y||!v,children:[(0,i.__)("Schedule","mrm"),y&&(0,h.jsx)("span",{className:"mintmrm-loader"})]})})]})})]})})})}const ie=(0,r.memo)(te);var re=t(9480),le=t(6830),ae=t(3890),se=t(3469),oe=t(5699),ue=t(2345);function ce(e){return(0,h.jsxs)("div",{className:"single-card",children:[(0,h.jsxs)("div",{className:"image-title",children:[(0,h.jsx)("span",{className:"card-icon",children:e.source}),(0,h.jsx)("p",{children:e.cardTitle})]}),(0,h.jsx)("h3",{className:"total-contact-numbers",children:e.totalAmount?e.totalAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"})]})}const de=(0,r.memo)(ce);var me=t(6931);function ve(e){var n=window.MRM_Vars.is_mailmint_pro_license_active;return(0,h.jsxs)("div",{className:"single-card subscribers",children:[(0,h.jsxs)("div",{className:"title",children:[(0,h.jsxs)("div",{className:"title-header-wrapper",children:[(0,h.jsx)("h3",{className:"heading",children:"Subscribers"}),(0,h.jsxs)(s.N_,{className:n?"analytics-link":"analytics-link pro-disabled",to:n?"/campaign/".concat(null==e?void 0:e.type,"/analytics/").concat(e.id,"/overview"):"",children:["Detail Analytics",n?(0,h.jsx)(me.A,{}):(0,h.jsx)("span",{className:"pro-tag-with-icon",children:(0,h.jsx)(J.A,{})})]})]}),(0,h.jsx)("p",{children:e.cardTitle})]}),(0,h.jsx)("div",{className:"progress-bar",children:(0,h.jsx)("div",{style:{width:e.percentage},className:"unsubscribers-percentage"})}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"total-subscribers",children:[(0,h.jsxs)("div",{className:"total-ammout-wrapper",children:[(0,h.jsx)("span",{className:"total-title",children:(0,i.__)("Current Subscriber","mrm")}),(0,h.jsx)("h4",{children:e.current_subscriber})]}),(0,h.jsxs)("div",{className:"total-ammout-wrapper",children:[(0,h.jsx)("span",{className:"total-title",children:(0,i.__)("Unsubscriber","mrm")}),(0,h.jsx)("h4",{children:e.current_unsubscriber})]})]})]})}const pe=(0,r.memo)(ve);var he=t(7561),fe=t(693),ge=t(7572),xe=t(8474);function je(){return(0,h.jsx)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 20 20",children:(0,h.jsx)("path",{fill:"#B6B6B7",stroke:"#A4A8B5",strokeWidth:".2",d:"M19.285 9.102a9.377 9.377 0 00-18.58 2.551 9.437 9.437 0 008.047 8.074 9.74 9.74 0 001.26.081c1.7.003 3.368-.46 4.822-1.34a.627.627 0 00.069-1.058.625.625 0 00-.714-.012 8.13 8.13 0 113.412-4.08 1.343 1.343 0 01-2.6-.475V6.058a.625.625 0 00-1.25 0v1.079a5 5 0 10.126 6.453 2.584 2.584 0 004.894.171 9.5 9.5 0 00.514-4.66zm-9.283 5.081a3.75 3.75 0 110-7.5 3.75 3.75 0 010 7.5z"})})}var _e=t(3726),ye=t(1425),we=t(8551),be=t(5315),Ne=t(7878);function Me(){return(0,h.jsxs)("svg",{width:"13",height:"14",fill:"none",viewBox:"0 0 13 14",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("rect",{width:"13",height:"13",y:".339",fill:"#686F7F",rx:"6.5"}),(0,h.jsx)("path",{fill:"#fff",stroke:"#fff",strokeWidth:".2",d:"M6.38 8.437h-.005a.492.492 0 01-.487-.497l.002-.245c0-.014 0-.029.002-.043.068-.715.543-1.154.925-1.506.13-.12.252-.233.356-.35.127-.144.312-.438.118-.792-.224-.41-.77-.525-1.194-.428-.443.101-.607.48-.665.696a.492.492 0 01-.95-.254c.196-.733.704-1.243 1.395-1.401.93-.212 1.866.163 2.277.915.342.625.248 1.36-.245 1.916-.137.154-.283.29-.425.42-.353.326-.574.544-.611.859l-.002.222a.491.491 0 01-.491.488zm-.001 1.474a.49.49 0 01-.347-.839.509.509 0 01.693 0 .488.488 0 01.146.348c0 .13-.052.255-.143.349a.502.502 0 01-.35.142z"})]})}function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ie(){var e=Te(),n=e.m(Ie),t=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function i(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===t||"GeneratorFunction"===(n.displayName||n.name))}var r={throw:1,return:2,break:3,continue:3};function l(e){var n,t;return function(i){n||(n={stop:function(){return t(i.a,2)},catch:function(){return i.v},abrupt:function(e,n){return t(i.a,r[e],n)},delegateYield:function(e,r,l){return n.resultName=r,t(i.d,Ce(e),l)},finish:function(e){return t(i.f,e)}},t=function(e,t,r){i.p=n.prev,i.n=n.next;try{return e(t,r)}finally{n.next=i.n}}),n.resultName&&(n[n.resultName]=i.v,n.resultName=void 0),n.sent=i.v,n.next=i.n;try{return e.call(this,n)}finally{i.p=n.prev,i.n=n.next}}}return(Ie=function(){return{wrap:function(n,t,i,r){return e.w(l(n),t,i,r&&r.reverse())},isGeneratorFunction:i,mark:e.m,awrap:function(e,n){return new Pe(e,n)},AsyncIterator:Ae,async:function(e,n,t,r,a){return(i(n)?Ve:Re)(l(e),n,t,r,a)},keys:ke,values:Ce}})()}function Ce(e){if(null!=e){var n=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],t=0;if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}throw new TypeError(Se(e)+" is not iterable")}function ke(e){var n=Object(e),t=[];for(var i in n)t.unshift(i);return function e(){for(;t.length;)if((i=t.pop())in n)return e.value=i,e.done=!1,e;return e.done=!0,e}}function Re(e,n,t,i,r){var l=Ve(e,n,t,i,r);return l.next().then((function(e){return e.done?e.value:l.next()}))}function Ve(e,n,t,i,r){return new Ae(Te().w(e,n,t,i),r||Promise)}function Ae(e,n){function t(i,r,l,a){try{var s=e[i](r),o=s.value;return o instanceof Pe?n.resolve(o.v).then((function(e){t("next",e,l,a)}),(function(e){t("throw",e,l,a)})):n.resolve(o).then((function(e){s.value=e,l(s)}),(function(e){return t("throw",e,l,a)}))}catch(e){a(e)}}var i;this.next||(De(Ae.prototype),De(Ae.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),De(this,"_invoke",(function(e,r,l){function a(){return new n((function(n,i){t(e,l,n,i)}))}return i=i?i.then(a,a):a()}),!0)}function Te(){var e,n,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function l(t,i,r,l){var o=i&&i.prototype instanceof s?i:s,u=Object.create(o.prototype);return De(u,"_invoke",function(t,i,r){var l,s,o,u=0,c=r||[],d=!1,m={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return l=n,s=0,o=e,m.n=t,a}};function v(t,i){for(s=t,o=i,n=0;!d&&u&&!r&&n<c.length;n++){var r,l=c[n],v=m.p,p=l[2];t>3?(r=p===i)&&(o=l[(s=l[4])?5:(s=3,3)],l[4]=l[5]=e):l[0]<=v&&((r=t<2&&v<l[1])?(s=0,m.v=i,m.n=l[1]):v<p&&(r=t<3||l[0]>i||i>p)&&(l[4]=t,l[5]=i,m.n=p,s=0))}if(r||t>1)return a;throw d=!0,i}return function(r,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&v(c,p),s=c,o=p;(n=s<2?e:o)||!d;){l||(s?s<3?(s>1&&(m.n=-1),v(s,o)):m.n=o:m.v=o);try{if(u=2,l){if(s||(r="next"),n=l[r]){if(!(n=n.call(l,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,s<2&&(s=0)}else 1===s&&(n=l.return)&&n.call(l),s<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),s=1);l=e}else if((n=(d=m.n<0)?o:t.call(i,m))!==a)break}catch(n){l=e,s=1,o=n}finally{u=1}}return{value:n,done:d}}}(t,r,l),!0),u}var a={};function s(){}function o(){}function u(){}n=Object.getPrototypeOf;var c=[][i]?n(n([][i]())):(De(n={},i,(function(){return this})),n),d=u.prototype=s.prototype=Object.create(c);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,De(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return o.prototype=u,De(d,"constructor",u),De(u,"constructor",o),o.displayName="GeneratorFunction",De(u,r,"GeneratorFunction"),De(d),De(d,r,"Generator"),De(d,i,(function(){return this})),De(d,"toString",(function(){return"[object Generator]"})),(Te=function(){return{w:l,m}})()}function De(e,n,t,i){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}De=function(e,n,t,i){if(n)r?r(e,n,{value:t,enumerable:!i,configurable:!i,writable:!i}):e[n]=t;else{var l=function(n,t){De(e,n,(function(e){return this._invoke(n,t,e)}))};l("next",0),l("throw",1),l("return",2)}},De(e,n,t,i)}function Pe(e,n){this.v=e,this.k=n}function Ee(e,n,t,i,r,l,a){try{var s=e[l](a),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(i,r)}function Be(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,l,a,s=[],o=!0,u=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;o=!1}else for(;!(o=(i=l.call(t)).done)&&(s.push(i.value),s.length!==n);o=!0);}catch(e){u=!0,r=e}finally{try{if(!o&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return Oe(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Oe(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var He=function(e){var n,t,i,l,a,s,o,u,c=e.isClosePreview,d=e.setIsClosePreview,m=e.isOpenPreview,v=e.campaignStatus,p=e.isCloseBuilder,f=e.setIsCloseBuilder,g=e.emailData,x=e.campaignID,j=e.selectedEmailIndex,_=e.emailType,y=e.automationData,w=e.setIsEmailBuilderOpen,b=Be((0,r.useState)("desktop"),2),N=b[0],M=b[1],S=Be((0,r.useState)(window.MRM_Vars.current_user_email),2),I=S[0],C=S[1],k=Be((0,r.useState)(null),2),R=k[0],V=k[1],T=Be((0,r.useState)(""),2),D=T[0],P=T[1],E=Be((0,r.useState)(""),2),B=E[0],O=E[1],H=Be((0,r.useState)(!1),2),Z=H[0],L=H[1],F=(null==g||null===(n=g.email_json)||void 0===n?void 0:n.editor)||(null==y||null===(t=y.json_body)||void 0===t?void 0:t.editor),q=F?{whiteSpace:"plain-text-editor"===F?"pre-wrap":"normal"}:{};(0,Q.A)(d,!0),(0,r.useEffect)((function(){"campaign"===_?W().then((function(e){var n;V(null==e||null===(n=e.email_data)||void 0===n?void 0:n.email_body)})):V(null==y?void 0:y.body)}),[c]);var W=function(){var e,n=(e=Ie().mark((function e(){var n;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0!==(null==g?void 0:g.id)?null==g?void 0:g.id:"",e.abrupt("return",(0,Ne.GN)(x,j,n).then((function(e){return e})));case 2:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(i,r){var l=e.apply(n,t);function a(e){Ee(l,i,r,a,s,"next",e)}function s(e){Ee(l,i,r,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}(),G=function(e){M(e)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:m&&!c?"mintmrm-template-modal active":"mintmrm-template-modal",children:(0,h.jsx)("div",{className:"template-modal-inner",children:(0,h.jsxs)("div",{className:"preview-modal-wrapper",children:[(0,h.jsx)("div",{className:"cross-icon",onClick:function(){d(!c),O("")},children:(0,h.jsx)(A.A,{})}),(0,h.jsx)("h2",{children:null===(i=window)||void 0===i||null===(i=i.MRM_Vars)||void 0===i||null===(i=i.mint_trans)||void 0===i?void 0:i.PreviewTest}),(0,h.jsxs)("div",{className:"preview-test-email-wrapper",children:[(0,h.jsxs)("div",{className:"preview-test-section",children:[(0,h.jsxs)("div",{className:"preview-email-header",children:[(0,h.jsxs)("div",{className:"responsive-view-section",children:[(0,h.jsx)("button",{className:"desktop"==N?"desktop-icon active":"desktop-icon",onClick:function(){return G("desktop")},children:(0,h.jsx)(_e.A,{})}),(0,h.jsx)("button",{className:"mobile"==N?"mobile-icon active":"mobile-icon",onClick:function(){return G("mobile")},children:(0,h.jsx)(be.A,{})})]}),(0,h.jsx)("div",{className:"edit-template-section",children:(0,h.jsx)("button",{className:"edit-template-btn",onClick:"draft"===v?function(){f(!p),d(!c),w(!0)}:function(){var e=new Blob([R],{type:"text/html"}),n=URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="mail-mint.html",t.click(),URL.revokeObjectURL(n)},children:"draft"===v?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ye.A,{}),null===(l=window)||void 0===l||null===(l=l.MRM_Vars)||void 0===l||null===(l=l.mint_trans)||void 0===l?void 0:l.EditTemplate]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(we.A,{}),null===(a=window)||void 0===a||null===(a=a.MRM_Vars)||void 0===a||null===(a=a.mint_trans)||void 0===a?void 0:a.ExportTemplate]})})})]}),(0,h.jsx)("div",{className:"template-modal-overflow",children:(0,h.jsx)("div",{className:"".concat("mobile"==N?"mobile-view":""),children:(0,h.jsx)("div",{style:q,dangerouslySetInnerHTML:{__html:R}})})}),(0,h.jsx)("div",{})]}),(0,h.jsxs)("div",{className:"test-email-section",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsxs)("label",{htmlFor:"email",children:[null===(s=window)||void 0===s||null===(s=s.MRM_Vars)||void 0===s||null===(s=s.mint_trans)||void 0===s?void 0:s.SendTestEmailTo,(0,h.jsxs)("span",{className:"mintmrm-tooltip",children:[(0,h.jsx)(Me,{}),(0,h.jsx)("p",{children:"Use commas to separate multiple emails."})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"at-the-rate-icon",children:(0,h.jsx)(je,{})}),(0,h.jsx)("input",{type:"email",id:"email",placeholder:null===(o=window)||void 0===o||null===(o=o.MRM_Vars)||void 0===o||null===(o=o.mint_trans)||void 0===o?void 0:o.EnterEmailAddress,value:I,onChange:function(e){return C(e.target.value)}})]})]}),(0,h.jsxs)("div",{className:"footer-btn",children:[(0,h.jsx)("div",{children:(0,h.jsx)("p",{className:"error"===D?"alert-message mintmrm-error":"alert-message mintmrm-success",children:B})}),(0,h.jsxs)("button",{className:"mintmrm-btn",onClick:function(){var e="campaign"===_?null==g?void 0:g.email_subject:null==y?void 0:y.subject;if(""===e)return O("A subject must be entered on the campaign setup step."),void P("error");O(""),L(!0);var n={to:I,from:null!=g&&g.sender_email?null==g?void 0:g.sender_email:null==y?void 0:y.sender_email,sender_name:null!=g&&g.sender_name?null==g?void 0:g.sender_name:null==y?void 0:y.sender_name,reply:null!=g&&g.reply_email?null==g?void 0:g.reply_email:null==y?void 0:y.reply_email,reply_name:null!=g&&g.reply_name?null==g?void 0:g.reply_name:null==y?void 0:y.reply_name,subject:e,content:R,current_user:window.MRM_Vars.current_userID,email_preview_text:null!=g&&g.email_preview_text?null==g?void 0:g.email_preview_text:null==y?void 0:y.email_preview_text,editor_type:F};(0,Ne.FI)(n).then((function(e){O(e.message),P(e.status),L(!1);var n=setTimeout((function(){O("")}),5e3);return function(){return clearTimeout(n)}}))},disabled:!!Z,children:[" ",null===(u=window)||void 0===u||null===(u=u.MRM_Vars)||void 0===u||null===(u=u.mint_trans)||void 0===u?void 0:u.Send," ",Z&&(0,h.jsx)("span",{className:"mintmrm-loader"})]})]})]})]})]})})})})};const Ze=(0,r.memo)(He);var Le,Fe,qe,We,Ge,ze=t(8282);function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Ye(e){return function(e){if(Array.isArray(e))return mn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(){var e=nn(),n=e.m(Qe),t=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function i(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===t||"GeneratorFunction"===(n.displayName||n.name))}var r={throw:1,return:2,break:3,continue:3};function l(e){var n,t;return function(i){n||(n={stop:function(){return t(i.a,2)},catch:function(){return i.v},abrupt:function(e,n){return t(i.a,r[e],n)},delegateYield:function(e,r,l){return n.resultName=r,t(i.d,Je(e),l)},finish:function(e){return t(i.f,e)}},t=function(e,t,r){i.p=n.prev,i.n=n.next;try{return e(t,r)}finally{n.next=i.n}}),n.resultName&&(n[n.resultName]=i.v,n.resultName=void 0),n.sent=i.v,n.next=i.n;try{return e.call(this,n)}finally{i.p=n.prev,i.n=n.next}}}return(Qe=function(){return{wrap:function(n,t,i,r){return e.w(l(n),t,i,r&&r.reverse())},isGeneratorFunction:i,mark:e.m,awrap:function(e,n){return new rn(e,n)},AsyncIterator:en,async:function(e,n,t,r,a){return(i(n)?$e:Xe)(l(e),n,t,r,a)},keys:Ke,values:Je}})()}function Je(e){if(null!=e){var n=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],t=0;if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}throw new TypeError(Ue(e)+" is not iterable")}function Ke(e){var n=Object(e),t=[];for(var i in n)t.unshift(i);return function e(){for(;t.length;)if((i=t.pop())in n)return e.value=i,e.done=!1,e;return e.done=!0,e}}function Xe(e,n,t,i,r){var l=$e(e,n,t,i,r);return l.next().then((function(e){return e.done?e.value:l.next()}))}function $e(e,n,t,i,r){return new en(nn().w(e,n,t,i),r||Promise)}function en(e,n){function t(i,r,l,a){try{var s=e[i](r),o=s.value;return o instanceof rn?n.resolve(o.v).then((function(e){t("next",e,l,a)}),(function(e){t("throw",e,l,a)})):n.resolve(o).then((function(e){s.value=e,l(s)}),(function(e){return t("throw",e,l,a)}))}catch(e){a(e)}}var i;this.next||(tn(en.prototype),tn(en.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),tn(this,"_invoke",(function(e,r,l){function a(){return new n((function(n,i){t(e,l,n,i)}))}return i=i?i.then(a,a):a()}),!0)}function nn(){var e,n,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function l(t,i,r,l){var o=i&&i.prototype instanceof s?i:s,u=Object.create(o.prototype);return tn(u,"_invoke",function(t,i,r){var l,s,o,u=0,c=r||[],d=!1,m={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return l=n,s=0,o=e,m.n=t,a}};function v(t,i){for(s=t,o=i,n=0;!d&&u&&!r&&n<c.length;n++){var r,l=c[n],v=m.p,p=l[2];t>3?(r=p===i)&&(o=l[(s=l[4])?5:(s=3,3)],l[4]=l[5]=e):l[0]<=v&&((r=t<2&&v<l[1])?(s=0,m.v=i,m.n=l[1]):v<p&&(r=t<3||l[0]>i||i>p)&&(l[4]=t,l[5]=i,m.n=p,s=0))}if(r||t>1)return a;throw d=!0,i}return function(r,c,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&v(c,p),s=c,o=p;(n=s<2?e:o)||!d;){l||(s?s<3?(s>1&&(m.n=-1),v(s,o)):m.n=o:m.v=o);try{if(u=2,l){if(s||(r="next"),n=l[r]){if(!(n=n.call(l,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,s<2&&(s=0)}else 1===s&&(n=l.return)&&n.call(l),s<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),s=1);l=e}else if((n=(d=m.n<0)?o:t.call(i,m))!==a)break}catch(n){l=e,s=1,o=n}finally{u=1}}return{value:n,done:d}}}(t,r,l),!0),u}var a={};function s(){}function o(){}function u(){}n=Object.getPrototypeOf;var c=[][i]?n(n([][i]())):(tn(n={},i,(function(){return this})),n),d=u.prototype=s.prototype=Object.create(c);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,tn(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return o.prototype=u,tn(d,"constructor",u),tn(u,"constructor",o),o.displayName="GeneratorFunction",tn(u,r,"GeneratorFunction"),tn(d),tn(d,r,"Generator"),tn(d,i,(function(){return this})),tn(d,"toString",(function(){return"[object Generator]"})),(nn=function(){return{w:l,m}})()}function tn(e,n,t,i){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}tn=function(e,n,t,i){if(n)r?r(e,n,{value:t,enumerable:!i,configurable:!i,writable:!i}):e[n]=t;else{var l=function(n,t){tn(e,n,(function(e){return this._invoke(n,t,e)}))};l("next",0),l("throw",1),l("return",2)}},tn(e,n,t,i)}function rn(e,n){this.v=e,this.k=n}function ln(e,n,t,i,r,l,a){try{var s=e[l](a),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(i,r)}function an(e){return function(){var n=this,t=arguments;return new Promise((function(i,r){var l=e.apply(n,t);function a(e){ln(l,i,r,a,s,"next",e)}function s(e){ln(l,i,r,a,s,"throw",e)}a(void 0)}))}}function sn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function on(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?sn(Object(t),!0).forEach((function(n){un(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function un(e,n,t){return(n=function(e){var n=function(e){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=Ue(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function cn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,l,a,s=[],o=!0,u=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;o=!1}else for(;!(o=(i=l.call(t)).done)&&(s.push(i.value),s.length!==n);o=!0);}catch(e){u=!0,r=e}finally{try{if(!o&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(e,n)||dn(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,n){if(e){if("string"==typeof e)return mn(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mn(e,n):void 0}}function mn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var vn={email_subject:"",email_body:"",email_json:"",json_data:null,delay_count:0,delay_value:"Minutes",email_preview_text:"",sender_name:null===(Le=window.MRM_Vars)||void 0===Le?void 0:Le.email_settings.from_name,sender_email:null===(Fe=window.MRM_Vars)||void 0===Fe?void 0:Fe.email_settings.from_email,reply_name:null===(qe=window.MRM_Vars)||void 0===qe?void 0:qe.email_settings.reply_name,reply_email:null===(We=window.MRM_Vars)||void 0===We?void 0:We.email_settings.reply_email,toError:null,senderEmailError:null,publishable:!0,delay_option:"timePeriod",scheduleDate:(null===(Ge=window.MRM_Vars)||void 0===Ge?void 0:Ge.local_time)||(new Date).toISOString()};function pn(e){var n,t,f,_,N,R,A,T,D,P,E,B,O,H,Z,L,F,q,W,G,z,U,Q,J,K,X,$,ee,ne,te,ce,me,ve,je,_e,ye,we,be,Ne,Me,Se,Ie,Ce,ke,Re,Ve,Ae,Te,De,Pe,Ee,Be,Oe,He,Le,Fe,qe,We,Ge,Ue,Je,Ke,Xe,$e,en,nn,tn,rn,ln,sn,un,mn,pn,hn,fn,gn,xn,jn,_n,yn,wn,bn,Nn,Mn,Sn,In,Cn,kn,Rn,Vn,An,Tn,Dn,Pn,En,Bn,On,Hn,Zn,Ln,Fn,qn;(0,oe.G)("mrm-admin","campaigns");var Wn=(0,l.Zp)(),Gn=window.MRM_Vars.is_mailmint_pro_license_active,zn=cn((0,r.useState)(0),2),Un=zn[0],Yn=zn[1],Qn=cn((0,r.useState)(0),2),Jn=Qn[0],Kn=Qn[1],Xn=cn((0,r.useState)(0),2),$n=Xn[0],et=Xn[1],nt=cn((0,r.useState)(0),2),tt=nt[0],it=nt[1],rt=cn((0,r.useState)(0),2),lt=rt[0],at=rt[1],st=cn((0,r.useState)(0),2),ot=st[0],ut=st[1],ct=cn((0,r.useState)([on({},vn)]),2),dt=ct[0],mt=ct[1],vt=cn((0,r.useState)(!1),2),pt=vt[0],ht=vt[1],ft=cn((0,r.useState)("success"),2),gt=ft[0],xt=ft[1],jt=cn((0,r.useState)(""),2),_t=jt[0],yt=jt[1],wt=cn((0,r.useState)(0),2),bt=wt[0],Nt=wt[1],Mt=cn((0,r.useState)(""),2),St=Mt[0],It=Mt[1],Ct=cn((0,r.useState)(""),2),kt=Ct[0],Rt=Ct[1],Vt=cn((0,r.useState)(),2),At=Vt[0],Tt=Vt[1],Dt=cn((0,r.useState)(0),2),Pt=Dt[0],Et=Dt[1],Bt=cn((0,r.useState)(),2),Ot=Bt[0],Ht=Bt[1],Zt=cn((0,r.useState)(),2),Lt=Zt[0],Ft=Zt[1],qt=cn((0,r.useState)([]),2),Wt=qt[0],Gt=qt[1],zt=cn((0,r.useState)([]),2),Ut=zt[0],Yt=zt[1],Qt=cn((0,r.useState)([]),2),Jt=Qt[0],Kt=Qt[1],Xt=cn((0,r.useState)(!0),2),$t=Xt[0],ei=Xt[1],ni=cn((0,r.useState)(!0),2),ti=ni[0],ii=ni[1],ri=cn((0,r.useState)(!1),2),li=ri[0],ai=ri[1],si=cn((0,r.useState)(""),2),oi=si[0],ui=si[1],ci=cn((0,r.useState)(""),2),di=ci[0],mi=ci[1],vi=cn((0,r.useState)(),2),pi=vi[0],hi=vi[1],fi=cn((0,r.useState)(),2),gi=fi[0],xi=fi[1],ji=cn((0,r.useState)(!0),2),_i=ji[0],yi=ji[1],wi=cn((0,r.useState)(!0),2),bi=wi[0],Ni=wi[1],Mi=cn((0,r.useState)({}),2),Si=Mi[0],Ii=Mi[1],Ci=cn((0,r.useState)(!1),2),ki=Ci[0],Ri=Ci[1],Vi=cn((0,r.useState)(!0),2),Ai=Vi[0],Ti=Vi[1],Di=cn((0,r.useState)(""),2),Pi=Di[0],Ei=Di[1],Bi=cn((0,r.useState)(""),2),Oi=Bi[0],Hi=Bi[1],Zi=cn((0,r.useState)(!1),2),Li=Zi[0],Fi=Zi[1],qi=cn((0,r.useState)("none"),2),Wi=qi[0],Gi=qi[1],zi=cn((0,r.useState)(!1),2),Ui=zi[0],Yi=zi[1],Qi=cn((0,r.useState)(!1),2),Ji=Qi[0],Ki=Qi[1],Xi=cn((0,r.useState)(!1),2),$i=Xi[0],er=Xi[1],nr=(0,r.useRef)(null),tr=(0,r.useRef)(null),ir=(0,r.useRef)(null),rr=cn((0,r.useState)(!1),2),lr=rr[0],ar=rr[1],sr=cn((0,r.useState)(!1),2),or=sr[0],ur=(sr[1],cn((0,r.useState)(null),2)),cr=ur[0],dr=ur[1],mr=cn((0,r.useState)(!1),2),vr=mr[0],pr=mr[1],hr=cn((0,r.useState)(!1),2),fr=hr[0],gr=hr[1],xr=cn((0,r.useState)(!1),2),jr=xr[0],_r=xr[1],yr=cn((0,r.useState)({}),2),wr=yr[0],br=yr[1],Nr=cn((0,r.useState)("none"),2),Mr=Nr[0],Sr=Nr[1],Ir=cn((0,r.useState)(""),2),Cr=Ir[0],kr=Ir[1],Rr=cn((0,r.useState)(!1),2),Vr=Rr[0],Ar=Rr[1],Tr=cn((0,r.useState)(!0),2),Dr=Tr[0],Pr=Tr[1],Er=(0,r.useRef)(null);(0,I.c7)(Er,Ar),(0,I.c7)(nr,Ri),(0,I.c7)(ir,ar);var Br=cn((0,r.useState)("none"),2),Or=Br[0],Hr=Br[1],Zr=cn((0,r.useState)(!0),2),Lr=Zr[0],Fr=Zr[1],qr=cn((0,r.useState)(!1),2),Wr=qr[0],Gr=qr[1],zr=cn((0,r.useState)(""),2),Ur=zr[0],Yr=zr[1],Qr=cn((0,r.useState)(!0),2),Jr=Qr[0],Kr=Qr[1],Xr=cn((0,r.useState)(!0),2),$r=Xr[0],el=Xr[1],nl=cn((0,r.useState)(!0),2),tl=nl[0],il=nl[1],rl=cn((0,r.useState)(""),2),ll=rl[0],al=rl[1],sl=cn((0,r.useState)(""),2),ol=sl[0],ul=sl[1],cl=cn((0,r.useState)(!1),2),dl=(cl[0],cl[1]),ml=cn((0,r.useState)(!1),2),vl=(ml[0],ml[1]),pl=cn((0,r.useState)({}),2),hl=pl[0],fl=pl[1],gl=(0,l.g)(),xl=gl.id,jl=gl.type,_l=(0,l.zy)(),yl=cn((0,r.useState)(!1),2),wl=yl[0],bl=yl[1],Nl=cn((0,r.useState)(!1),2),Ml=Nl[0],Sl=Nl[1];(0,r.useEffect)((function(){var e=!0;return e&&(document.title="Edit Campaign - Mail Mint","sequence-automation"!==jl&&"sequence-campaign"!==jl&&"recurring"!==Oi||Gn||Wn("../campaigns/regular")),function(){e=!1}}),[Oi]);var Il=[{value:null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.Minutes,id:"minutes"},{value:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.Hours,id:"hours"},{value:null===(f=window)||void 0===f||null===(f=f.MRM_Vars)||void 0===f||null===(f=f.mint_trans)||void 0===f?void 0:f.Days,id:"days"},{value:null===(_=window)||void 0===_||null===(_=_.MRM_Vars)||void 0===_||null===(_=_.mint_trans)||void 0===_?void 0:_.Weeks,id:"weeks"},{value:null===(N=window)||void 0===N||null===(N=N.MRM_Vars)||void 0===N||null===(N=N.mint_trans)||void 0===N?void 0:N.Months,id:"months"}];if((0,a.B6)({path:"campaign/edit/:id"},_l.pathname)){var Cl,kl=function(e){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dn(e))){n&&(e=n);var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw r}}}}(document.getElementsByClassName("notice"));try{for(kl.s();!(Cl=kl.n()).done;)Cl.value.style.display="none"}catch(e){kl.e(e)}finally{kl.f()}}var Rl=function(){var e=an(Qe().mark((function e(n){var t,i,r;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=n.target).name,i=t.value,er(!0),Yi(!0),It(i.slice(0,150)),(null==i?void 0:i.length)>150?Ii(on(on({},Si),{},{title:null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.CampaignTitleStringLimit})):Ii(on(on({},Si),{},{title:""}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Vl=function(e,n,t){Gn?(Ht(n),Ft(n),Sr("block"),Yr(t)):bl(!0)};function Al(){yi((function(e){return!e}))}(0,r.useEffect)((function(){var e=!0;if(e)return(0,ae.VK)(xl).then((function(e){var n,t,i,r,l,a,s,o=e.data,u=(null==o||null===(n=o.emails)||void 0===n?void 0:n.length)>0?o.emails:[on({},vn)];Gt(null!==(t=null==o||null===(i=o.meta)||void 0===i||null===(i=i.recipients)||void 0===i?void 0:i.lists)&&void 0!==t?t:[]),Yt(null!==(r=null==o||null===(l=o.meta)||void 0===l||null===(l=l.recipients)||void 0===l?void 0:l.tags)&&void 0!==r?r:[]),Gn&&Kt(null!==(a=null==o||null===(s=o.meta)||void 0===s||null===(s=s.recipients)||void 0===s?void 0:s.segments)&&void 0!==a?a:[]),mt(u),(0,ae.F_)(u.length-1).then((function(e){Nt(e)})),It(null==o?void 0:o.title),Rt(null==o?void 0:o.scheduled_at),Ei(null==o?void 0:o.status),Hi(null==o?void 0:o.type),null!=o&&o.recurringData&&fl(null==o?void 0:o.recurringData),"draft"!==(null==o?void 0:o.status)&&"suspended"!==(null==o?void 0:o.status)?(Yn(null==o?void 0:o.total_open),Kn(null==o?void 0:o.total_click),et(null==o?void 0:o.total_bounced),it(null==o?void 0:o.unsubscribed_rate),ut(null==o?void 0:o.total_unsubscribe),at(null==o?void 0:o.total_recipients)):at(null==o?void 0:o.total_recipients),Ti(!1),"active"!==o.status&&"archived"!==o.status&&"schedule"!==o.status||Fi(!0)})).then((function(){return pr(!vr)})),function(){e=!1}}),[_i,bi]),(0,r.useEffect)((function(){var e,n,t,i,r=!0;r&&("campaign-created"!==(null===(e=_l.state)||void 0===e?void 0:e.status)||null!==(n=_l.state)&&void 0!==n&&n.openTemplate||(xt("success"),ht(!0),yt(null===(i=_l.state)||void 0===i?void 0:i.message)),null!==(t=_l.state)&&void 0!==t&&t.openTemplate&&(ii(!0),ei(!1)),(0,se.bd)(!1,ht));return function(){r=!1}}),[null===(R=_l.state)||void 0===R?void 0:R.openTemplate]);var Tl=function(){var e=an(Qe().mark((function e(){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"sequence-automation"===jl?(0,ae.u9)(dt).then((function(e){var n;br(null==e?void 0:e.campaignErrors),null!=e&&e.isPublishable?Gi("block"):Pl(null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.RegularCampaignTooltip,"warning")})):(0,ae.u9)(dt,Pt).then((function(e){var n;br(null==e?void 0:e.campaignErrors),null!=e&&e.isPublishable?Gi("block"):Pl(null===(n=window)||void 0===n||null===(n=n.MRM_Vars)||void 0===n||null===(n=n.mint_trans)||void 0===n?void 0:n.RegularCampaignTooltip,"warning")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dl=function(){var e=an(Qe().mark((function e(n){var t,i=arguments;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(i.length>1&&void 0!==i[1])||i[1],"draft"!==n&&"suspended"!==n?"sequence-automation"===jl?(0,ae.u9)(dt).then((function(e){var i;br(null==e?void 0:e.campaignErrors),null!=e&&e.isPublishable||"draft"===n?El(n,t):t&&Pl(null===(i=window)||void 0===i||null===(i=i.MRM_Vars)||void 0===i||null===(i=i.mint_trans)||void 0===i?void 0:i.RegularCampaignTooltip,"warning")})):(0,ae.u9)(dt,Pt).then((function(e){var i;br(null==e?void 0:e.campaignErrors),null!=e&&e.isPublishable||"draft"===n?El(n,t):t&&Pl(null===(i=window)||void 0===i||null===(i=i.MRM_Vars)||void 0===i||null===(i=i.mint_trans)||void 0===i?void 0:i.RegularCampaignTooltip,"warning")})):El("draft",t);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Pl=function(e,n){xt(n),ht(!0),yt(e),(0,se.bd)(!1,ht)},El=function(e,n){Ki(!0);var t={title:St,recipients:{lists:null==Wt?void 0:Wt.map((function(e){return{id:e.id,title:e.title}})),tags:null==Ut?void 0:Ut.map((function(e){return{id:e.id,title:e.title}})),segments:Jt.map((function(e){return{id:e.id,title:e.title}}))},type:"sequence-automation"===jl?"automation":"sequence-campaign"===jl?"sequence":"recurring"===jl?"recurring":"regular",status:e,emails:dt.map((function(e){return{id:null==e?void 0:e.id,email_subject:null==e?void 0:e.email_subject,email_preview_text:null==e?void 0:e.email_preview_text,sender_email:null==e?void 0:e.sender_email,reply_email:null==e?void 0:e.reply_email,delay_count:null==e?void 0:e.delay_count,delay_value:null==e?void 0:e.delay_value,sender_name:null==e?void 0:e.sender_name,reply_name:null==e?void 0:e.reply_name,email_body:"Dummy Email Body",email_json:null==e?void 0:e.email_json,delay_option:null==e?void 0:e.delay_option,scheduleDate:e.scheduleDate}})),campaign_id:xl};t.totalRecipients=Pt,Ii({}),(0,ae.VB)(t).then((function(e){201===e.code?(Tt(e.data.campaign.last_email_id),n&&(xt("success"),ht(!0),yt(null==e?void 0:e.message),Al(),Yi(!1),er(!1))):n&&(xt("warning"),ht(!0),yt(null==e?void 0:e.message)),Ki(!1)})),(0,se.bd)(!1,ht)},Bl=(0,r.useCallback)(function(){var e=an(Qe().mark((function e(n){var t,i,r,l,a,s,o=arguments;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>1&&void 0!==o[1]?o[1]:"",i=o.length>2&&void 0!==o[2]?o[2]:{},r=o.length>3?o[3]:void 0,l=new Date(window.MRM_Vars.local_time),a=new Date(cr),n&&("recurring"===t||l<a)&&((s={title:St,recipients:{lists:null==Wt?void 0:Wt.map((function(e){return{id:e.id,title:e.title}})),tags:null==Ut?void 0:Ut.map((function(e){return{id:e.id,title:e.title}})),segments:null==Jt?void 0:Jt.map((function(e){return{id:e.id,title:e.title}}))},type:"sequence-automation"===jl?"automation":"sequence-campaign"===jl?"sequence":"recurring"===t?"recurring":"regular",status:"schedule",scheduled_at:cr,emails:dt.map((function(e){return{id:null==e?void 0:e.id,email_subject:e.email_subject,email_preview_text:e.email_preview_text,sender_email:e.sender_email,reply_email:e.reply_email,delay_count:e.delay_count,delay_value:e.delay_value,sender_name:e.sender_name,reply_name:e.reply_name,email_body:"Dummy Email Body",email_json:e.email_json,delay_option:e.delay_option,scheduleDate:e.scheduleDate}})),campaign_id:xl}).totalRecipients=Pt,"recurring"===t&&(s.scheduled_at=r,s.recurringData=i||null),(0,ae.VB)(s).then((function(e){201===e.code?(xt("success"),ht(!0),yt(null==e?void 0:e.message),Al(),Yi(!1),er(!1)):(xt("warning"),ht(!0),yt(null==e?void 0:e.message))})),Gi("none"),(0,se.bd)(!1,ht));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[Wi,cr]),Ol=(0,r.useCallback)(function(){var e=an(Qe().mark((function e(n){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ai(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[li]),Hl=(0,r.useCallback)(function(){var e=an(Qe().mark((function e(n){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gi(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[Wi]),Zl=(0,r.useCallback)(function(){var e=an(Qe().mark((function e(n){var t;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&((t={title:St,recipients:{lists:null==Wt?void 0:Wt.map((function(e){return{id:e.id,title:e.title}})),tags:null==Ut?void 0:Ut.map((function(e){return{id:e.id,title:e.title}})),segments:Jt.map((function(e){return{id:e.id,title:e.title}}))},type:"sequence-automation"===jl?"automation":"sequence-campaign"===jl?"sequence":"recurring"===jl?"recurring":"regular",status:"active",emails:dt.map((function(e){return{id:null==e?void 0:e.id,email_subject:e.email_subject,email_preview_text:e.email_preview_text,sender_email:e.sender_email,reply_email:e.reply_email,delay_count:e.delay_count,delay_value:e.delay_value,sender_name:e.sender_name,reply_name:e.reply_name,email_body:"Dummy Email Body",email_json:e.email_json,delay_option:e.delay_option,scheduleDate:e.scheduleDate}})),campaign_id:xl}).totalRecipients=Pt,(0,ae.VB)(t).then((function(e){201===e.code?(xt("success"),ht(!0),yt(null==e?void 0:e.message),Al(),Yi(!1),er(!1)):(xt("warning"),ht(!0),yt(null==e?void 0:e.message))})),Gi("none"),(0,se.bd)(!1,ht));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[Wi]),Ll=(0,r.useCallback)(function(){var e=an(Qe().mark((function e(n){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(mt((function(e){var n=Ye(e);return n.splice(gi,1),Nt(gi<n.length?gi:Math.max(0,gi-1)),(0,ae.Nm)(gi<n.length?gi:Math.max(0,gi-1)),n})),xl&&pi&&(0,ae.YD)(xl,pi).then((function(e){200===e.code?(xt("success"),ht(!0),yt(e.message),Al()):Ii(on(on({},Si),{},{title:null==e?void 0:e.message}))}))),ai(!1);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[li]),Fl=function(e,n,t){Yi(!0),er(!0),mt((function(i){var r,l,a=Ye(i);("email_subject"===t?Ql(e.target.selectionStart):"email_preview_text"===t&&Xl(e.target.selectionStart),"email_subject"===t||"email_preview_text"===t)&&("email_subject"===t&&(n.length>190?Ii(on(on({},Si),{},{subject:null===(r=window)||void 0===r||null===(r=r.MRM_Vars)||void 0===r||null===(r=r.mint_trans)||void 0===r?void 0:r.EmailSubStringLimit})):Ii(on(on({},Si),{},{subject:""}))),"email_preview_text"==t&&(n.length>190?Ii(on(on({},Si),{},{preview:null===(l=window)||void 0===l||null===(l=l.MRM_Vars)||void 0===l||null===(l=l.mint_trans)||void 0===l?void 0:l.EmailPreviewStringLimit})):Ii(on(on({},Si),{},{preview:""}))));if("scheduleDate"===t){var s,o=new Date((null===(s=window.MRM_Vars)||void 0===s?void 0:s.local_time)||Date.now());new Date(n)<o?Pr(!1):(dr(n),Ar(!1),Pr(!0))}return"sender_email"==t&&function(e,n){return new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{1,}))$/).test(n)?(Ii({}),!0):(Ii(on(on({},Si),{},{email:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.EmailValidationMsg})),!1);var t}(a[bt][t],n),"reply_email"==t&&function(e,n){return new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{1,}))$/).test(n)?(Ii({}),!0):(Ii(on(on({},Si),{},{replyEmail:null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.EmailValidationMsg})),!1);var t}(a[bt][t],n),a[bt][t]=n,a}))},ql=function(){var e=an(Qe().mark((function e(){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dl("draft",!1);case 2:ii(!0),ei(!1),Sl(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Wl=function(){var e=an(Qe().mark((function e(){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dl("sequence-automation"===jl?Pi:"draft",!1);case 2:Gr(!0),Fr(!0),Hr(!Or),ii(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gl=function(e){mt((function(n){var t=Ye(n);return t[bt].body=e,t}))};(0,le.A)((function(e){Ui&&(e.preventDefault(),e.returnValue="")}));var zl,Ul=function(){Ri(!ki)},Yl=cn((0,r.useState)(0),2),Ql=(Yl[0],Yl[1]),Jl=function(){var e=an(Qe().mark((function e(n){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mt((function(e){var t=Ye(e);return n.length>200||(t[bt].email_subject=n),t}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Kl=cn((0,r.useState)(0),2),Xl=(Kl[0],Kl[1]),$l=function(){var e=an(Qe().mark((function e(n){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mt((function(e){var t=Ye(e);return n.length>200||(t[bt].email_preview_text=n),t}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ea=function(){var e=an(Qe().mark((function e(){var n,t,i,r;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",i="",r=(r=Jt.map((function(e,n){return e.id}))).join(", "),0===(null===(n=r)||void 0===n?void 0:n.length)&&(t=Wt.map((function(e){return e.id})),i=Ut.map((function(e){return e.id})),t=t.join(", "),i=i.join(", ")),""===t&&""===i&&""===r){e.next=9;break}return e.abrupt("return",(0,ae.sO)(xl||0,t,i,r).then((function(e){if(200===(null==e?void 0:e.code)){var n=parseInt(e.data);return Et(n),n}})));case 9:return Et(0),e.abrupt("return",0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),na=function(){var e=an(Qe().mark((function e(){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$i?gr(!0):(gr(!1),Wn("/campaigns/".concat("sequence-automation"===jl?"automation":"sequence-campaign"===jl?"sequence":"recurring"===jl?"recurring":"regular")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ta=(0,r.useCallback)((function(){gr(!1)}),[fr]),ia=(0,r.useCallback)((function(){gr(!1),Wn("/campaigns/".concat("sequence-automation"===jl?"automation":"sequence-campaign"===jl?"sequence":"recurring"===jl?"recurring":"regular"))}),[fr]);return(0,r.useEffect)((function(){var e=!0;return!e||"draft"!==Pi&&"suspended"!==Pi||ea().then(),function(){e=!1}}),[ki,vr]),(0,r.useEffect)((function(){al(""),dl(!1)}),[or]),(0,r.useEffect)((function(){ul(""),vl(!1)}),[lr]),(0,r.useEffect)((function(){dl(!0)}),[ll]),(0,r.useEffect)((function(){vl(!0)}),[ol]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"mintmrm-add-campaign",children:[(0,h.jsx)(c.A,{confirmModal:fr,onCancelConfirm:ta,onCloseConfirm:ia,header:null===(A=window)||void 0===A||null===(A=A.MRM_Vars)||void 0===A||null===(A=A.mint_trans)||void 0===A?void 0:A.CloseCampaign,label:null===(T=window)||void 0===T||null===(T=T.MRM_Vars)||void 0===T||null===(T=T.mint_trans)||void 0===T?void 0:T.CloseCampaignLabel}),(0,h.jsx)("div",{className:"single-campaign-header",children:(0,h.jsxs)("div",{className:"mintmrm-container",children:[(0,h.jsxs)("div",{className:"left-section",children:[(0,h.jsx)("div",{className:"back-button",onClick:function(){return(0,ae.Nm)(0)},children:(0,h.jsxs)("button",{onClick:na,children:[(0,h.jsx)(v.A,{})," ",null===(D=window)||void 0===D||null===(D=D.MRM_Vars)||void 0===D||null===(D=D.mint_trans)||void 0===D?void 0:D.Campaigns]})}),(0,h.jsx)("h2",{className:"campaign-title",children:null===(P=window)||void 0===P||null===(P=P.MRM_Vars)||void 0===P||null===(P=P.mint_trans)||void 0===P?void 0:P.EditCampaign})]}),(0,h.jsx)("div",{className:"right-section",children:"success"===(null===(E=window.MRM_Vars.smtp_warring)||void 0===E?void 0:E.status)&&tl&&(0,h.jsx)(ge.A,{setMailerWarning:il,warningMessage:null===(B=window.MRM_Vars.smtp_warring)||void 0===B?void 0:B.message})})]})}),Ai?(0,h.jsx)(C.A,{type:"table"}):(0,h.jsxs)("div",{className:"mintmrm-container",children:[("archived"===Pi||"active"===Pi)&&(0,h.jsxs)("div",{className:"contact-info-wrapper",children:[(0,h.jsx)(de,{source:(0,h.jsx)(g,{}),cardTitle:null===(O=window)||void 0===O||null===(O=O.MRM_Vars)||void 0===O||null===(O=O.mint_trans)||void 0===O?void 0:O.TotalOpen,totalAmount:Un,rate:"high"}),(0,h.jsx)(de,{source:(0,h.jsx)(y,{}),cardTitle:null===(H=window)||void 0===H||null===(H=H.MRM_Vars)||void 0===H||null===(H=H.mint_trans)||void 0===H?void 0:H.TotalClick,totalAmount:Jn,rate:"low"}),(0,h.jsx)(de,{source:(0,h.jsx)(M,{}),cardTitle:null===(Z=window)||void 0===Z||null===(Z=Z.MRM_Vars)||void 0===Z||null===(Z=Z.mint_trans)||void 0===Z?void 0:Z.TotalBounce,totalAmount:$n,rate:"low"}),(0,h.jsx)(pe,{id:xl,cardTitle:null===(L=window)||void 0===L||null===(L=L.MRM_Vars)||void 0===L||null===(L=L.mint_trans)||void 0===L?void 0:L.TotalUnsubscribe,current_subscriber:lt,current_unsubscriber:ot,percentage:tt+"%",type:jl})]}),(0,h.jsxs)("div",{className:"add-campaign-wrapper",children:[(0,h.jsxs)("div",{className:"add-email-section",children:[dt.map((function(e,n){var t,r,l,a,s,o,u,c,d;return(0,h.jsxs)("div",{className:"email-box",children:[(0,h.jsxs)("div",{className:bt!==n?"email-select-section":"email-select-section selected",onClick:function(){return function(e){Nt(e),(0,ae.Nm)(e)}(n)},children:[(0,h.jsx)("div",{className:void 0===(null===(t=wr[n])||void 0===t?void 0:t.publishable)||null!==(r=wr[n])&&void 0!==r&&r.publishable||null!=e&&null!==(l=e.email_subject)&&void 0!==l&&l.length&&null!=e&&null!==(a=e.sender_email)&&void 0!==a&&a.length&&null!=e&&null!==(s=e.sender_name)&&void 0!==s&&s.length&&null!=e&&null!==(o=e.reply_email)&&void 0!==o&&o.length&&null!=e&&null!==(u=e.reply_name)&&void 0!==u&&u.length&&null!=e&&null!==(c=e.json_data)&&void 0!==c&&c.length&&("sequence-automation"===jl||Pt)?"email-icon-section":"email-icon-section required-field-missing",children:(0,h.jsx)(x.A,{})}),"sequence-automation"===jl||"sequence-campaign"===jl?(0,h.jsx)("h5",{children:sprintf((0,i.__)("Email %s","mrm"),n+1)}):(0,h.jsx)("h5",{children:null===(d=window)||void 0===d||null===(d=d.MRM_Vars)||void 0===d||null===(d=d.mint_trans)||void 0===d?void 0:d.Email}),n>0&&(0,h.jsx)("div",{className:"delete-option",onClick:function(){return function(e,n){var t,i;ai(!0),ui(null===(t=window)||void 0===t||null===(t=t.MRM_Vars)||void 0===t||null===(t=t.mint_trans)||void 0===t?void 0:t.DeleteEmailSequence),mi(null===(i=window)||void 0===i||null===(i=i.MRM_Vars)||void 0===i||null===(i=i.mint_trans)||void 0===i?void 0:i.DeleteEmailSequenceMsg),xi(e),hi(n)}(n,e.id)},children:(0,h.jsx)(m.A,{})})]}),("sequence-automation"===jl||"sequence-campaign"===jl)&&(0,h.jsx)("div",{className:"link-line"})]},"emails-".concat(n))})),("sequence-automation"===jl||"sequence-campaign"===jl)&&(0,h.jsx)("div",{className:"active"===Pi||"archived"===Pi||"schedule"===Pi?"add-another-email disable-btn":"add-another-email",onClick:function(){"active"!==Pi&&"archived"!==Pi&&"schedule"!==Pi&&mt((function(e){return Nt(e.length),(0,ae.Nm)(e.length),[].concat(Ye(e),[on({},vn)])}))},children:(0,h.jsx)(w.A,{})})]}),(0,h.jsxs)("div",{className:"email-content-section",children:[(0,h.jsxs)("div",{className:"email-container",children:[0===bt&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"email-title input-item",children:[(0,h.jsx)("label",{children:null===(F=window)||void 0===F||null===(F=F.MRM_Vars)||void 0===F||null===(F=F.mint_trans)||void 0===F?void 0:F.EmailTitle}),(0,h.jsxs)("div",{className:"input-title-wrapper",children:[(0,h.jsx)("input",{maxLength:151,type:"text",name:"title",value:St,onChange:function(e){return Rl(e)},placeholder:null===(q=window)||void 0===q||null===(q=q.MRM_Vars)||void 0===q||null===(q=q.mint_trans)||void 0===q?void 0:q.EmailSubTitlePlaceHolder,disabled:Li}),(0,h.jsx)("p",{className:null!=Si&&Si.title?"mintmrm-alert mintmrm-error error-message show":"mintmrm-alert mintmrm-error error-message",children:null==Si?void 0:Si.title})]})]}),("regular"===jl||"recurring"===jl||"sequence-campaign"===jl)&&(0,h.jsx)("div",{className:"email-to input-item",children:(0,h.jsxs)("div",{className:"select-options",ref:nr,children:[(0,h.jsxs)("label",{children:[null===(W=window)||void 0===W||null===(W=W.MRM_Vars)||void 0===W||null===(W=W.mint_trans)||void 0===W?void 0:W.To,":",(0,h.jsx)("span",{className:"mint-required-sign",children:"*"})]}),0==(null==Wt?void 0:Wt.length)&&0==(null==Ut?void 0:Ut.length)&&0==(null==Jt?void 0:Jt.length)?(0,h.jsxs)("button",{className:"all-recipients",onClick:Ul,disabled:Li,children:[null===(G=window)||void 0===G||null===(G=G.MRM_Vars)||void 0===G||null===(G=G.mint_trans)||void 0===G?void 0:G.SelectRecipients,ki?(0,h.jsx)(S.A,{}):(0,h.jsx)(p.A,{})]}):(0,h.jsxs)("button",{className:"all-recipients selected show",onClick:Ul,disabled:Li,children:[(null==Jt?void 0:Jt.length)>0?(0,h.jsxs)("span",{className:"segments",children:[null==Jt?void 0:Jt.length," Segments"]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{className:"tags",children:[null==Wt?void 0:Wt.length,null===(z=window)||void 0===z||null===(z=z.MRM_Vars)||void 0===z||null===(z=z.mint_trans)||void 0===z?void 0:z.Lists]}),(0,h.jsx)("span",{className:"from",children:null===(U=window)||void 0===U||null===(U=U.MRM_Vars)||void 0===U||null===(U=U.mint_trans)||void 0===U?void 0:U.and}),(0,h.jsxs)("span",{className:"lists",children:[null==Ut?void 0:Ut.length,null===(Q=window)||void 0===Q||null===(Q=Q.MRM_Vars)||void 0===Q||null===(Q=Q.mint_trans)||void 0===Q?void 0:Q.Tags]})]}),(0,h.jsxs)("span",{className:"recipients",children:["draft"===Pi||"suspended"===Pi?Pt:lt," ",null===(J=window)||void 0===J||null===(J=J.MRM_Vars)||void 0===J||null===(J=J.mint_trans)||void 0===J?void 0:J.Recipients]}),ki?(0,h.jsx)(S.A,{}):(0,h.jsx)(p.A,{})]}),("draft"===Pi||"suspended"===Pi)&&(0,h.jsx)(ue.A,{dropDown:ki,setIsUnload:Yi,setRecipientTags:Yt,recipientTags:Ut,setRecipientLists:Gt,recipientLists:Wt,setRecipientSegments:Kt,recipientSegments:Jt,addSegments:!0,setIsChange:er}),void 0!==(null===(K=wr[0])||void 0===K?void 0:K.publishable)&&!(null!==(X=wr[0])&&void 0!==X&&X.publishable)&&!Pt&&("draft"===Pi||"suspended"===Pi)&&(0,h.jsx)("p",{className:"mintmrm-alert mintmrm-error error-message show",children:null===($=window)||void 0===$||null===($=$.MRM_Vars)||void 0===$||null===($=$.mint_trans)||void 0===$?void 0:$.RecipientAlertMsg})]})})]}),bt>0&&("sequence-automation"===jl?(0,h.jsxs)("div",{className:"sequence-email-delay input-item",children:[(0,h.jsx)("label",{children:null===(ee=window)||void 0===ee||null===(ee=ee.MRM_Vars)||void 0===ee||null===(ee=ee.mint_trans)||void 0===ee?void 0:ee.delay}),(0,h.jsxs)("div",{className:"sequence_delay_input",children:[(0,h.jsxs)("div",{className:"delay-input",children:[(0,h.jsx)("input",{type:"number",name:"delay_count",value:null===(ne=dt[bt])||void 0===ne?void 0:ne.delay_count,disabled:Li,onChange:function(e){return Fl(e,e.target.value,"delay_count")},min:0,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}),(0,h.jsx)("p",{className:null!=Si&&Si.number?"mintmrm-alert mintmrm-error error-message show":"mintmrm-alert mintmrm-error error-message",children:null==Si?void 0:Si.number})]}),(0,h.jsxs)("select",{onChange:function(e){return Fl(e,e.target.value,"delay_value")},name:"delay_value",value:null===(te=dt[bt])||void 0===te?void 0:te.delay_value,disabled:Li,children:[(0,h.jsx)("option",{disabled:!0,value:"",children:null===(ce=window)||void 0===ce||null===(ce=ce.MRM_Vars)||void 0===ce||null===(ce=ce.mint_trans)||void 0===ce?void 0:ce.chooseDelay}),Il.map((function(e){return(0,h.jsx)("option",{children:e.value},e.id)}))]})]})]}):(0,h.jsxs)("div",{className:"delay-date-time-container",children:[(0,h.jsxs)("div",{className:"email-delay input-item",children:[(0,h.jsx)("div",{className:"delay-label",children:(0,h.jsx)("label",{children:null===(me=window)||void 0===me||null===(me=me.MRM_Vars)||void 0===me||null===(me=me.mint_trans)||void 0===me?void 0:me.delay})}),(0,h.jsxs)("div",{className:"delay-input-wrapper",children:[(0,h.jsxs)("div",{className:"delay-radio-input",children:[(0,h.jsxs)("span",{className:"mintmrm-radiobtn",children:[(0,h.jsx)("input",{id:"time-period-option",type:"radio",name:"delay_option",value:"timePeriod",checked:"timePeriod"===(null===(ve=dt[bt])||void 0===ve?void 0:ve.delay_option)||!(null!==(je=dt[bt])&&void 0!==je&&je.delay_option),onChange:function(e){return Fl(e,e.target.value,"delay_option")}}),(0,h.jsx)("label",{htmlFor:"time-period-option",children:"Specific Time Period"})]}),(0,h.jsxs)("span",{className:"mintmrm-radiobtn",children:[(0,h.jsx)("input",{id:"date-time-option",type:"radio",name:"delay_option",value:"customDate",checked:"customDate"===(null===(_e=dt[bt])||void 0===_e?void 0:_e.delay_option),onChange:function(e){return Fl(e,e.target.value,"delay_option")}}),(0,h.jsx)("label",{htmlFor:"date-time-option",children:"Specific Date and Time"})]})]}),("timePeriod"===(null===(ye=dt[bt])||void 0===ye?void 0:ye.delay_option)||!(null!==(we=dt[bt])&&void 0!==we&&we.delay_option))&&(0,h.jsxs)("div",{className:"delay_count_input",children:[(0,h.jsxs)("div",{className:"delay-input",children:[(0,h.jsx)("input",{type:"number",name:"delay_count",value:null===(be=dt[bt])||void 0===be?void 0:be.delay_count,disabled:Li,onChange:function(e){return Fl(e,e.target.value,"delay_count")},min:0,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}),(0,h.jsx)("p",{className:null!=Si&&Si.number?"mintmrm-alert mintmrm-error error-message show":"mintmrm-alert mintmrm-error error-message",children:null==Si?void 0:Si.number})]}),(0,h.jsxs)("select",{onChange:function(e){return Fl(e,e.target.value,"delay_value")},name:"delay_value",value:null===(Ne=dt[bt])||void 0===Ne?void 0:Ne.delay_value,disabled:Li,children:[(0,h.jsx)("option",{disabled:!0,value:"",children:null===(Me=window)||void 0===Me||null===(Me=Me.MRM_Vars)||void 0===Me||null===(Me=Me.mint_trans)||void 0===Me?void 0:Me.chooseDelay}),Il.map((function(e){return(0,h.jsx)("option",{children:e.value},e.id)}))]})]})]})]}),"customDate"===(null===(Se=dt[bt])||void 0===Se?void 0:Se.delay_option)&&(0,h.jsx)("div",{className:"campaign-datepicker",children:(0,h.jsx)("div",{className:"form-group pos-relative",ref:Er,children:(0,h.jsxs)("div",{className:"campaign-schedule-datepicker pos-relative ".concat(Vr?"show-datepicker":""),children:[(0,h.jsx)("span",{className:"calendar-icon",title:"Click to show Calendar",onClick:function(){Ar((function(e){return!e}))},children:(0,h.jsx)(V.A,{})}),(0,h.jsx)(k.DateTimePicker,{currentDate:(zl=(null===(Ie=dt[bt])||void 0===Ie?void 0:Ie.scheduleDate)||(null===(Ce=window.MRM_Vars)||void 0===Ce?void 0:Ce.local_time)||(new Date).toISOString(),new Date(zl.replace(" ","T"))),onChange:function(e){return Fl(null,e,"scheduleDate")},is12Hour:!0,__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0})]})})}),!Dr&&(0,h.jsx)("p",{className:"",style:{color:"#EC5956",fontSize:"13px",fontWeight:"500",paddingLeft:"120px",paddingBottom:"20px",marginTop:"-12px"},children:"You cannot select an older date and time"})]})),(0,h.jsxs)("div",{className:"email-subject input-item",children:[(0,h.jsxs)("label",{children:[null===(ke=window)||void 0===ke||null===(ke=ke.MRM_Vars)||void 0===ke||null===(ke=ke.mint_trans)||void 0===ke?void 0:ke.SubjectLine,(0,h.jsx)("span",{className:"mint-required-sign",children:"*"})]}),(0,h.jsxs)("div",{className:"input-title-wrapper",children:[(0,h.jsx)("input",{maxLength:191,type:"text",name:"subject",value:null===(Re=dt[bt])||void 0===Re?void 0:Re.email_subject,onChange:function(e){return Fl(e,e.target.value,"email_subject")},onClick:function(e){Ql(e.target.selectionStart)},placeholder:null===(Ve=window)||void 0===Ve||null===(Ve=Ve.MRM_Vars)||void 0===Ve||null===(Ve=Ve.mint_trans)||void 0===Ve?void 0:Ve.SubjectLinePlaceHolder,disabled:Li,ref:tr}),(null===(Ae=dt[bt])||void 0===Ae||null===(Ae=Ae.email_subject)||void 0===Ae?void 0:Ae.length)>0&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("p",{className:null!=Si&&Si.subject?"error-message show":"error-message",children:null==Si?void 0:Si.subject})}),void 0!==(null===(Te=wr[bt])||void 0===Te?void 0:Te.publishable)&&!(null!==(De=wr[bt])&&void 0!==De&&De.publishable)&&!(null!==(Pe=dt[bt])&&void 0!==Pe&&null!==(Pe=Pe.email_subject)&&void 0!==Pe&&Pe.length)&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("p",{className:"mintmrm-alert mintmrm-error error-message show",children:null===(Ee=window)||void 0===Ee||null===(Ee=Ee.MRM_Vars)||void 0===Ee||null===(Ee=Ee.mint_trans)||void 0===Ee?void 0:Ee.EmailSubjectRequired})})]}),(0,h.jsxs)("span",{className:"text-length",children:[null===(Be=dt[bt])||void 0===Be||null===(Be=Be.email_subject)||void 0===Be?void 0:Be.length,"/190"]}),(0,h.jsx)("div",{className:"mint-merge-tag-section",children:(0,h.jsx)(ze.A,{inputRef:tr,inputValue:null===(Oe=dt[bt])||void 0===Oe?void 0:Oe.email_subject,setInputValue:Jl,tooltip:null===(He=window)||void 0===He||null===(He=He.MRM_Vars)||void 0===He||null===(He=He.mint_trans)||void 0===He?void 0:He.personalizeTooltip,contentType:"subject",campaignType:jl})}),(0,h.jsxs)("div",{className:"openai-icon",onClick:function(e){return Vl(0,"subject",window.MRM_Vars.mint_trans.GenerateEmailSubjectLinesUsingAI)},children:[(0,h.jsx)(j.A,{}),(0,h.jsx)("p",{className:"personalized-tooltip",children:(0,i.__)("OpenAI","mrm")})]})]}),(0,h.jsxs)("div",{className:"email-preview input-item",children:[(0,h.jsx)("label",{children:null===(Le=window)||void 0===Le||null===(Le=Le.MRM_Vars)||void 0===Le||null===(Le=Le.mint_trans)||void 0===Le?void 0:Le.PreviewText}),(0,h.jsxs)("div",{className:"input-title-wrapper",children:[(0,h.jsx)("input",{maxLength:191,type:"text",name:"email_preview_text",value:null===(Fe=dt[bt])||void 0===Fe?void 0:Fe.email_preview_text,onChange:function(e){return Fl(e,e.target.value,"email_preview_text")},onClick:function(e){Xl(e.target.selectionStart)},placeholder:null===(qe=window)||void 0===qe||null===(qe=qe.MRM_Vars)||void 0===qe||null===(qe=qe.mint_trans)||void 0===qe?void 0:qe.PreviewPlaceholder,disabled:Li,ref:ir}),(0,h.jsx)("p",{className:null!=Si&&Si.preview?"mintmrm-alert mintmrm-error error-message show":"mintmrm-alert mintmrm-error error-message",children:null==Si?void 0:Si.preview})]}),(0,h.jsxs)("span",{className:"text-length",children:[null===(We=dt[bt])||void 0===We||null===(We=We.email_preview_text)||void 0===We?void 0:We.length,"/190"]}),(0,h.jsx)("div",{className:"mint-merge-tag-section",children:(0,h.jsx)(ze.A,{inputRef:ir,inputValue:null===(Ge=dt[bt])||void 0===Ge?void 0:Ge.email_preview_text,setInputValue:$l,tooltip:null===(Ue=window)||void 0===Ue||null===(Ue=Ue.MRM_Vars)||void 0===Ue||null===(Ue=Ue.mint_trans)||void 0===Ue?void 0:Ue.personalizeTooltip,contentType:"preview",campaignType:jl})}),(0,h.jsxs)("div",{className:"openai-icon",onClick:function(e){return Vl(0,"preview",window.MRM_Vars.mint_trans.GenerateEmailPreviewTextUsingAI)},children:[(0,h.jsx)(j.A,{}),(0,h.jsx)("p",{className:"personalized-tooltip",children:(0,i.__)("OpenAI","mrm")})]})]}),(0,h.jsxs)("div",{className:"email-from input-item",children:[(0,h.jsxs)("div",{className:"form-group sender-name",children:[(0,h.jsxs)("label",{children:[null===(Je=window)||void 0===Je||null===(Je=Je.MRM_Vars)||void 0===Je||null===(Je=Je.mint_trans)||void 0===Je?void 0:Je.From,":",(0,h.jsx)("span",{className:"mint-required-sign",children:"*"})]}),(0,h.jsx)("input",{type:"text",name:"senderName",value:null===(Ke=dt[bt])||void 0===Ke?void 0:Ke.sender_name,onChange:function(e){return Fl(e,e.target.value,"sender_name")},placeholder:"From Name",disabled:Li}),void 0!==(null===(Xe=wr[bt])||void 0===Xe?void 0:Xe.publishable)&&!(null!==($e=wr[bt])&&void 0!==$e&&$e.publishable)&&!(null!==(en=dt[bt])&&void 0!==en&&null!==(en=en.sender_name)&&void 0!==en&&en.length)&&(0,h.jsx)("p",{className:"mintmrm-alert mintmrm-error error-message show",children:null===(nn=window)||void 0===nn||null===(nn=nn.MRM_Vars)||void 0===nn||null===(nn=nn.mint_trans)||void 0===nn?void 0:nn.SenderNameRequired})]}),(0,h.jsxs)("div",{className:"form-group email-input",children:[(0,h.jsx)("input",{type:"email",name:"senderEmail",value:null===(tn=dt[bt])||void 0===tn?void 0:tn.sender_email,onChange:function(e){return Fl(e,e.target.value,"sender_email")},placeholder:null===(rn=window)||void 0===rn||null===(rn=rn.MRM_Vars)||void 0===rn||null===(rn=rn.mint_trans)||void 0===rn?void 0:rn.SenderEmail,disabled:Li}),void 0===(null===(ln=wr[bt])||void 0===ln?void 0:ln.publishable)||null!==(sn=wr[bt])&&void 0!==sn&&sn.publishable||null!==(un=dt[bt])&&void 0!==un&&null!==(un=un.sender_email)&&void 0!==un&&un.length?(0,h.jsx)("p",{className:null!=Si&&Si.email?"mintmrm-alert mintmrm-error error-message show":"mintmrm-alert mintmrm-error error-message",children:null==Si?void 0:Si.email}):(0,h.jsx)("p",{className:"mintmrm-alert mintmrm-error error-message show",children:null===(mn=window)||void 0===mn||null===(mn=mn.MRM_Vars)||void 0===mn||null===(mn=mn.mint_trans)||void 0===mn?void 0:mn.SenderEmailRequired})]})]}),(0,h.jsxs)("div",{className:"email-from input-item",children:[(0,h.jsxs)("div",{className:"form-group sender-name",children:[(0,h.jsxs)("label",{children:[null===(pn=window)||void 0===pn||null===(pn=pn.MRM_Vars)||void 0===pn||null===(pn=pn.mint_trans)||void 0===pn?void 0:pn.ReplyTo,(0,h.jsx)("span",{className:"mint-required-sign",children:"*"})]}),(0,h.jsx)("input",{type:"text",name:"replyName",value:null===(hn=dt[bt])||void 0===hn?void 0:hn.reply_name,onChange:function(e){return Fl(e,e.target.value,"reply_name")},placeholder:"Reply Name",disabled:Li}),void 0!==(null===(fn=wr[bt])||void 0===fn?void 0:fn.publishable)&&!(null!==(gn=wr[bt])&&void 0!==gn&&gn.publishable)&&!(null!==(xn=dt[bt])&&void 0!==xn&&null!==(xn=xn.reply_name)&&void 0!==xn&&xn.length)&&(0,h.jsx)("p",{className:"mintmrm-alert mintmrm-error error-message show",children:null===(jn=window)||void 0===jn||null===(jn=jn.MRM_Vars)||void 0===jn||null===(jn=jn.mint_trans)||void 0===jn?void 0:jn.ReplayNameRequired})]}),(0,h.jsxs)("div",{className:"form-group email-input",children:[(0,h.jsx)("input",{type:"email",name:"replyEmail",value:null===(_n=dt[bt])||void 0===_n?void 0:_n.reply_email,onChange:function(e){return Fl(e,e.target.value,"reply_email")},placeholder:null===(yn=window)||void 0===yn||null===(yn=yn.MRM_Vars)||void 0===yn||null===(yn=yn.mint_trans)||void 0===yn?void 0:yn.ReplyEmail,disabled:Li}),void 0===(null===(wn=wr[bt])||void 0===wn?void 0:wn.publishable)||null!==(bn=wr[bt])&&void 0!==bn&&bn.publishable||null!==(Nn=dt[bt])&&void 0!==Nn&&null!==(Nn=Nn.reply_email)&&void 0!==Nn&&Nn.length?(0,h.jsx)("p",{className:null!=Si&&Si.replyEmail?"mintmrm-alert mintmrm-error error-message show":"mintmrm-alert mintmrm-error error-message",children:null==Si?void 0:Si.replyEmail}):(0,h.jsx)("p",{className:"mintmrm-alert mintmrm-error error-message show",children:null===(Mn=window)||void 0===Mn||null===(Mn=Mn.MRM_Vars)||void 0===Mn||null===(Mn=Mn.mint_trans)||void 0===Mn?void 0:Mn.ReplayEmailRequired})]})]}),(0,h.jsxs)("div",{className:"email-design input-item",children:[(0,h.jsxs)("label",{children:[null===(Sn=window)||void 0===Sn||null===(Sn=Sn.MRM_Vars)||void 0===Sn||null===(Sn=Sn.mint_trans)||void 0===Sn?void 0:Sn.EmailDesign,(0,h.jsx)("span",{className:"mint-required-sign",children:"*"})]}),(0,h.jsxs)("div",{className:"add-template-section",children:[(0,h.jsx)("div",{className:"add-template-area ",children:null!==(In=dt[bt])&&void 0!==In&&In.email_json?(0,h.jsxs)("div",{className:"add-template",children:[(0,h.jsx)("div",{className:"thumbnail-image-wrapper",children:(0,h.jsxs)("div",{className:"thumbnail-image-bg",children:[(0,h.jsx)("div",{className:"hoverlay",children:(0,h.jsx)("button",{type:"button",className:"select-this mintmrm-btn ",onClick:function(){el(!0),Kr(!Jr)},children:null===(kn=window)||void 0===kn||null===(kn=kn.MRM_Vars)||void 0===kn||null===(kn=kn.mint_trans)||void 0===kn?void 0:kn.PreviewTest})}),(0,h.jsx)("div",{className:"image-wrapper",style:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTU2IDE2OSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bWFzayBpZD0iYSIgc3R5bGU9Im1hc2stdHlwZTphbHBoYSIgd2lkdGg9IjE1NiIgaGVpZ2h0PSIxNjkiIHg9IjAiIHk9IjAiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiPjxyZWN0IHdpZHRoPSIxNTQuNTQ1IiBoZWlnaHQ9IjE2Ny42MSIgeD0iLjc3MyIgeT0iLjUwNCIgZmlsbD0iIzJEMzE0OSIgcng9IjYiLz48L21hc2s+PGcgbWFzaz0idXJsKCNhKSI+PHJlY3Qgd2lkdGg9IjE1NCIgaGVpZ2h0PSIxNjYiIHg9IjEuMDg2IiB5PSIxLjUiIGZpbGw9IiNFOEU5RUIiIHN0cm9rZT0iI0U0RTZFQiIgcng9IjUuNSIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNCAxMmgxMjh2MTQ0SDE0eiIvPjxyZWN0IHdpZHRoPSIxMDUiIGhlaWdodD0iNCIgeD0iMjYiIHk9IjY4IiBmaWxsPSIjRThFOUVCIiByeD0iMiIvPjxyZWN0IHdpZHRoPSIxMDUiIGhlaWdodD0iNCIgeD0iMjYiIHk9IjgwIiBmaWxsPSIjRThFOUVCIiByeD0iMiIvPjxyZWN0IHdpZHRoPSI3MyIgaGVpZ2h0PSI0IiB4PSIyNiIgeT0iOTIiIGZpbGw9IiNFOEU5RUIiIHJ4PSIyIi8+PHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjMxIiB4PSI0MyIgeT0iMjQiIGZpbGw9IiMwMkM0RkIiIHJ4PSI0Ii8+PHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjM2IiB4PSIyNiIgeT0iMTA4IiBmaWxsPSIjRThFOUVCIiByeD0iNCIvPjxyZWN0IHdpZHRoPSI0OCIgaGVpZ2h0PSI0IiB4PSI4MiIgeT0iMTA4IiBmaWxsPSIjNTczQkZGIiByeD0iMiIvPjxyZWN0IHdpZHRoPSI0OCIgaGVpZ2h0PSI0IiB4PSI4MiIgeT0iMTE5IiBmaWxsPSIjRThFOUVCIiByeD0iMiIvPjxyZWN0IHdpZHRoPSI0OCIgaGVpZ2h0PSI0IiB4PSI4MiIgeT0iMTMwIiBmaWxsPSIjRThFOUVCIiByeD0iMiIvPjxyZWN0IHdpZHRoPSI0OCIgaGVpZ2h0PSI0IiB4PSI4MiIgeT0iMTQxIiBmaWxsPSIjRThFOUVCIiByeD0iMiIvPjwvZz48bWFzayBpZD0iYiIgc3R5bGU9Im1hc2stdHlwZTphbHBoYSIgd2lkdGg9IjcwIiBoZWlnaHQ9IjMxIiB4PSI0MyIgeT0iMjQiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiPjxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzMSIgeD0iNDMiIHk9IjI0IiBmaWxsPSIjMDJDNEZCIiByeD0iNCIvPjwvbWFzaz48ZyBtYXNrPSJ1cmwoI2IpIj48Y2lyY2xlIGN4PSI1OC41IiBjeT0iNDYuNSIgcj0iMTcuNSIgZmlsbD0iIzMwRDFGRiIvPjxjaXJjbGUgY3g9Ijg0LjUiIGN5PSI0OS41IiByPSIxMy41IiBmaWxsPSIjMDBCQkYwIi8+PC9nPjwvc3ZnPg==")'}})]})}),(0,h.jsx)("button",{className:"edit-template-btn "+(Li?"isReadonly":""),onClick:Ji?function(){}:Wl,children:(0,h.jsx)(s.N_,{to:"",children:null===(Rn=window)||void 0===Rn||null===(Rn=Rn.MRM_Vars)||void 0===Rn||null===(Rn=Rn.mint_trans)||void 0===Rn?void 0:Rn.EditYourTemplate})})]}):(0,h.jsxs)("div",{className:"add-template",onClick:Ji?function(){}:ql,children:[(0,h.jsx)(b.A,{}),(0,h.jsx)(s.N_,{to:"",children:null===(Cn=window)||void 0===Cn||null===(Cn=Cn.MRM_Vars)||void 0===Cn||null===(Cn=Cn.mint_trans)||void 0===Cn?void 0:Cn.DesignYourEmail})]})}),void 0!==(null===(Vn=wr[bt])||void 0===Vn?void 0:Vn.publishable)&&!(null!==(An=wr[bt])&&void 0!==An&&An.publishable)&&!(null!==(Tn=dt[bt])&&void 0!==Tn&&null!==(Tn=Tn.json_data)&&void 0!==Tn&&Tn.length)&&(0,h.jsx)("span",{className:"mintmrm-alert mintmrm-missing-email-body mintmrm-error",children:null===(Dn=window)||void 0===Dn||null===(Dn=Dn.MRM_Vars)||void 0===Dn||null===(Dn=Dn.mint_trans)||void 0===Dn?void 0:Dn.EmailContentRequired})]})]})]}),(0,h.jsx)("div",{className:"content-save-section ".concat("schedule"===Pi||"recurring"===Oi&&"draft"!==Pi?"scheduled":""),children:"active"==Pi&&"recurring"!==Oi?(0,h.jsx)("button",{className:"campaign-save mintmrm-btn",disabled:!0,children:null===(Pn=window)||void 0===Pn||null===(Pn=Pn.MRM_Vars)||void 0===Pn||null===(Pn=Pn.mint_trans)||void 0===Pn?void 0:Pn.Running}):"archived"==Pi&&"recurring"!==Oi?(0,h.jsx)("button",{className:"campaign-save mintmrm-btn completed",disabled:!0,children:null===(En=window)||void 0===En||null===(En=En.MRM_Vars)||void 0===En||null===(En=En.mint_trans)||void 0===En?void 0:En.Archived}):"schedule"==Pi||"recurring"===Oi&&"draft"!==Pi?(0,h.jsx)("p",{className:"schedule-status",disabled:!0,children:kt}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("button",{type:"submit",className:"sequence-automation"===jl?"campaign-automation-save mintmrm-btn":"campaign-save mintmrm-btn",onClick:Ji?function(){}:function(){return Dl("sequence-automation"===jl?"created":Pi)},disabled:Ji,children:["regular"===jl||"recurring"===jl||"sequence-campaign"===jl?null===(Bn=window)||void 0===Bn||null===(Bn=Bn.MRM_Vars)||void 0===Bn||null===(Bn=Bn.mint_trans)||void 0===Bn?void 0:Bn.SaveDraft:"draft"===Pi?null===(On=window)||void 0===On||null===(On=On.MRM_Vars)||void 0===On||null===(On=On.mint_trans)||void 0===On?void 0:On.Publish:null===(Hn=window)||void 0===Hn||null===(Hn=Hn.MRM_Vars)||void 0===Hn||null===(Hn=Hn.mint_trans)||void 0===Hn?void 0:Hn.Update,Ji&&(0,h.jsx)("span",{className:"mintmrm-loader"})]}),("regular"===jl||"recurring"===jl||"sequence-campaign"===jl)&&(0,h.jsx)("button",{className:"campaign-schedule mintmrm-btn outline",onClick:Tl,children:"recurring"===jl?null===(Zn=window)||void 0===Zn||null===(Zn=Zn.MRM_Vars)||void 0===Zn||null===(Zn=Zn.mint_trans)||void 0===Zn?void 0:Zn.Schedule:null===(Ln=window)||void 0===Ln||null===(Ln=Ln.MRM_Vars)||void 0===Ln||null===(Ln=Ln.mint_trans)||void 0===Ln?void 0:Ln.Send})]})})]})]})]}),(0,h.jsx)(Ze,{isOpenPreview:$r,isClosePreview:Jr,setIsClosePreview:Kr,campaignStatus:Pi,isCloseBuilder:Or,setIsCloseBuilder:Hr,emailData:dt[bt],campaignID:xl,selectedEmailIndex:bt,setIsEmailBuilderOpen:Gr,emailType:"campaign"})]}),(0,h.jsx)("div",{className:"mintmrm-container",style:{display:Wi},children:(0,h.jsx)(ie,{title:"Campaign Publish",onNotPublish:Hl,onPublishStatus:Zl,onScheduleStatus:Bl,buttonText:"Publish",setScheduleTime:dr,emailFrom:null===(Fn=dt[bt])||void 0===Fn?void 0:Fn.sender_name,subscribers:Pt,campaignType:jl,setIsProOpenAi:bl,recurringSavedData:hl,setProLink:kr})}),li&&(0,h.jsx)("div",{className:"mintmrm-container",children:(0,h.jsx)(d.A,{title:oi,message:di,onDeleteShow:Ol,onDeleteStatus:Ll})}),(0,h.jsx)("div",{className:"mintmrm-container",style:{display:Mr},children:(0,h.jsx)(xe.A,{heading:Ur,itle:oi,message:di,setOpenAIPromptModal:Sr,setEmailData:mt,selectedEmailIndex:bt,context:Ot,setErrors:Ii,errors:Si,promptType:Lt})}),wl&&(0,h.jsx)("div",{className:"mintmrm-container",children:(0,h.jsx)(u.A,{feature:"openai",icon:(0,h.jsx)(j.A,{}),text:null===(qn=window)||void 0===qn||null===(qn=qn.MRM_Vars)||void 0===qn||null===(qn=qn.mint_trans)||void 0===qn?void 0:qn.upgradeText,setIsPro:bl,proLink:Cr||Y.HX})}),pt&&(0,h.jsx)(re.A,{setShowNotification:ht,notificationType:gt,setNotificationType:xt,message:_t}),(!$t&&ti||Ml)&&(0,h.jsx)(fe.A,{isOpen:Ml,setIsOpen:Sl,emailIndex:bt,setIsEmailBuilderOpen:Gr,setIsTemplateBuilder:Fr,setIsCloseBuilder:Hr,setIsTemplate:ii,setBuilderChanged:_r,emailID:pi,isTemplate:ti,setEmailBody:Gl,emailData:dt[bt],isClose:$t,setIsClose:ei,isEmailBuilderOpen:Wr}),(0,h.jsx)(he.default,{refresh:_i,setRefresh:yi,isOpen:Lr,isCloseBuilder:Or,isEmailBuilderOpen:Wr,setIsEmailBuilderOpen:Gr,isNewCampaign:!1,emailData:dt,selectedEmailData:dt[bt],lastEmailId:At,campaignData:{title:St,recipients:{lists:null==Wt?void 0:Wt.map((function(e){return{id:e.id,title:e.title}})),tags:null==Ut?void 0:Ut.map((function(e){return{id:e.id,title:e.title}}))},type:"sequence-automation"===jl?"automation":"sequence-campaign"===jl?"sequence":"recurring"===jl?"recurring":"regular",status,created_by:"".concat(window.MRM_Vars.current_userID),emails:dt.map((function(e){return{id:e.id,email_subject:e.email_subject,email_preview_text:e.email_preview_text,sender_email:e.sender_email,reply_email:e.reply_email,delay_count:e.delay_count,delay_value:e.delay_value,sender_name:e.sender_name,reply_name:e.reply_name,email_body:e.email_body,email_json:e.email_json}}))},selectedEmailIndex:bt,setEmailBody:Gl,isTemplate:ti,setIsTemplate:ii,setIsClose:ei,setIsCloseBuilder:function(){Hr("none")},setCloseTemplateSelection:function(e){"hide"===e&&ei(!0)},setIsReadonly:Fi,isReadonly:Li,mintPage:"sequence-automation"===jl?"sequence-automation":"campaign",setBackRefresh:Ni,backRefresh:bi,isClose:$t,setBuilderChanged:_r,builderChanged:jr}),(0,h.jsx)(o.A,{showVideo:"true",videoLink:"regular"==jl?"https://www.youtube.com/embed/KG_Bjdqw688":"https://www.youtube.com/embed/ZiMfFdTAcjI",docLink:"regular"==jl?"https://getwpfunnels.com/docs/mail-mint-campaigns/regular-email/":"https://getwpfunnels.com/docs/mail-mint-campaigns/email-sequence-campaigns-in-mail-mint/"})]})}},7561:(e,n,t)=>{t.r(n),t.d(n,{default:()=>o});var i=t(1609),r=t.n(i),l=t(4848),a=r().lazy((function(){return Promise.all([t.e(5637),t.e(1445),t.e(1981)]).then(t.bind(t,1981))})),s=function(e){var n=e.isCloseBuilder,t=e.selectedEmailIndex,r=e.emailData,s=e.selectedEmailData,o=e.isNewCampaign,u=e.campaignData,c=e.setIsTemplate,d=e.setIsCloseBuilder,m=e.refresh,v=e.setRefresh,p=e.businessBasicSettings,h=e.businessSocialSettings,f=e.lastEmailId,g=e.mintPage,x=e.isTemplate,j=e.setEmailBody,_=e.automationData,y=e.backRefresh,w=e.setBackRefresh,b=e.setIsClose,N=e.isClose,M=e.setBuilderChanged,S=e.builderChanged,I=e.automationArray,C=e.setMaybeSave,k=e.setNextButtonClicked,R=e.setActivateAutoSave,V=e.setUpdateClicked,A=e.updateClicked,T=e.selectedStep,D=e.setIsEmailBuilderOpen,P=e.dynamicCoupons,E=e.setIsTemplateBuilder,B=e.setIsModalOpen,O=e.emailTitle,H=e.templateId,Z=e.wcEmailTemplateType,L=e.startFromScratch,F=e.triggerName;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{style:{display:n},className:e.isOpen&&!n?"mintmrm-template-alert-wrapper email-builder-editor":"mintmrm-template-alert-wrapper",children:(0,l.jsx)("div",{className:"email-builder-section",style:{height:"100%"},children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)("div",{className:"email-builder-loading",children:(0,l.jsx)("span",{className:"mintmrm-loader"})}),children:!n&&(0,l.jsx)(a,{selectedEmailIndex:t,emailData:r,selectedEmailData:s,campaignData:u,isNewCampaign:o,setIsTemplate:c,isTemplate:x,setIsCloseBuilder:d,refresh:m,setRefresh:v,setIsReadonly:e.setIsReadonly,isReadonly:e.isReadonly,businessBasicSettings:p,businessSocialSettings:h,lastEmailId:f,mintPage:g,setEmailBody:j,automationData:_,setBackRefresh:w,backRefresh:y,setIsClose:b,isClose:N,setBuilderChanged:M,builderChanged:S,automationArray:I,setMaybeSave:C,setNextButtonClicked:k,setActivateAutoSave:R,setUpdateClicked:V,updateClicked:A,selectedStep:T,isCloseBuilder:n,setIsEmailBuilderOpen:D,dynamicCoupons:P,setIsTemplateBuilder:E,setIsModalOpen:B,emailTitle:O,templateId:H,wcEmailTemplateType:Z,startFromScratch:L,triggerName:F})})})})})};const o=(0,i.memo)(s)},6005:(e,n,t)=>{t.d(n,{Ay:()=>s});var i=t(2836),r=t(8168),l=t(1609),a=t(2646),s=(t(5815),t(5795),t(7003),(0,l.forwardRef)((function(e,n){var t=(0,i.u)(e);return l.createElement(a.S,(0,r.A)({ref:n},t))})))}}]);
//# sourceMappingURL=edit-campaign.min.js.map?ver=1751539349105000